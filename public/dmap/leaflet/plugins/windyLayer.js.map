{"version":3,"sources":["webpack:///plugins/windyLayer.js","webpack:///webpack/bootstrap 7b19f38a437100774b0e","webpack:///./src/plugins/WindyLayer.js","webpack:///./src/plugins/windy/leaflet-windy.js","webpack:///./src/plugins/windy/windy.js","webpack:///./src/plugins/windy/windy-micro.js","webpack:///./src/plugins/windy/observer.js"],"names":["define","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","160","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__windy_leaflet_windy__","options","161","__WEBPACK_IMPORTED_MODULE_0__windy__","_L","L","DomUtil","setTransform","intensityColorScale","t","e","arr","push","indexFor","Math","floor","min","length","Layer","extend","showdetails","dataType","pane","windyStaticOpts","isTOverlayer","drawOverlay","OVERLAY_ALPHA","PARTICLE_MULTIPLIER","MAX_PARTICLE_AGE","initialize","setOptions","this","_windyFactorieOpts","windyFactorieOpts","onAdd","map","_map","_animationCanvas","_createCanvas","_overlayCanvas","style","zIndex","on","_resize","_reset","zoomAnimation","Browser","any3d","_animateZoom","_showLocationDetails","_updataPostions","onRemove","_map$options","getPane","off","_windy","stop","removeChild","className","canvas","T","size","getSize","width","x","height","y","addClass","appendChild","center","zoom","getCenter","getZoom","scale","getZoomScale","position","getPosition","viewHalf","multiplyBy","currentCenterPoint","project","destCenterPoint","centerOffset","subtract","topLeftOffset","add","newSize","_redraw","loadWindy","data","gfs","getBounds","r","update","_southWest","lng","lat","_northEast","assign","animation","overlay","factorie","start","clearWindy","_map$getSize","getContext","clearRect","point","containerPointToLayerPoint","setPosition","bounds","details","getLocationDetails","latlng","containerPoint","fire","162","_classCallCheck","instance","Constructor","TypeError","__WEBPACK_IMPORTED_MODULE_0__windy_micro__","__WEBPACK_IMPORTED_MODULE_1__observer__","_T","$assign","isNumber","isNumeric","isArray","random","_L$Util","Util","requestAnimFrame","cancelAnimFrame","MAX_TASK_TIME","MIN_SLEEP_TIME","INTENSITY_SCALE_STEP","PARTICLE_LINE_WIDTH","PARTICLE_REDUCTION","FRAME_RATE","_","Windy","_intensityColorScale","load","FACTORIES","gradientColors","gradient","segmentedColorScale","_product","builder","_latlngBounds","south","deg2rad","north","east","west","_id","Date","now","_animate","_bounds","_playing","E","evolve","buckets","forEach","bucket","particles","particle","age","field","randomize","a","isDefined","xt","yt","colorStyles","draw","prev","ctx","globalCompositeOperation","fillRect","restore","beginPath","strokeStyle","moveTo","lineTo","stroke","_field","windIntensityColorScale","maxIntensity","particleCount","round","pow","isMobile","fadeFillStyle","isFF","w","putImageData","lineWidth","fillStyle","C","b","that","animationLoop","updateOverlayAlpha","release","_offObserver","dispose","isUVDefined","interpolate","isValue","maxlimitValue","animationVal","formatVector","unit","overlayVal","h","u","f","sqrt","M","floorMod","v","g","header","lo1","la1","dx","dy","nx","ny","refTime","setHours","getHours","forecastTime","date","forEachPoint","max","ceil","xMax","yMax","createImageHandler","imageData","createImageData","set","rgba","invert","isFinite","distort","imageHandler","maxlimitValueColor","velocityScale","setTimeout","trigger","A","console","warn","isInsideBoundary","wind","type","label","conversion","precision","extendedSinebowColor","currents","163","sinebowColor","sin","cos","PI","test","navigator","userAgent","log","atan","exp","tan","toFixed","rad2deg","mercY","distortion","164","slice","callback","apply","context","stack","isString","isFunction","isRegExp","window","error","once","arguments","splice","offAll","past","all","clearAll","clear","clearOther","_getLastArgs","_getSubscribers"],"mappings":"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","file":"plugins/windyLayer.js","sourcesContent":["/*! version:1.4.13 */\ndefine(function() { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./dist/dmap/leaflet/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 160);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 160:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__windy_leaflet_windy__ = __webpack_require__(161);\n/**\r\n *\r\n */\n\n/**\r\n * \r\n */\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (options) {\n  return new __WEBPACK_IMPORTED_MODULE_0__windy_leaflet_windy__[\"a\" /* default */](options);\n});\n\n/***/ }),\n\n/***/ 161:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__windy__ = __webpack_require__(162);\n\n//\nvar _L = L,\n    DomUtil = _L.DomUtil;\nvar setTransform = DomUtil.setTransform;\n//\n\nvar startColor = 255;\nvar endColor = 255;\nvar lineAlpha = .8;\nvar intensityColorScale = function intensityColorScale(t, e) {\n  for (var arr = [], i = endColor; i >= startColor; i -= 3) {\n    arr.push(\"rgba(\" + i + \", \" + i + \", \" + i + \", \" + lineAlpha + \")\");\n  }arr.indexFor = function (t) {\n    return Math.floor(Math.min(t, e) / e * (arr.length - 1));\n  };\n  return arr;\n};\n\n/**\r\n * @class WindyLayer\r\n * todo 重构：改写成基于leaflet的canvas引擎\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (L.Layer.extend({\n  /**\r\n   * \r\n   */\n  options: {\n    showdetails: false,\n    dataType: \"wind\",\n    pane: \"shadowPane\",\n    windyStaticOpts: {\n      isTOverlayer: false,\n      intensityColorScale: intensityColorScale,\n      drawOverlay: true,\n      OVERLAY_ALPHA: 130,\n      PARTICLE_MULTIPLIER: 6,\n      MAX_PARTICLE_AGE: 100\n    }\n  },\n  /**\r\n   * \r\n   */\n  initialize: function initialize(options) {\n    L.setOptions(this, options);\n    this._windyFactorieOpts = this.options.windyFactorieOpts || {};\n    // windyFactorieOpts: {\n    //   gradientColors: [[-40, [229, 229, 229]], [-30, [243, 164, 243]], [-20, [140, 15, 140]], [-15, [41, 30, 105]], [-10, [86, 79, 171]], [-5, [65, 119, 190]], [0, [77, 175, 148]], [5, [90, 199, 75]], [10, [182, 217, 63]], [15, [224, 206, 56]], [20, [223, 159, 65]], [25, [219, 108, 84]], [30, [183, 52, 102]], [40, [107, 21, 39]], [50, [43, 0, 1]]]\n    // }\n  },\n\n  /**\r\n   * \r\n   */\n  onAdd: function onAdd(map) {\n    this._map = map;\n    this._animationCanvas = this._createCanvas();\n    this._overlayCanvas = this._createCanvas(\"windy\", this.options.drawOverlay);\n    this._overlayCanvas.style.zIndex = \"0\";\n    map.on(\"resize\", this._resize, this).on(\"moveend\", this._reset, this);\n    map.options.zoomAnimation && L.Browser.any3d && map.on(\"zoomanim\", this._animateZoom, this);\n    this.options.showdetails && map.on(\"click\", this._showLocationDetails, this);\n    this._updataPostions();\n    this._reset();\n  },\n\n  /**\r\n   * \r\n   */\n  onRemove: function onRemove(map) {\n    var _map$options = map.options,\n        showdetails = _map$options.showdetails,\n        zoomAnimation = _map$options.zoomAnimation;\n\n    var pane = this.getPane();\n    //\n    map.off(\"resize\", this._resize, this).off(\"moveend\", this._reset, this);\n    showdetails && map.off(\"click\", this._showLocationDetails, this);\n    zoomAnimation && map.off(\"zoomanim\", this._animateZoom, this);\n    this._windy && (this._windy.stop(), this._windy = null);\n    pane.removeChild(this._animationCanvas);\n    pane.removeChild(this._overlayCanvas);\n    this._animationCanvas = null;\n    this._overlayCanvas = null;\n  },\n\n  /**\r\n   * \r\n   */\n  _createCanvas: function _createCanvas(className, e) {\n    var canvas = T.canvas(\"leaflet-canvas-layer \" + (className || \"\"));\n    var size = this._map.getSize();\n    canvas.width = size.x;\n    canvas.height = size.y;\n    var o = this._map.options.zoomAnimation && L.Browser.any3d;\n    DomUtil.addClass(canvas, \"leaflet-zoom-\" + (o ? \"animated\" : \"hide\"));\n    e !== false && this.getPane().appendChild(canvas);\n    return canvas;\n  },\n\n  /**\r\n   * 缩放时派发事件：更新位置\r\n   */\n  _animateZoom: function _animateZoom(e) {\n    this._updataPostions(e.center, e.zoom);\n  },\n  /**\r\n   * 更新位置\r\n   */\n  _updataPostions: function _updataPostions(center, zoom) {\n    var map = this._map;\n    center = center || map.getCenter();\n    zoom = zoom || map.getZoom();\n    var scale = map.getZoomScale(zoom);\n    var position = DomUtil.getPosition(this._overlayCanvas),\n        viewHalf = map.getSize().multiplyBy(0.5),\n        currentCenterPoint = map.project(map.getCenter(), zoom),\n        destCenterPoint = map.project(center, zoom),\n        centerOffset = destCenterPoint.subtract(currentCenterPoint),\n        topLeftOffset = viewHalf.multiplyBy(-scale).add(position).add(viewHalf).subtract(centerOffset);\n    //\n    setTransform(this._animationCanvas, topLeftOffset, scale);\n    setTransform(this._overlayCanvas, topLeftOffset, scale);\n  },\n  /**\r\n   * \r\n   */\n  _resize: function _resize(e) {\n    var newSize = e.newSize;\n    var x = newSize.x,\n        y = newSize.y;\n    //\n\n    this._animationCanvas.width = x;\n    this._animationCanvas.height = y;\n    this._overlayCanvas.width = x;\n    this._overlayCanvas.height = y;\n    this._reset();\n  },\n  /**\r\n   * 重置重绘\r\n   */\n  _reset: function _reset() {\n    this._redraw();\n  },\n  /**\r\n   * 加载风场\r\n   */\n  loadWindy: function loadWindy(data) {\n    var _map = this._map;\n\n    if (!_map) {\n      this.gfs = data;\n      return;\n    }\n    //\n    var e = void 0,\n        o = _map.getBounds();\n    var r = _map.getSize();\n    var s = _map.getZoom();\n    //\n    this._windy ? void (e = this.gfs !== data ? this._windy.update(data, [[0, 0], [r.x, r.y]], r.x, r.y, [[o._southWest.lng, o._southWest.lat], [o._northEast.lng, o._northEast.lat]], s) : null) : this._windy = new __WEBPACK_IMPORTED_MODULE_0__windy__[\"a\" /* default */](T.assign({\n      animation: this._animationCanvas,\n      overlay: this._overlayCanvas,\n      data: data,\n      dataType: this.options.dataType,\n      factorie: this._windyFactorieOpts,\n      drawOverlay: true\n    }, this.options.windyStaticOpts));\n\n    //\n    this._windy.start([[0, 0], [r.x, r.y]], r.x, r.y, [[o._southWest.lng, o._southWest.lat], [o._northEast.lng, o._northEast.lat]], s);\n    this.gfs = data;\n    return;\n  },\n\n  /**\r\n   * 清除图层\r\n   */\n  clearWindy: function clearWindy() {\n    if (this._windy) {\n      this._windy.stop();\n      delete this._windy;\n\n      var _map$getSize = this.map.getSize(),\n          x = _map$getSize.x,\n          y = _map$getSize.y;\n\n      this._animationCanvas.getContext(\"2d\").clearRect(0, 0, x, y);\n      this._overlayCanvas.getContext(\"2d\").clearRect(0, 0, x, y);\n    }\n  },\n  /**\r\n   * 重绘\r\n   */\n  _redraw: function _redraw() {\n    var _windy = this._windy,\n        _map = this._map,\n        _animationCanvas = this._animationCanvas,\n        _overlayCanvas = this._overlayCanvas;\n\n    if (_windy) {\n      var point = _map.containerPointToLayerPoint([0, 0]);\n      DomUtil.setPosition(_animationCanvas, point);\n      DomUtil.setPosition(_overlayCanvas, point);\n      var size = _map.getSize();\n      var bounds = _map.getBounds();\n      // let zoom = (180 * n.x / (20037508.34 * (a.getEast() - a.getWest())), _map.getZoom());\n      var zoom = _map.getZoom();\n      this._windy.start([[0, 0], [size.x, size.y]], size.x, size.y, [[bounds._southWest.lng, bounds._southWest.lat], [bounds._northEast.lng, bounds._northEast.lat]], zoom);\n    }\n  },\n  /**\r\n   * 触发事件，显示位置信息\r\n   * @param {*} e \r\n   */\n  _showLocationDetails: function _showLocationDetails(e) {\n    if (this._windy) {\n      var details = this.getLocationDetails(e.latlng, e.containerPoint);\n      details && this.fire(\"pushdetails\", {\n        details: details\n      });\n    }\n  },\n\n  /**\r\n   * 获取位置信息\r\n   * @param {*} t \r\n   * @param {*} i \r\n   */\n  getLocationDetails: function getLocationDetails(latlng, point) {\n    return this._windy ? this._windy.getLocationDetails(latlng, point) : null;\n  }\n}));\n\n/***/ }),\n\n/***/ 162:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__windy_micro__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__observer__ = __webpack_require__(164);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @see https://github.com/liming0711/WARLUS/blob/89874f3fde0bb0653bfa08ff58abaed1bfadd216/src/components/map/src/utils/windy.js\r\n */\n\n\n\n//\nvar _T = T,\n    $assign = _T.assign,\n    isNumber = _T.isNumber,\n    isNumeric = _T.isNumeric,\n    isArray = _T.isArray,\n    random = _T.random;\nvar _L$Util = L.Util,\n    requestAnimFrame = _L$Util.requestAnimFrame,\n    cancelAnimFrame = _L$Util.cancelAnimFrame;\n\n//\n\n\n// 默认样式\n\nvar MAX_TASK_TIME = 100,\n    MIN_SLEEP_TIME = 25,\n    OVERLAY_ALPHA = Math.floor(102),\n    INTENSITY_SCALE_STEP = 10,\n    MAX_PARTICLE_AGE = 100,\n    PARTICLE_LINE_WIDTH = 1,\n    PARTICLE_MULTIPLIER = 7,\n    PARTICLE_REDUCTION = .75,\n    FRAME_RATE = 40,\n    _ = [0 / 0, 0 / 0, null],\n    y = [0 / 0, 0 / 0, null],\n    p = [0, 0, 0, 0],\n    VELOCITY_SCALE = 1;\n\n/**\r\n * \r\n */\n\nvar Windy = function () {\n  /**\r\n   *\r\n   */\n  function Windy(options) {\n    _classCallCheck(this, Windy);\n\n    this.options = {\n      dataType: \"wind\" };\n\n    options = this.options = $assign(this.options, options);\n    this._intensityColorScale = options.intensityColorScale;\n    //\n    MAX_TASK_TIME = isNumber(options.MAX_TASK_TIME) ? options.MAX_TASK_TIME : MAX_TASK_TIME; //\n    MIN_SLEEP_TIME = isNumber(options.MIN_SLEEP_TIME) ? options.MIN_SLEEP_TIME : MIN_SLEEP_TIME; //在恢复之前等待的最小时间\n    OVERLAY_ALPHA = isNumber(options.OVERLAY_ALPHA) ? options.OVERLAY_ALPHA : OVERLAY_ALPHA; //透明度\n    INTENSITY_SCALE_STEP = isNumber(options.INTENSITY_SCALE_STEP) ? options.INTENSITY_SCALE_STEP : INTENSITY_SCALE_STEP; //粒子强度色标的步长\n    MAX_PARTICLE_AGE = isNumber(options.MAX_PARTICLE_AGE) ? options.MAX_PARTICLE_AGE : MAX_PARTICLE_AGE; //粒子最大运动次数\n    PARTICLE_LINE_WIDTH = isNumber(options.PARTICLE_LINE_WIDTH) ? options.PARTICLE_LINE_WIDTH : PARTICLE_LINE_WIDTH; //粒子宽度\n    PARTICLE_MULTIPLIER = isNumber(options.PARTICLE_MULTIPLIER) ? options.PARTICLE_MULTIPLIER : PARTICLE_MULTIPLIER; //粒子密度\n    PARTICLE_REDUCTION = isNumber(options.PARTICLE_REDUCTION) ? options.PARTICLE_REDUCTION : PARTICLE_REDUCTION; //适配移动端的粒子数量\n    FRAME_RATE = isNumber(options.FRAME_RATE) ? options.FRAME_RATE : FRAME_RATE; //重绘帧数\n    //\n    options.data && this.load(options.data);\n  }\n\n  Windy.prototype.load = function load(data) {\n    this.stop();\n    var options = this.options;\n    var animation = this.options.animation;\n\n    if (animation) {\n      var width = animation.width,\n          height = animation.height;\n\n      animation.getContext(\"2d\").clearRect(0, 0, width, height);\n      options.overlay.getContext(\"2d\").clearRect(0, 0, width, height);\n    }\n\n    var r = $assign(FACTORIES[this.options.dataType], this.options.factorie);\n    r.gradientColors && isArray(r.gradientColors) && (r.scale.gradient = __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].segmentedColorScale(r.gradientColors), delete r.gradientColors);\n    //\n    this._product = $assign(x(r.builder(data, this.options.isTOverlayer)), r);\n  };\n\n  Windy.prototype.start = function start(t, i, e, n, s) {\n    //\n    this._product && (this.stop(), this._latlngBounds = {\n      south: __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].deg2rad(n[0][1]),\n      north: __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].deg2rad(n[1][1]),\n      east: __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].deg2rad(n[1][0]),\n      west: __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].deg2rad(n[0][0]),\n      width: i,\n      height: e,\n      zoom: s\n    }, this.options.animation.getContext(\"2d\").clearRect(0, 0, i, e), this.options.overlay.getContext(\"2d\").clearRect(0, 0, i, e), this._id = Date.now() + random(-100, 100), __WEBPACK_IMPORTED_MODULE_1__observer__[\"a\" /* default */].on(\"windy:\" + this._id, this._animate, this), this._bounds = getBounds(t, i, e), this._playing = true, E(this));\n  };\n\n  Windy.prototype._animate = function _animate(t) {\n\n    function evolve() {\n      buckets.forEach(function (bucket) {\n        bucket.length = 0;\n      });\n      particles.forEach(function (particle) {\n        if (particle.age > MAX_PARTICLE_AGE) {\n          field.randomize(particle).age = 0;\n        }\n        var i = particle.x;\n        var e = particle.y;\n        var n = field(i, e); // 当前矢量位置\n        var a = n[2];\n        if (null === a) particle.age = MAX_PARTICLE_AGE; // // 粒子逃脱了格，再也没有回来\n        else {\n            var o = i + n[0];\n            var r = e + n[1];\n            if (field.isDefined(o, r)) {\n              // Path from (x,y) to (xt,yt) is visible, so add this particle to the appropriate draw bucket.\n              particle.xt = o;\n              particle.yt = r;\n              buckets[colorStyles.indexFor(a)].push(particle);\n            } else {\n              // 粒子不可见\n              particle.x = o;\n              particle.y = r;\n            }\n          }\n        particle.age += 1;\n      });\n    }\n    function draw() {\n      // 淡出现有的粒子径。\n      var prev = ctx.globalCompositeOperation;\n      ctx.globalCompositeOperation = \"destination-in\";\n      ctx.fillRect(_bounds.x, _bounds.y, _bounds.width, _bounds.height);\n      ctx.globalCompositeOperation = prev;\n\n      ctx.restore();\n      // 绘制新的粒子径。\n      buckets.forEach(function (particles, i) {\n        if (particles.length > 0) {\n          ctx.beginPath();\n          ctx.strokeStyle = colorStyles[i]; //\n          particles.forEach(function (particle) {\n            ctx.moveTo(particle.x, particle.y), ctx.lineTo(particle.xt, particle.yt), particle.x = particle.xt, particle.y = particle.yt;\n          });\n          ctx.stroke();\n        }\n      });\n    }\n\n    this._field = t.field;\n    var _bounds = this._bounds;\n    var bounds = this._latlngBounds;\n    var field = this._field;\n    //\n    var l = this._product;\n    //\n    var colorStyles = (this._intensityColorScale || __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].windIntensityColorScale)(INTENSITY_SCALE_STEP, l.particles.maxIntensity);\n    //\n    var buckets = colorStyles.map(function () {\n      return [];\n    });\n\n    var particleCount = Math.round(bounds.width * PARTICLE_MULTIPLIER * (1 / Math.pow(1.6, bounds.zoom - 2)));\n\n    T.isMobile() && (particleCount *= PARTICLE_REDUCTION);\n    for (var fadeFillStyle = __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isFF() ? \"rgba(0, 0, 0, 0.95)\" : \"rgba(0, 0, 0, 0.97)\", particles = [], w = 0; particleCount > w; w++) {\n      particles.push(field.randomize({\n        age: random(0, MAX_PARTICLE_AGE)\n      }));\n    }if (this.options.drawOverlay) {\n      var canvas = this.options.overlay;\n      var _ctx = canvas.getContext(\"2d\");\n      _ctx.putImageData(field.overlay, 0, 0); //渲染静态风场图\n      // if (createImageHandler.canvas) {\n      //   let tmepCanvas = createImageHandler.canvas;\n      //   let tempCtx = tmepCanvas.getContext(\"2d\");\n      //   tempCtx.putImageData(field.overlay, 0, 0);\n      //   //\n      //   // ctx.drawImage(tmepCanvas, 0, 0);\n      //   //\n      //   tmepCanvas.style.zIndex = \"0\"\n      //   tmepCanvas.style.transform = canvas.style.transform;\n      //   tmepCanvas.className = canvas.className;\n      //   //\n      //   let { parentNode } = canvas;\n      //   parentNode.removeChild(canvas);\n      //   parentNode.appendChild(tmepCanvas);\n      //   this.options.overlay = tmepCanvas;\n      // } else {\n      //   ctx.putImageData(field.overlay, 0, 0);//渲染静态风场图\n      // }\n    }\n    var ctx = this.options.animation.getContext(\"2d\");\n    ctx.lineWidth = PARTICLE_LINE_WIDTH;\n    ctx.fillStyle = fadeFillStyle;\n    var C = void 0,\n        b = Date.now();\n    var that = this;\n    !function E() {\n      that.animationLoop = requestAnimFrame(E);\n      var t = Date.now();\n      C = t - b, C > FRAME_RATE && (b = t - C % FRAME_RATE, evolve(), draw());\n    }();\n  };\n\n  Windy.prototype.updateOverlayAlpha = function updateOverlayAlpha(t) {\n    OVERLAY_ALPHA = t, this._field && (this._field.release(), delete this._field), this.animationLoop && (cancelAnimFrame(this.animationLoop), delete this.animationLoop);\n    var i = this._latlngBounds.width,\n        e = this._latlngBounds.height;\n    this.options.animation.getContext(\"2d\").clearRect(0, 0, i, e), this.options.overlay.getContext(\"2d\").clearRect(0, 0, i, e), E(this);\n  };\n\n  Windy.prototype.update = function update(t, i, e, n, a, o) {\n    this.options.data = t, this.load(t), this.start(i, e, n, a, o);\n  };\n\n  Windy.prototype.stop = function stop() {\n    this._playing = false, this._field && (this._field.release(), delete this._field), this.animationLoop && (cancelAnimFrame(this.animationLoop), this.animationLoop), delete this._latlngBounds, delete this._bounds, this._offObserver();\n  };\n\n  Windy.prototype.dispose = function dispose() {\n    this.stop(), delete this._product;\n  };\n\n  Windy.prototype._offObserver = function _offObserver() {\n    this._id && (__WEBPACK_IMPORTED_MODULE_1__observer__[\"a\" /* default */].off(\"windy:\" + this._id), delete this._id);\n  };\n\n  Windy.prototype.getLocationDetails = function getLocationDetails(t, i) {\n    if (!(t && this._product && this._field && this._field.isUVDefined(i.x, i.y))) return null;\n    var e = this._product.interpolate(t.lng, t.lat),\n        n = e[2];\n    return __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(e) && n < this._product.maxlimitValue ? {\n      animationVal: __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].formatVector([e[0], e[1], n], this._product.unit),\n      overlayVal: this._field.isTOverlayer ? e[3] : n\n    } : null;\n  };\n\n  return Windy;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Windy);\n\n\nvar w = function w(t, i, e, n, a, o) {\n  var r = 1 - t,\n      s = 1 - i,\n      l = r * s,\n      h = t * s,\n      d = r * i,\n      u = t * i,\n      c = e[0] * l + n[0] * h + a[0] * d + o[0] * u,\n      f = e[1] * l + n[1] * h + a[1] * d + o[1] * u;\n  return [c, f, Math.sqrt(c * c + f * f)];\n};\n\nvar M = function M(t, i, e, n, a, o) {\n  var r = 1 - t,\n      s = 1 - i,\n      l = r * s,\n      h = t * s,\n      d = r * i,\n      u = t * i,\n      c = e[0] * l + n[0] * h + a[0] * d + o[0] * u,\n      f = e[1] * l + n[1] * h + a[1] * d + o[1] * u,\n      m = e[2] * l + n[2] * h + a[2] * d + o[2] * u;\n  return [c, f, Math.sqrt(c * c + f * f), m];\n};\nvar x = function x(t) {\n  function i(i, e) {\n    var l,\n        h = __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].floorMod(i - n, 360) / r,\n        d = (o - e) / s,\n        c = Math.floor(h),\n        f = c + 1,\n        m = Math.floor(d),\n        v = m + 1;\n    if (l = u[m]) {\n      var _ = l[c],\n          y = l[f];\n      if (__WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(_) && __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(y) && (l = u[v])) {\n        var p = l[c],\n            g = l[f];\n        if (__WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(p) && __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(g)) return t.interpolate(h - c, d - m, _, y, p, g);\n      }\n    }\n    return null;\n  }\n  var e = t.header,\n      n = e.lo1,\n      o = e.la1,\n      r = e.dx,\n      s = e.dy,\n      l = e.nx,\n      h = e.ny,\n      d = new Date(e.refTime);\n  d.setHours(d.getHours() + e.forecastTime);\n  for (var u = [], c = 0, f = Math.floor(l * r) >= 360, m = 0; h > m; m++) {\n    for (var v = [], _ = 0; l > _; _++, c++) {\n      v[_] = t.data(c);\n    }f && v.push(v[0]), u[m] = v;\n  }\n  return {\n    date: d,\n    interpolate: i,\n    forEachPoint: function forEachPoint(t) {\n      for (var i = 0; h > i; i++) {\n        for (var e = u[i] || [], d = 0; l > d; d++) {\n          t(__WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].floorMod(180 + n + d * r, 360) - 180, o - i * s, e[d]);\n        }\n      }\n    }\n  };\n},\n    C = function C(t, i) {\n  return isNumeric(t) || 1 / 0 === t || t === -1 / 0 ? t : i;\n};\n\nvar getBounds = function getBounds(t, i, e) {\n  var n = t[0],\n      a = t[1],\n      o = Math.max(Math.floor(C(n[0], 0)), 0),\n      r = Math.max(Math.floor(C(n[1], 0)), 0),\n      s = Math.min(Math.ceil(a[0], i), i - 1),\n      l = Math.min(Math.ceil(a[1], e), e - 1);\n  return {\n    x: o,\n    y: r,\n    xMax: s,\n    yMax: l,\n    width: s - o + 1,\n    height: l - r + 1\n  };\n};\n/**\r\n * \r\n * @param {*} bounds \r\n */\nvar createImageHandler = function createImageHandler(bounds) {\n  var width = bounds.width,\n      height = bounds.height;\n\n  var canvas = createImageHandler.canvas = T.canvas();\n  canvas.width = width;\n  canvas.height = height;\n  var ctx = canvas.getContext(\"2d\");\n  var imageData = ctx.createImageData(width, height);\n  var data = imageData.data; //获取每一个像素\n  //\n  return {\n    imageData: imageData,\n    set: function set(x, y, rgba) {\n      var a = 4 * (y * width + x);\n      return data[a] = rgba[0], data[a + 1] = rgba[1], data[a + 2] = rgba[2], data[a + 3] = rgba[3], this;\n    }\n  };\n};\n\nvar E = function E(t) {\n  function i(t) {\n    for (var i = [], e = n.y; e <= n.yMax; e += 2) {\n      var o = __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].invert(t, e, d),\n          r = p,\n          s = null;\n      if (o) {\n        var l = o[0],\n            f = o[1];\n        if (isFinite(l)) {\n          s = w(l, f);\n          var g = null;\n          s && (g = isTOverlayer && s.length > 3 ? s[3] : s[2], s = __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].distort(l, f, t, e, m, s, d)), __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(g) && (r = !u || u >= g ? M.gradient(g, OVERLAY_ALPHA) : c || r);\n        }\n      }\n      i[e + 1] = i[e] = s || y, imageHandler.set(t, e, r).set(t + 1, e, r).set(t, e + 1, r).set(t + 1, e + 1, r);\n    }\n    _[t + 1] = _[t] = i;\n  }\n  var e = t._product,\n      n = t._bounds,\n      d = t._latlngBounds,\n      u = t._product.maxlimitValue,\n      c = t._product.maxlimitValueColor,\n      f = t._id;\n  if (!e) return null;\n  var m = isNumber(e.particles.velocityScale) ? n.height * e.particles.velocityScale : e.particles.velocityScale({\n    height: n.height,\n    width: n.width,\n    zoom: d.zoom\n  });\n  var imageHandler = createImageHandler(n);\n  var _ = [];\n  var g = n.x;\n  var w = e.interpolate;\n  var M = e.scale;\n  var isTOverlayer = t.options.isTOverlayer;\n  !function C() {\n    try {\n      if (t._playing) {\n        for (var e = Date.now(); g < n.xMax;) {\n          if (i(g), g += 2, Date.now() - e > MAX_TASK_TIME) return void setTimeout(C, MIN_SLEEP_TIME);\n        }__WEBPACK_IMPORTED_MODULE_1__observer__[\"a\" /* default */].trigger(\"windy:\" + f, {\n          field: A(_, n, imageHandler, t.options.isTOverlayer)\n        });\n      }\n    } catch (a) {\n      console.warn(a);\n    }\n  }();\n};\n\nvar A = function A(t, i, imageHandler, n) {\n  function a(i, e) {\n    var n = t[Math.round(i)];\n    return n && n[Math.round(e)] || _;\n  }\n  return a.isDefined = function (t, i) {\n    return null !== a(t, i)[2];\n  }, //判断是否在边界内\n  a.isInsideBoundary = function (t, i) {\n    return a(t, i) !== _;\n  }, a.release = function () {\n    t = [];\n  }, a.randomize = function (t) {\n\n    var e,\n        n,\n        r = 0;\n    do {\n      e = Math.round(random(i.x, i.xMax)), n = Math.round(random(i.y, i.yMax));\n    } while (!a.isDefined(e, n) && r++ < 30);return t.x = e, t.y = n, t;\n  }, a.overlay = imageHandler.imageData, a.isTOverlayer = n, a.isUVDefined = function (t, i) {\n    if (a.isTOverlayer) {\n      var e = a(t, i);\n      return null !== Math.sqrt(e[0] * e[0] + e[1] * e[1]);\n    }\n    return null !== a(t, i)[2];\n  }, a;\n};\n\nvar FACTORIES = {\n  wind: {\n    field: \"vector\",\n    type: \"wind\",\n    builder: function builder(t, i) {\n      var e = t[0].data,\n          n = t[1].data;\n      var a = 3 === t.length ? t[2].data : null;\n      return {\n        header: t[0].header,\n        interpolate: i && a ? M : w,\n        data: function data(t) {\n          var i = a ? a[t] : null;\n          return [e[t], n[t], i];\n        }\n      };\n    },\n    unit: {\n      label: \"km/h\",\n      conversion: function conversion(t) {\n        return 3.6 * t;\n      },\n      precision: 0\n    },\n    scale: {\n      bounds: [0, 100],\n      gradient: function gradient(t, i) {\n        return __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].extendedSinebowColor(Math.min(t, 100) / 100, i);\n      }\n    },\n    particles: {\n      velocityScale: function velocityScale(t) {\n        return t.height / (4e4 * Math.pow(1.6, t.zoom - 3)) * VELOCITY_SCALE;\n      },\n      maxIntensity: 17\n    }\n  },\n  currents: {\n    field: \"vector\",\n    type: \"currents\",\n    builder: function builder(t, i) {\n      var e = t[0].data,\n          n = t[1].data,\n          o = 3 === t.length ? t[2].data : null;\n      return {\n        header: t[0].header,\n        interpolate: i && o ? M : w,\n        data: function data(t) {\n          var i = e[t],\n              r = n[t],\n              s = o ? o[t] : null;\n          return __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(i) && __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].isValue(r) ? [i, r, s] : null;\n        }\n      };\n    },\n    unit: {\n      label: \"m/s\",\n      conversion: function conversion(t) {\n        return t;\n      },\n      precision: 2\n    },\n    scale: {\n      bounds: [0, 1.5],\n      gradient: __WEBPACK_IMPORTED_MODULE_0__windy_micro__[\"a\" /* default */].segmentedColorScale([[0, [10, 25, 68]], [.15, [10, 25, 250]], [.4, [24, 255, 93]], [.65, [255, 233, 102]], [1, [255, 233, 15]], [1.5, [255, 15, 15]]])\n    },\n    maxlimitValue: 20,\n    particles: {\n      velocityScale: 1 / 4400,\n      maxIntensity: .7\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 163:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction n(t, i) {\n  var e = t[0],\n      n = t[1],\n      a = t[2],\n      o = i[0] - e,\n      r = i[1] - n,\n      s = i[2] - a;\n  return function (t, i) {\n    return [Math.floor(e + t * o), Math.floor(n + t * r), Math.floor(a + t * s), i];\n  };\n}\nfunction sinebowColor(t, i) {\n  var e = t * u * 5 / 6;\n  e *= .75;\n  var n = Math.sin(e),\n      a = Math.cos(e),\n      o = Math.floor(255 * Math.max(0, -a)),\n      r = Math.floor(255 * Math.max(n, 0)),\n      s = Math.floor(255 * Math.max(a, 0, -n));\n  return [o, r, s, i];\n}\nfunction o(t, i) {\n  return c >= t ? sinebowColor(t / c, i) : f((t - c) / (1 - c), i);\n}\nfunction r(t, i, e, n) {\n  return \"rgba(\" + t + \", \" + i + \", \" + e + \", \" + n + \")\";\n}\nfunction s(t, i) {\n  for (var e = [], n = 85; 255 >= n; n += t) {\n    e.push(r(n, n, n, 1));\n  }return e.indexFor = function (t) {\n    return Math.floor(Math.min(t, i) / i * (e.length - 1));\n  }, e;\n}\nfunction l(t) {\n  for (var i = [], e = [], a = [], o = 0; o < t.length - 1; o++) {\n    i.push(t[o + 1][0]), e.push(n(t[o][1], t[o + 1][1])), a.push([t[o][0], t[o + 1][0]]);\n  }return function (t, n) {\n    var o;\n    for (o = 0; o < i.length - 1 && !(t <= i[o]); o++) {}\n    var r = a[o];\n    return e[o](d(t, r[0], r[1]), n);\n  };\n}\nfunction h(t, i, e) {\n  return Math.max(i, Math.min(t, e));\n}\nfunction d(t, i, e) {\n  return (h(t, i, e) - i) / (e - i);\n}\nvar u = 2 * Math.PI,\n    c = .45,\n    f = n(sinebowColor(1, 0), [255, 255, 255]),\n    m = function m(t, i) {\n  var e = t - i * Math.floor(t / i);\n  return e === i ? 0 : e;\n},\n    v = function v(t) {\n  return null !== t && void 0 !== t;\n},\n    isFF = function isFF() {\n  return (/firefox/i.test(navigator.userAgent)\n  );\n},\n    p = function p(t, i, e) {\n  var n = e.east - e.west,\n      a = e.width / w(n) * 360 / (2 * Math.PI),\n      o = a / 2 * Math.log((1 + Math.sin(e.south)) / (1 - Math.sin(e.south))),\n      r = e.height + o,\n      s = (r - i) / a,\n      l = 180 / Math.PI * (2 * Math.atan(Math.exp(s)) - Math.PI / 2),\n      h = w(e.west) + t / e.width * w(n);\n  return [h, l];\n},\n    g = function g(t) {\n  return t / 180 * Math.PI;\n},\n    w = function w(t) {\n  return t / (Math.PI / 180);\n},\n    M = function M(t) {\n  return Math.log(Math.tan(t / 2 + Math.PI / 4));\n},\n    x = function x(t, i, e) {\n  var n = M(e.south),\n      a = M(e.north),\n      o = e.width / (e.east - e.west),\n      r = e.height / (a - n),\n      s = M(g(t)),\n      l = (g(i) - e.west) * o;\n  return s = (a - s) * r, [l, s];\n},\n    C = function C(t, i, e, n, a, o, r) {\n  var s = o[0] * a,\n      l = o[1] * a,\n      h = T(t, i, e, n, r);\n  return o[0] = h[0] * s + h[2] * l, o[1] = h[1] * s + h[3] * l, o;\n},\n    T = function T(t, i, e, n, a) {\n  var o = Math.pow(10, -5.2),\n      r = 0 > t ? o : -o,\n      s = 0 > i ? o : -o,\n      l = x(i, t + r, a),\n      h = x(i + s, t, a),\n      d = Math.cos(i / 360 * u);\n  return [(l[0] - e) / r / d, (l[1] - n) / r / d, (h[0] - e) / s, (h[1] - n) / s];\n},\n    b = function b(t, i) {\n  return i.conversion(t).toFixed(i.precision);\n},\n    E = function E(t, i) {\n  return b(t[2], i) + i.label;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  isFF: isFF,\n  isValue: v,\n  floorMod: m,\n  deg2rad: g,\n  rad2deg: w,\n  mercY: M,\n  project: x,\n  invert: p,\n  distort: C,\n  distortion: T,\n  sinebowColor: sinebowColor,\n  extendedSinebowColor: o,\n  windIntensityColorScale: s,\n  segmentedColorScale: l,\n  formatVector: E\n});\n\n/***/ }),\n\n/***/ 164:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * \r\n */\nvar _T = T,\n    e = _T.isString,\n    o = _T.isFunction,\n    a = _T.isArray,\n    c = _T.isRegExp;\n/**\r\n * \r\n * @param {*} t \r\n * @param {*} r \r\n * @param {*} n \r\n */\n\nfunction i(t, r, n) {\n  n ? v[t] = r[t] : delete v[t];\n}\nfunction l(t, r, n) {\n  if (!(t || e(t) || c(t) || a(t))) throw \"输入的参数必须是字符串或字符串数组\";\n  a(t) || (t = [t]);\n  var o = [];\n  for (var l in n) {\n    o.push(l);\n  }for (var f = 0, u = t.length; u > f; f++) {\n    var s = t[f];\n    if (!e(s) && !c(s)) throw \"输入的参数的数组元素必须是字符串或正则表达式\";\n    if (c(s)) for (var g = 0, v = o.length; v > g; g++) {\n      var h = o[g];\n      s.test(h) && i(h, n, r);\n    } else s in n && i(s, n, r);\n  }\n}\nfunction f(t, r, n, e) {\n  for (var o = t.slice(0), a = 0, c = o.length; c > a; a++) {\n    var i = o[a];\n    i.callback.apply(i.context || r, n), e && s.log(i.stack);\n  }\n}\nfunction u() {\n  var t = new Error();\n  if (t.stack) {\n    var r = 3,\n        e = t.stack.split(\"\\n\");\n    \"    at Error (<anonymous>)\" === e[1] && r++;\n    var o = arguments.callee.caller.caller;\n    (o === n.exports.once || o === n.exports.past) && r++;\n    var a = e[r];\n    return a;\n  }\n}\nvar s,\n    g = {},\n    v = {};\nif (window.console) s = window.console;else {\n  var h = function h() {};\n  s = {\n    log: h,\n    warn: h,\n    error: h\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  on: function on(t, r, n) {\n    if (!e(t) || !o(r)) throw \"必须传入正确的name和callback参数\";\n    var a = g[t] || (g[t] = []),\n        c = {\n      callback: r,\n      context: n || this\n    };\n\n    return a.push(c), this;\n  },\n  once: function once(t, r, n) {\n    if (!e(t) || !o(r)) throw \"必须传入正确的name和callback参数\";\n    var a = this,\n        c = function c() {\n      a.off(t, c), r.apply(n || a, arguments);\n    };\n    return c.callback = r, this.on(t, c), this;\n  },\n  off: function off(t, r, n) {\n    if (!(t || r || n)) throw \"必须传入name, callback, context等参数\";\n    if (!t || !e(t)) throw \"必须传入正确的name参数\";\n    if (r && !o(r)) throw \"必须传入正确的callback参数\";\n    var a = g[t];\n    if (!a) return this;\n    if (!r && !n) return delete g[t], this;\n    for (var c = a.length - 1; c >= 0; c--) {\n      var i = a[c];\n      (i.callback === r || i.callback.callback === r) && (n && i.context !== n || a.splice(c, 1));\n    }\n    return this;\n  },\n  offAll: function offAll() {\n    return g = {}, this;\n  },\n  past: function past(t, r, n) {\n    if (!e(t) || !o(r)) throw \"必须传入正确的name和callback参数\";\n    return v[t] && r.apply(n || this, v[t]), this.on(t, r, n), this;\n  },\n  trigger: function trigger(t) {\n    if (!e(t)) throw \"必须传入正确的name参数\";\n    for (var r = [], n = 1, o = arguments.length; o > n; n++) {\n      r.push(arguments[n]);\n    }v[t] = r;\n    var a;\n\n    var l = g[t];\n    l && f(l, this, r, a);\n    var h = g.all;\n    return a && h && s.log(\"on all\"), h && f(h, this, r, a), a && (s.log(\"--------------- trigger: [\" + t + \"] end -----------------\"), s.log(\"\"), s.log(\"\")), this;\n  },\n  clearAll: function clearAll() {\n    v = {};\n  },\n  clear: function clear(t) {\n    var r = v;\n    l(t, !1, r);\n  },\n  clearOther: function clearOther(t) {\n    var r = v;\n    v = {}, l(t, !0, r);\n  },\n  _getLastArgs: function _getLastArgs() {\n    return v;\n  },\n  _getSubscribers: function _getSubscribers() {\n    return g;\n  }\n});\n\n/***/ })\n\n/******/ })});;\n\n\n// WEBPACK FOOTER //\n// plugins/windyLayer.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/dmap/leaflet/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 160);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7b19f38a437100774b0e","/**\r\n *\r\n */\r\nimport WindLayer from \"./windy/leaflet-windy\";\r\n/**\r\n * \r\n */\r\nexport default options => {\r\n  return new WindLayer(options)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/WindyLayer.js","import Windy from './windy';\r\n//\r\nlet { DomUtil } = L;\r\nlet { setTransform } = DomUtil;\r\n//\r\nlet startColor = 255;\r\nlet endColor = 255;\r\nlet lineAlpha = .8;\r\nlet intensityColorScale = function (t, e) {\r\n  for (var arr = [], i = endColor; i >= startColor; i -= 3)\r\n    arr.push(\"rgba(\" + i + \", \" + i + \", \" + i + \", \" + lineAlpha + \")\");\r\n  arr.indexFor = function (t) {\r\n    return Math.floor(Math.min(t, e) / e * (arr.length - 1))\r\n  }\r\n  return arr;\r\n};\r\n\r\n/**\r\n * @class WindyLayer\r\n * todo 重构：改写成基于leaflet的canvas引擎\r\n */\r\nexport default L.Layer.extend({\r\n  /**\r\n   * \r\n   */\r\n  options: {\r\n    showdetails: false,\r\n    dataType: \"wind\",\r\n    pane: \"shadowPane\",\r\n    windyStaticOpts: {\r\n      isTOverlayer: false,\r\n      intensityColorScale: intensityColorScale,\r\n      drawOverlay: true,\r\n      OVERLAY_ALPHA: 130,\r\n      PARTICLE_MULTIPLIER: 6,\r\n      MAX_PARTICLE_AGE: 100\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  initialize(options) {\r\n    L.setOptions(this, options);\r\n    this._windyFactorieOpts = this.options.windyFactorieOpts || {};\r\n    // windyFactorieOpts: {\r\n    //   gradientColors: [[-40, [229, 229, 229]], [-30, [243, 164, 243]], [-20, [140, 15, 140]], [-15, [41, 30, 105]], [-10, [86, 79, 171]], [-5, [65, 119, 190]], [0, [77, 175, 148]], [5, [90, 199, 75]], [10, [182, 217, 63]], [15, [224, 206, 56]], [20, [223, 159, 65]], [25, [219, 108, 84]], [30, [183, 52, 102]], [40, [107, 21, 39]], [50, [43, 0, 1]]]\r\n    // }\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  onAdd(map) {\r\n    this._map = map;\r\n    this._animationCanvas = this._createCanvas();\r\n    this._overlayCanvas = this._createCanvas(\"windy\", this.options.drawOverlay);\r\n    this._overlayCanvas.style.zIndex = \"0\";\r\n    map.on(\"resize\", this._resize, this).on(\"moveend\", this._reset, this);\r\n    map.options.zoomAnimation && L.Browser.any3d && map.on(\"zoomanim\", this._animateZoom, this);\r\n    this.options.showdetails && map.on(\"click\", this._showLocationDetails, this);\r\n    this._updataPostions();\r\n    this._reset();\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  onRemove(map) {\r\n    let { showdetails, zoomAnimation } = map.options;\r\n    let pane = this.getPane();\r\n    //\r\n    map.off(\"resize\", this._resize, this).off(\"moveend\", this._reset, this);\r\n    showdetails && map.off(\"click\", this._showLocationDetails, this);\r\n    zoomAnimation && map.off(\"zoomanim\", this._animateZoom, this);\r\n    this._windy && (this._windy.stop(), this._windy = null);\r\n    pane.removeChild(this._animationCanvas);\r\n    pane.removeChild(this._overlayCanvas);\r\n    this._animationCanvas = null;\r\n    this._overlayCanvas = null;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _createCanvas(className, e) {\r\n    let canvas = T.canvas(\"leaflet-canvas-layer \" + (className || \"\"))\r\n    let size = this._map.getSize();\r\n    canvas.width = size.x;\r\n    canvas.height = size.y;\r\n    var o = this._map.options.zoomAnimation && L.Browser.any3d;\r\n    DomUtil.addClass(canvas, \"leaflet-zoom-\" + (o ? \"animated\" : \"hide\"))\r\n    e !== false && this.getPane().appendChild(canvas)\r\n    return canvas\r\n  },\r\n  /**\r\n   * 缩放时派发事件：更新位置\r\n   */\r\n  _animateZoom: function (e) {\r\n    this._updataPostions(e.center, e.zoom)\r\n  },\r\n  /**\r\n   * 更新位置\r\n   */\r\n  _updataPostions: function (center, zoom) {\r\n    var map = this._map;\r\n    center = center || map.getCenter();\r\n    zoom = zoom || map.getZoom();\r\n    let scale = map.getZoomScale(zoom);\r\n    let position = DomUtil.getPosition(this._overlayCanvas),\r\n      viewHalf = map.getSize().multiplyBy(0.5),\r\n      currentCenterPoint = map.project(map.getCenter(), zoom),\r\n      destCenterPoint = map.project(center, zoom),\r\n      centerOffset = destCenterPoint.subtract(currentCenterPoint),\r\n      topLeftOffset = viewHalf.multiplyBy(-scale).add(position).add(viewHalf).subtract(centerOffset);\r\n    //\r\n    setTransform(this._animationCanvas, topLeftOffset, scale);\r\n    setTransform(this._overlayCanvas, topLeftOffset, scale);\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _resize: function (e) {\r\n    let { newSize } = e;\r\n    let { x, y } = newSize;\r\n    //\r\n    this._animationCanvas.width = x;\r\n    this._animationCanvas.height = y;\r\n    this._overlayCanvas.width = x;\r\n    this._overlayCanvas.height = y;\r\n    this._reset()\r\n\r\n  },\r\n  /**\r\n   * 重置重绘\r\n   */\r\n  _reset: function () {\r\n    this._redraw();\r\n  },\r\n  /**\r\n   * 加载风场\r\n   */\r\n  loadWindy(data) {\r\n    let { _map } = this;\r\n    if (!_map) {\r\n      this.gfs = data;\r\n      return\r\n    }\r\n    //\r\n    let e, o = _map.getBounds();\r\n    let r = _map.getSize();\r\n    let s = _map.getZoom();\r\n    //\r\n    this._windy ? void (e = this.gfs !== data ? this._windy.update(data, [[0, 0], [r.x, r.y]], r.x, r.y, [[o._southWest.lng, o._southWest.lat], [o._northEast.lng, o._northEast.lat]], s) : null) : this._windy = new Windy(T.assign({\r\n      animation: this._animationCanvas,\r\n      overlay: this._overlayCanvas,\r\n      data: data,\r\n      dataType: this.options.dataType,\r\n      factorie: this._windyFactorieOpts,\r\n      drawOverlay: true\r\n    }, this.options.windyStaticOpts));\r\n\r\n    //\r\n    this._windy.start([[0, 0], [r.x, r.y]], r.x, r.y, [[o._southWest.lng, o._southWest.lat], [o._northEast.lng, o._northEast.lat]], s);\r\n    this.gfs = data;\r\n    return;\r\n  },\r\n  /**\r\n   * 清除图层\r\n   */\r\n  clearWindy: function () {\r\n    if (this._windy) {\r\n      this._windy.stop();\r\n      delete this._windy;\r\n      let { x, y } = this.map.getSize();\r\n      this._animationCanvas.getContext(\"2d\").clearRect(0, 0, x, y);\r\n      this._overlayCanvas.getContext(\"2d\").clearRect(0, 0, x, y);\r\n    }\r\n  },\r\n  /**\r\n   * 重绘\r\n   */\r\n  _redraw: function () {\r\n    let { _windy, _map, _animationCanvas, _overlayCanvas } = this;\r\n    if (_windy) {\r\n      let point = _map.containerPointToLayerPoint([0, 0]);\r\n      DomUtil.setPosition(_animationCanvas, point);\r\n      DomUtil.setPosition(_overlayCanvas, point);\r\n      let size = _map.getSize();\r\n      let bounds = _map.getBounds();\r\n      // let zoom = (180 * n.x / (20037508.34 * (a.getEast() - a.getWest())), _map.getZoom());\r\n      let zoom = _map.getZoom()\r\n      this._windy.start([[0, 0], [size.x, size.y]], size.x, size.y, [[bounds._southWest.lng, bounds._southWest.lat], [bounds._northEast.lng, bounds._northEast.lat]], zoom)\r\n    }\r\n  },\r\n  /**\r\n   * 触发事件，显示位置信息\r\n   * @param {*} e \r\n   */\r\n  _showLocationDetails(e) {\r\n    if (this._windy) {\r\n      let details = this.getLocationDetails(e.latlng, e.containerPoint);\r\n      details && this.fire(\"pushdetails\", {\r\n        details: details\r\n      })\r\n    }\r\n  },\r\n  /**\r\n   * 获取位置信息\r\n   * @param {*} t \r\n   * @param {*} i \r\n   */\r\n  getLocationDetails(latlng, point) {\r\n    return this._windy ? this._windy.getLocationDetails(latlng, point) : null\r\n  }\r\n})\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/windy/leaflet-windy.js","/**\r\n * @see https://github.com/liming0711/WARLUS/blob/89874f3fde0bb0653bfa08ff58abaed1bfadd216/src/components/map/src/utils/windy.js\r\n */\r\nimport windyMicro from './windy-micro';\r\nimport observer from './observer';\r\n\r\n\r\n\r\n//\r\nlet { assign: $assign, isNumber, isNumeric, isArray, random } = T;\r\nlet { requestAnimFrame, cancelAnimFrame } = L.Util;\r\n\r\n//\r\n\r\n\r\n// 默认样式\r\nlet MAX_TASK_TIME = 100\r\n  , MIN_SLEEP_TIME = 25\r\n  , OVERLAY_ALPHA = Math.floor(102)\r\n  , INTENSITY_SCALE_STEP = 10\r\n  , MAX_PARTICLE_AGE = 100\r\n  , PARTICLE_LINE_WIDTH = 1\r\n  , PARTICLE_MULTIPLIER = 7\r\n  , PARTICLE_REDUCTION = .75\r\n  , FRAME_RATE = 40\r\n  , _ = [0 / 0, 0 / 0, null]\r\n  , y = [0 / 0, 0 / 0, null]\r\n  , p = [0, 0, 0, 0],\r\n  VELOCITY_SCALE = 1;\r\n\r\n\r\n/**\r\n * \r\n */\r\nexport default class Windy {\r\n  options = {\r\n    dataType: \"wind\",\r\n  }\r\n  /**\r\n   *\r\n   */\r\n  constructor(options) {\r\n    options = this.options = $assign(this.options, options);\r\n    this._intensityColorScale = options.intensityColorScale;\r\n    //\r\n    MAX_TASK_TIME = isNumber(options.MAX_TASK_TIME) ? options.MAX_TASK_TIME : MAX_TASK_TIME; //\r\n    MIN_SLEEP_TIME = isNumber(options.MIN_SLEEP_TIME) ? options.MIN_SLEEP_TIME : MIN_SLEEP_TIME;//在恢复之前等待的最小时间\r\n    OVERLAY_ALPHA = isNumber(options.OVERLAY_ALPHA) ? options.OVERLAY_ALPHA : OVERLAY_ALPHA; //透明度\r\n    INTENSITY_SCALE_STEP = isNumber(options.INTENSITY_SCALE_STEP) ? options.INTENSITY_SCALE_STEP : INTENSITY_SCALE_STEP;//粒子强度色标的步长\r\n    MAX_PARTICLE_AGE = isNumber(options.MAX_PARTICLE_AGE) ? options.MAX_PARTICLE_AGE : MAX_PARTICLE_AGE;//粒子最大运动次数\r\n    PARTICLE_LINE_WIDTH = isNumber(options.PARTICLE_LINE_WIDTH) ? options.PARTICLE_LINE_WIDTH : PARTICLE_LINE_WIDTH;//粒子宽度\r\n    PARTICLE_MULTIPLIER = isNumber(options.PARTICLE_MULTIPLIER) ? options.PARTICLE_MULTIPLIER : PARTICLE_MULTIPLIER;//粒子密度\r\n    PARTICLE_REDUCTION = isNumber(options.PARTICLE_REDUCTION) ? options.PARTICLE_REDUCTION : PARTICLE_REDUCTION;//适配移动端的粒子数量\r\n    FRAME_RATE = isNumber(options.FRAME_RATE) ? options.FRAME_RATE : FRAME_RATE;//重绘帧数\r\n    //\r\n    options.data && this.load(options.data)\r\n  }\r\n  load(data) {\r\n    this.stop();\r\n    let { options } = this;\r\n    let { animation } = this.options;\r\n    if (animation) {\r\n      let { width, height } = animation;\r\n      animation.getContext(\"2d\").clearRect(0, 0, width, height);\r\n      options.overlay.getContext(\"2d\").clearRect(0, 0, width, height)\r\n    }\r\n\r\n    var r = $assign(FACTORIES[this.options.dataType], this.options.factorie);\r\n    r.gradientColors && isArray(r.gradientColors) && (r.scale.gradient = windyMicro.segmentedColorScale(r.gradientColors), delete r.gradientColors);\r\n    //\r\n    this._product = $assign(x(r.builder(data, this.options.isTOverlayer)), r)\r\n\r\n  }\r\n  start(t, i, e, n, s) {\r\n    //\r\n    this._product && (this.stop(),\r\n      this._latlngBounds = {\r\n        south: windyMicro.deg2rad(n[0][1]),\r\n        north: windyMicro.deg2rad(n[1][1]),\r\n        east: windyMicro.deg2rad(n[1][0]),\r\n        west: windyMicro.deg2rad(n[0][0]),\r\n        width: i,\r\n        height: e,\r\n        zoom: s\r\n      },\r\n      this.options.animation.getContext(\"2d\").clearRect(0, 0, i, e),\r\n      this.options.overlay.getContext(\"2d\").clearRect(0, 0, i, e),\r\n      this._id = Date.now() + random(-100, 100),\r\n      observer.on(\"windy:\" + this._id, this._animate, this),\r\n      this._bounds = getBounds(t, i, e),\r\n      this._playing = true,\r\n      E(this))\r\n  }\r\n  _animate(t) {\r\n\r\n    function evolve() {\r\n      buckets.forEach(function (bucket) {\r\n        bucket.length = 0\r\n      });\r\n      particles.forEach(function (particle) {\r\n        if (particle.age > MAX_PARTICLE_AGE) {\r\n          field.randomize(particle).age = 0;\r\n        }\r\n        var i = particle.x;\r\n        var e = particle.y;\r\n        var n = field(i, e);// 当前矢量位置\r\n        var a = n[2];\r\n        if (null === a)\r\n          particle.age = MAX_PARTICLE_AGE;// // 粒子逃脱了格，再也没有回来\r\n        else {\r\n          var o = i + n[0];\r\n          var r = e + n[1];\r\n          if (field.isDefined(o, r)) {\r\n            // Path from (x,y) to (xt,yt) is visible, so add this particle to the appropriate draw bucket.\r\n            particle.xt = o;\r\n            particle.yt = r;\r\n            buckets[colorStyles.indexFor(a)].push(particle);\r\n          } else {\r\n            // 粒子不可见\r\n            particle.x = o;\r\n            particle.y = r;\r\n          }\r\n\r\n        }\r\n        particle.age += 1\r\n      })\r\n    }\r\n    function draw() {\r\n      // 淡出现有的粒子径。\r\n      var prev = ctx.globalCompositeOperation;\r\n      ctx.globalCompositeOperation = \"destination-in\";\r\n      ctx.fillRect(_bounds.x, _bounds.y, _bounds.width, _bounds.height);\r\n      ctx.globalCompositeOperation = prev;\r\n\r\n      ctx.restore();\r\n      // 绘制新的粒子径。\r\n      buckets.forEach(function (particles, i) {\r\n        if (particles.length > 0) {\r\n          ctx.beginPath();\r\n          ctx.strokeStyle = colorStyles[i];//\r\n          particles.forEach(function (particle) {\r\n            ctx.moveTo(particle.x, particle.y),\r\n              ctx.lineTo(particle.xt, particle.yt),\r\n              particle.x = particle.xt,\r\n              particle.y = particle.yt\r\n          });\r\n          ctx.stroke()\r\n        }\r\n\r\n      })\r\n    }\r\n\r\n    this._field = t.field;\r\n    var _bounds = this._bounds\r\n    var bounds = this._latlngBounds\r\n    var field = this._field\r\n    //\r\n    var l = this._product\r\n    //\r\n    var colorStyles = (this._intensityColorScale || windyMicro.windIntensityColorScale)(INTENSITY_SCALE_STEP, l.particles.maxIntensity)\r\n    //\r\n    var buckets = colorStyles.map(function () {\r\n      return []\r\n    })\r\n\r\n    var particleCount = Math.round(bounds.width * PARTICLE_MULTIPLIER * (1 / Math.pow(1.6, bounds.zoom - 2)));\r\n\r\n    T.isMobile() && (particleCount *= PARTICLE_REDUCTION);\r\n    for (var fadeFillStyle = windyMicro.isFF() ? \"rgba(0, 0, 0, 0.95)\" : \"rgba(0, 0, 0, 0.97)\", particles = [], w = 0; particleCount > w; w++)\r\n      particles.push(field.randomize({\r\n        age: random(0, MAX_PARTICLE_AGE)\r\n      }));\r\n\r\n    if (this.options.drawOverlay) {\r\n      let canvas = this.options.overlay;\r\n      let ctx = canvas.getContext(\"2d\");\r\n      ctx.putImageData(field.overlay, 0, 0);//渲染静态风场图\r\n      // if (createImageHandler.canvas) {\r\n      //   let tmepCanvas = createImageHandler.canvas;\r\n      //   let tempCtx = tmepCanvas.getContext(\"2d\");\r\n      //   tempCtx.putImageData(field.overlay, 0, 0);\r\n      //   //\r\n      //   // ctx.drawImage(tmepCanvas, 0, 0);\r\n      //   //\r\n      //   tmepCanvas.style.zIndex = \"0\"\r\n      //   tmepCanvas.style.transform = canvas.style.transform;\r\n      //   tmepCanvas.className = canvas.className;\r\n      //   //\r\n      //   let { parentNode } = canvas;\r\n      //   parentNode.removeChild(canvas);\r\n      //   parentNode.appendChild(tmepCanvas);\r\n      //   this.options.overlay = tmepCanvas;\r\n      // } else {\r\n      //   ctx.putImageData(field.overlay, 0, 0);//渲染静态风场图\r\n      // }\r\n    }\r\n    var ctx = this.options.animation.getContext(\"2d\");\r\n    ctx.lineWidth = PARTICLE_LINE_WIDTH;\r\n    ctx.fillStyle = fadeFillStyle;\r\n    let C, b = Date.now();\r\n    let that = this;\r\n    !function E() {\r\n      that.animationLoop = requestAnimFrame(E);\r\n      var t = Date.now();\r\n      C = t - b,\r\n        C > FRAME_RATE && (b = t - C % FRAME_RATE,\r\n          evolve(),\r\n          draw())\r\n    }()\r\n  }\r\n  updateOverlayAlpha(t) {\r\n    OVERLAY_ALPHA = t,\r\n      this._field && (this._field.release(),\r\n        delete this._field),\r\n      this.animationLoop && (cancelAnimFrame(this.animationLoop),\r\n        delete this.animationLoop);\r\n    var i = this._latlngBounds.width\r\n      , e = this._latlngBounds.height;\r\n    this.options.animation.getContext(\"2d\").clearRect(0, 0, i, e),\r\n      this.options.overlay.getContext(\"2d\").clearRect(0, 0, i, e),\r\n      E(this)\r\n  }\r\n  update(t, i, e, n, a, o) {\r\n    this.options.data = t,\r\n      this.load(t),\r\n      this.start(i, e, n, a, o)\r\n  }\r\n  stop() {\r\n    this._playing = false,\r\n      this._field && (this._field.release(), delete this._field),\r\n      this.animationLoop && (cancelAnimFrame(this.animationLoop), this.animationLoop),\r\n      delete this._latlngBounds,\r\n      delete this._bounds,\r\n      this._offObserver()\r\n  }\r\n  dispose() {\r\n    this.stop(),\r\n      delete this._product\r\n  }\r\n  _offObserver() {\r\n    this._id && (observer.off(\"windy:\" + this._id),\r\n      delete this._id)\r\n  }\r\n  getLocationDetails(t, i) {\r\n    if (!(t && this._product && this._field && this._field.isUVDefined(i.x, i.y)))\r\n      return null;\r\n    var e = this._product.interpolate(t.lng, t.lat)\r\n      , n = e[2];\r\n    return windyMicro.isValue(e) && n < this._product.maxlimitValue ? {\r\n      animationVal: windyMicro.formatVector([e[0], e[1], n], this._product.unit),\r\n      overlayVal: this._field.isTOverlayer ? e[3] : n\r\n    } : null\r\n  }\r\n}\r\n\r\nlet w = function (t, i, e, n, a, o) {\r\n  var r = 1 - t\r\n    , s = 1 - i\r\n    , l = r * s\r\n    , h = t * s\r\n    , d = r * i\r\n    , u = t * i\r\n    , c = e[0] * l + n[0] * h + a[0] * d + o[0] * u\r\n    , f = e[1] * l + n[1] * h + a[1] * d + o[1] * u;\r\n  return [c, f, Math.sqrt(c * c + f * f)]\r\n}\r\n\r\nlet M = function (t, i, e, n, a, o) {\r\n  var r = 1 - t\r\n    , s = 1 - i\r\n    , l = r * s\r\n    , h = t * s\r\n    , d = r * i\r\n    , u = t * i\r\n    , c = e[0] * l + n[0] * h + a[0] * d + o[0] * u\r\n    , f = e[1] * l + n[1] * h + a[1] * d + o[1] * u\r\n    , m = e[2] * l + n[2] * h + a[2] * d + o[2] * u;\r\n  return [c, f, Math.sqrt(c * c + f * f), m]\r\n}\r\nlet x = function (t) {\r\n  function i(i, e) {\r\n    var l, h = windyMicro.floorMod(i - n, 360) / r, d = (o - e) / s, c = Math.floor(h), f = c + 1, m = Math.floor(d), v = m + 1;\r\n    if (l = u[m]) {\r\n      var _ = l[c]\r\n        , y = l[f];\r\n      if (windyMicro.isValue(_) && windyMicro.isValue(y) && (l = u[v])) {\r\n        var p = l[c]\r\n          , g = l[f];\r\n        if (windyMicro.isValue(p) && windyMicro.isValue(g))\r\n          return t.interpolate(h - c, d - m, _, y, p, g)\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  var e = t.header\r\n    , n = e.lo1\r\n    , o = e.la1\r\n    , r = e.dx\r\n    , s = e.dy\r\n    , l = e.nx\r\n    , h = e.ny\r\n    , d = new Date(e.refTime);\r\n  d.setHours(d.getHours() + e.forecastTime);\r\n  for (var u = [], c = 0, f = Math.floor(l * r) >= 360, m = 0; h > m; m++) {\r\n    for (var v = [], _ = 0; l > _; _++ ,\r\n      c++)\r\n      v[_] = t.data(c);\r\n    f && v.push(v[0]),\r\n      u[m] = v\r\n  }\r\n  return {\r\n    date: d,\r\n    interpolate: i,\r\n    forEachPoint: function (t) {\r\n      for (var i = 0; h > i; i++)\r\n        for (var e = u[i] || [], d = 0; l > d; d++)\r\n          t(windyMicro.floorMod(180 + n + d * r, 360) - 180, o - i * s, e[d])\r\n    }\r\n  }\r\n}\r\n  , C = function (t, i) {\r\n    return isNumeric(t) || 1 / 0 === t || t === -1 / 0 ? t : i\r\n  }\r\n\r\n\r\nlet getBounds = function (t, i, e) {\r\n  var n = t[0]\r\n    , a = t[1]\r\n    , o = Math.max(Math.floor(C(n[0], 0)), 0)\r\n    , r = Math.max(Math.floor(C(n[1], 0)), 0)\r\n    , s = Math.min(Math.ceil(a[0], i), i - 1)\r\n    , l = Math.min(Math.ceil(a[1], e), e - 1);\r\n  return {\r\n    x: o,\r\n    y: r,\r\n    xMax: s,\r\n    yMax: l,\r\n    width: s - o + 1,\r\n    height: l - r + 1\r\n  }\r\n}\r\n/**\r\n * \r\n * @param {*} bounds \r\n */\r\nlet createImageHandler = bounds => {\r\n  let { width, height } = bounds;\r\n  let canvas = createImageHandler.canvas = T.canvas();\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  let ctx = canvas.getContext(\"2d\");\r\n  let imageData = ctx.createImageData(width, height)\r\n  let data = imageData.data;//获取每一个像素\r\n  //\r\n  return {\r\n    imageData: imageData,\r\n    set(x, y, rgba) {\r\n      var a = 4 * (y * width + x);\r\n      return data[a] = rgba[0],\r\n        data[a + 1] = rgba[1],\r\n        data[a + 2] = rgba[2],\r\n        data[a + 3] = rgba[3],\r\n        this\r\n    }\r\n  }\r\n}\r\n\r\n\r\nlet E = function (t) {\r\n  function i(t) {\r\n    for (var i = [], e = n.y; e <= n.yMax; e += 2) {\r\n      var o = windyMicro.invert(t, e, d)\r\n        , r = p\r\n        , s = null;\r\n      if (o) {\r\n        var l = o[0]\r\n          , f = o[1];\r\n        if (isFinite(l)) {\r\n          s = w(l, f);\r\n          var g = null;\r\n          s && (g = isTOverlayer && s.length > 3 ? s[3] : s[2],\r\n            s = windyMicro.distort(l, f, t, e, m, s, d)),\r\n            windyMicro.isValue(g) && (r = !u || u >= g ? M.gradient(g, OVERLAY_ALPHA) : c || r)\r\n        }\r\n      }\r\n      i[e + 1] = i[e] = s || y,\r\n        imageHandler.set(t, e, r).set(t + 1, e, r).set(t, e + 1, r).set(t + 1, e + 1, r)\r\n    }\r\n    _[t + 1] = _[t] = i\r\n  }\r\n  var e = t._product\r\n    , n = t._bounds\r\n    , d = t._latlngBounds\r\n    , u = t._product.maxlimitValue\r\n    , c = t._product.maxlimitValueColor\r\n    , f = t._id;\r\n  if (!e)\r\n    return null;\r\n  var m = isNumber(e.particles.velocityScale) ? n.height * e.particles.velocityScale : e.particles.velocityScale({\r\n    height: n.height,\r\n    width: n.width,\r\n    zoom: d.zoom\r\n  });\r\n  let imageHandler = createImageHandler(n);\r\n  let _ = [];\r\n  let g = n.x\r\n  let w = e.interpolate;\r\n  let M = e.scale;\r\n  let isTOverlayer = t.options.isTOverlayer;\r\n  !function C() {\r\n    try {\r\n      if (t._playing) {\r\n        for (var e = Date.now(); g < n.xMax;)\r\n          if (i(g),\r\n            g += 2,\r\n            Date.now() - e > MAX_TASK_TIME)\r\n            return void setTimeout(C, MIN_SLEEP_TIME);\r\n        observer.trigger(\"windy:\" + f, {\r\n          field: A(_, n, imageHandler, t.options.isTOverlayer)\r\n        })\r\n      }\r\n    } catch (a) {\r\n      console.warn(a)\r\n    }\r\n  }()\r\n}\r\n\r\nlet A = function (t, i, imageHandler, n) {\r\n  function a(i, e) {\r\n    var n = t[Math.round(i)];\r\n    return n && n[Math.round(e)] || _\r\n  }\r\n  return a.isDefined = function (t, i) {\r\n    return null !== a(t, i)[2]\r\n  },//判断是否在边界内\r\n    a.isInsideBoundary = function (t, i) {\r\n      return a(t, i) !== _\r\n    }\r\n    ,\r\n    a.release = function () {\r\n      t = []\r\n    }\r\n    ,\r\n    a.randomize = function (t) {\r\n\r\n      var e, n, r = 0;\r\n      do\r\n        e = Math.round(random(i.x, i.xMax)),\r\n          n = Math.round(random(i.y, i.yMax));\r\n      while (!a.isDefined(e, n) && r++ < 30); return t.x = e,\r\n        t.y = n,\r\n        t\r\n    }\r\n    ,\r\n    a.overlay = imageHandler.imageData,\r\n    a.isTOverlayer = n,\r\n    a.isUVDefined = function (t, i) {\r\n      if (a.isTOverlayer) {\r\n        var e = a(t, i);\r\n        return null !== Math.sqrt(e[0] * e[0] + e[1] * e[1])\r\n      }\r\n      return null !== a(t, i)[2]\r\n    }\r\n    ,\r\n    a\r\n}\r\n\r\n\r\nlet FACTORIES = {\r\n  wind: {\r\n    field: \"vector\",\r\n    type: \"wind\",\r\n    builder: function (t, i) {\r\n      var e = t[0].data, n = t[1].data;\r\n      var a = 3 === t.length ? t[2].data : null;\r\n      return {\r\n        header: t[0].header,\r\n        interpolate: i && a ? M : w,\r\n        data(t) {\r\n          var i = a ? a[t] : null;\r\n          return [e[t], n[t], i]\r\n        }\r\n      }\r\n    },\r\n    unit: {\r\n      label: \"km/h\",\r\n      conversion: t => 3.6 * t,\r\n      precision: 0\r\n    },\r\n    scale: {\r\n      bounds: [0, 100],\r\n      gradient: function (t, i) {\r\n        return windyMicro.extendedSinebowColor(Math.min(t, 100) / 100, i)\r\n      }\r\n    },\r\n    particles: {\r\n      velocityScale: function (t) {\r\n        return t.height / (4e4 * Math.pow(1.6, t.zoom - 3)) * VELOCITY_SCALE\r\n      },\r\n      maxIntensity: 17\r\n    }\r\n  },\r\n  currents: {\r\n    field: \"vector\",\r\n    type: \"currents\",\r\n    builder: function (t, i) {\r\n      var e = t[0].data\r\n        , n = t[1].data\r\n        , o = 3 === t.length ? t[2].data : null;\r\n      return {\r\n        header: t[0].header,\r\n        interpolate: i && o ? M : w,\r\n        data: function (t) {\r\n          var i = e[t]\r\n            , r = n[t]\r\n            , s = o ? o[t] : null;\r\n          return windyMicro.isValue(i) && windyMicro.isValue(r) ? [i, r, s] : null\r\n        }\r\n      }\r\n    },\r\n    unit: {\r\n      label: \"m/s\",\r\n      conversion: function (t) {\r\n        return t\r\n      },\r\n      precision: 2\r\n    },\r\n    scale: {\r\n      bounds: [0, 1.5],\r\n      gradient: windyMicro.segmentedColorScale([[0, [10, 25, 68]], [.15, [10, 25, 250]], [.4, [24, 255, 93]], [.65, [255, 233, 102]], [1, [255, 233, 15]], [1.5, [255, 15, 15]]])\r\n    },\r\n    maxlimitValue: 20,\r\n    particles: {\r\n      velocityScale: 1 / 4400,\r\n      maxIntensity: .7\r\n    }\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/windy/windy.js","function n(t, i) {\r\n  var e = t[0]\r\n    , n = t[1]\r\n    , a = t[2]\r\n    , o = i[0] - e\r\n    , r = i[1] - n\r\n    , s = i[2] - a;\r\n  return function (t, i) {\r\n    return [Math.floor(e + t * o), Math.floor(n + t * r), Math.floor(a + t * s), i]\r\n  }\r\n}\r\nfunction sinebowColor(t, i) {\r\n  var e = t * u * 5 / 6;\r\n  e *= .75;\r\n  var n = Math.sin(e)\r\n    , a = Math.cos(e)\r\n    , o = Math.floor(255 * Math.max(0, -a))\r\n    , r = Math.floor(255 * Math.max(n, 0))\r\n    , s = Math.floor(255 * Math.max(a, 0, -n));\r\n  return [o, r, s, i]\r\n}\r\nfunction o(t, i) {\r\n  return c >= t ? sinebowColor(t / c, i) : f((t - c) / (1 - c), i)\r\n}\r\nfunction r(t, i, e, n) {\r\n  return \"rgba(\" + t + \", \" + i + \", \" + e + \", \" + n + \")\"\r\n}\r\nfunction s(t, i) {\r\n  for (var e = [], n = 85; 255 >= n; n += t)\r\n    e.push(r(n, n, n, 1));\r\n  return e.indexFor = function (t) {\r\n    return Math.floor(Math.min(t, i) / i * (e.length - 1))\r\n  }, e\r\n}\r\nfunction l(t) {\r\n  for (var i = [], e = [], a = [], o = 0; o < t.length - 1; o++)\r\n    i.push(t[o + 1][0]),\r\n      e.push(n(t[o][1], t[o + 1][1])),\r\n      a.push([t[o][0], t[o + 1][0]]);\r\n  return function (t, n) {\r\n    var o;\r\n    for (o = 0; o < i.length - 1 && !(t <= i[o]); o++);\r\n    var r = a[o];\r\n    return e[o](d(t, r[0], r[1]), n)\r\n  }\r\n}\r\nfunction h(t, i, e) {\r\n  return Math.max(i, Math.min(t, e))\r\n}\r\nfunction d(t, i, e) {\r\n  return (h(t, i, e) - i) / (e - i)\r\n}\r\nvar u = 2 * Math.PI\r\n  , c = .45\r\n  , f = n(sinebowColor(1, 0), [255, 255, 255])\r\n  , m = function (t, i) {\r\n    var e = t - i * Math.floor(t / i);\r\n    return e === i ? 0 : e\r\n  }\r\n  , v = function (t) {\r\n    return null !== t && void 0 !== t\r\n  }\r\n  , isFF = function () {\r\n    return /firefox/i.test(navigator.userAgent)\r\n  }\r\n  , p = function (t, i, e) {\r\n    var n = e.east - e.west\r\n      , a = e.width / w(n) * 360 / (2 * Math.PI)\r\n      , o = a / 2 * Math.log((1 + Math.sin(e.south)) / (1 - Math.sin(e.south)))\r\n      , r = e.height + o\r\n      , s = (r - i) / a\r\n      , l = 180 / Math.PI * (2 * Math.atan(Math.exp(s)) - Math.PI / 2)\r\n      , h = w(e.west) + t / e.width * w(n);\r\n    return [h, l]\r\n  }\r\n  , g = function (t) {\r\n    return t / 180 * Math.PI\r\n  }\r\n  , w = function (t) {\r\n    return t / (Math.PI / 180)\r\n  }\r\n  , M = function (t) {\r\n    return Math.log(Math.tan(t / 2 + Math.PI / 4))\r\n  }\r\n  , x = function (t, i, e) {\r\n    var n = M(e.south)\r\n      , a = M(e.north)\r\n      , o = e.width / (e.east - e.west)\r\n      , r = e.height / (a - n)\r\n      , s = M(g(t))\r\n      , l = (g(i) - e.west) * o;\r\n    return s = (a - s) * r,\r\n      [l, s]\r\n  }\r\n  , C = function (t, i, e, n, a, o, r) {\r\n    var s = o[0] * a\r\n      , l = o[1] * a\r\n      , h = T(t, i, e, n, r);\r\n    return o[0] = h[0] * s + h[2] * l,\r\n      o[1] = h[1] * s + h[3] * l,\r\n      o\r\n  }\r\n  , T = function (t, i, e, n, a) {\r\n    var o = Math.pow(10, -5.2)\r\n      , r = 0 > t ? o : -o\r\n      , s = 0 > i ? o : -o\r\n      , l = x(i, t + r, a)\r\n      , h = x(i + s, t, a)\r\n      , d = Math.cos(i / 360 * u);\r\n    return [(l[0] - e) / r / d, (l[1] - n) / r / d, (h[0] - e) / s, (h[1] - n) / s]\r\n  }\r\n  , b = function (t, i) {\r\n    return i.conversion(t).toFixed(i.precision)\r\n  }\r\n  , E = function (t, i) {\r\n    return b(t[2], i) + i.label\r\n  };\r\n\r\n\r\nexport default {\r\n  isFF: isFF,\r\n  isValue: v,\r\n  floorMod: m,\r\n  deg2rad: g,\r\n  rad2deg: w,\r\n  mercY: M,\r\n  project: x,\r\n  invert: p,\r\n  distort: C,\r\n  distortion: T,\r\n  sinebowColor: sinebowColor,\r\n  extendedSinebowColor: o,\r\n  windIntensityColorScale: s,\r\n  segmentedColorScale: l,\r\n  formatVector: E\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/windy/windy-micro.js","/**\r\n * \r\n */\r\nlet { isString: e, isFunction: o, isArray: a, isRegExp: c } = T;\r\n/**\r\n * \r\n * @param {*} t \r\n * @param {*} r \r\n * @param {*} n \r\n */\r\nfunction i(t, r, n) {\r\n  n ? v[t] = r[t] : delete v[t]\r\n}\r\nfunction l(t, r, n) {\r\n  if (!(t || e(t) || c(t) || a(t)))\r\n    throw \"输入的参数必须是字符串或字符串数组\";\r\n  a(t) || (t = [t]);\r\n  var o = [];\r\n  for (var l in n)\r\n    o.push(l);\r\n  for (var f = 0, u = t.length; u > f; f++) {\r\n    var s = t[f];\r\n    if (!e(s) && !c(s))\r\n      throw \"输入的参数的数组元素必须是字符串或正则表达式\";\r\n    if (c(s))\r\n      for (var g = 0, v = o.length; v > g; g++) {\r\n        var h = o[g];\r\n        s.test(h) && i(h, n, r)\r\n      }\r\n    else\r\n      s in n && i(s, n, r)\r\n  }\r\n}\r\nfunction f(t, r, n, e) {\r\n  for (var o = t.slice(0), a = 0, c = o.length; c > a; a++) {\r\n    var i = o[a];\r\n    i.callback.apply(i.context || r, n),\r\n      e && s.log(i.stack)\r\n  }\r\n}\r\nfunction u() {\r\n  var t = new Error;\r\n  if (t.stack) {\r\n    var r = 3\r\n      , e = t.stack.split(\"\\n\");\r\n    \"    at Error (<anonymous>)\" === e[1] && r++;\r\n    var o = arguments.callee.caller.caller;\r\n    (o === n.exports.once || o === n.exports.past) && r++;\r\n    var a = e[r];\r\n    return a\r\n  }\r\n}\r\nvar s, g = {}, v = {};\r\nif (window.console)\r\n  s = window.console;\r\nelse {\r\n  var h = function () { };\r\n  s = {\r\n    log: h,\r\n    warn: h,\r\n    error: h\r\n  }\r\n}\r\n\r\nexport default {\r\n  on(t, r, n) {\r\n    if (!e(t) || !o(r))\r\n      throw \"必须传入正确的name和callback参数\";\r\n    var a = g[t] || (g[t] = [])\r\n      , c = {\r\n        callback: r,\r\n        context: n || this\r\n      };\r\n\r\n    return a.push(c),\r\n      this\r\n  },\r\n  once(t, r, n) {\r\n    if (!e(t) || !o(r))\r\n      throw \"必须传入正确的name和callback参数\";\r\n    var a = this, c = function () {\r\n      a.off(t, c),\r\n        r.apply(n || a, arguments)\r\n    };\r\n    return c.callback = r,\r\n      this.on(t, c),\r\n      this\r\n  },\r\n  off(t, r, n) {\r\n    if (!(t || r || n))\r\n      throw \"必须传入name, callback, context等参数\";\r\n    if (!t || !e(t))\r\n      throw \"必须传入正确的name参数\";\r\n    if (r && !o(r))\r\n      throw \"必须传入正确的callback参数\";\r\n    var a = g[t];\r\n    if (!a)\r\n      return this;\r\n    if (!r && !n)\r\n      return delete g[t],\r\n        this;\r\n    for (var c = a.length - 1; c >= 0; c--) {\r\n      var i = a[c];\r\n      (i.callback === r || i.callback.callback === r) && (n && i.context !== n || a.splice(c, 1))\r\n    }\r\n    return this\r\n  },\r\n  offAll() {\r\n    return g = {},\r\n      this\r\n  },\r\n  past(t, r, n) {\r\n    if (!e(t) || !o(r))\r\n      throw \"必须传入正确的name和callback参数\";\r\n    return v[t] && r.apply(n || this, v[t]),\r\n      this.on(t, r, n),\r\n      this\r\n  },\r\n  trigger(t) {\r\n    if (!e(t))\r\n      throw \"必须传入正确的name参数\";\r\n    for (var r = [], n = 1, o = arguments.length; o > n; n++)\r\n      r.push(arguments[n]);\r\n    v[t] = r;\r\n    var a;\r\n\r\n    var l = g[t];\r\n    l && f(l, this, r, a);\r\n    var h = g.all;\r\n    return a && h && s.log(\"on all\"),\r\n      h && f(h, this, r, a),\r\n      a && (s.log(\"--------------- trigger: [\" + t + \"] end -----------------\"),\r\n        s.log(\"\"),\r\n        s.log(\"\")),\r\n      this\r\n  },\r\n  clearAll() {\r\n    v = {}\r\n  },\r\n  clear(t) {\r\n    var r = v;\r\n    l(t, !1, r)\r\n  },\r\n  clearOther(t) {\r\n    var r = v;\r\n    v = {},\r\n      l(t, !0, r)\r\n  },\r\n  _getLastArgs() {\r\n    return v\r\n  },\r\n  _getSubscribers() {\r\n    return g\r\n  }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/windy/observer.js"],"sourceRoot":""}