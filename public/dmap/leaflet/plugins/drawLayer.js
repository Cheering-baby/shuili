/*! version:1.4.13 */
define(function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./dist/dmap/leaflet/",e(e.s=165)}({11:function(t,e,n){"use strict";var o=L,i=o.Layer,r=o.Popup,a=o.DomEvent,s=T,u=s.div;e.a=L.Popup2=r.extend({options:{maxWidth:0,minWidth:0,autoPan:!1,autoPosition:!0,closeButton:!1,autoClose:!1},_initLayout:function(){var t=this,e=this,n=e.options,o=e.branch,i=n.leaf;if(i&&!o){var s=n.className,h=e._container=u("leaflet-popup "+(s||"")+" leaflet-zoom-animated");e._contentNode=u("",h);a.disableScrollPropagation(h),a.disableClickPropagation(h),i.el=u(),i.props=T.assign({},i.props,{owner:e,marker:e._source,data:e._source&&e._source.__data}),this.branch=T.render(i).then(function(e){var o=e.$el;if(n.maxWidth){var i=h.style;i.width=o.clientWidth+"px",i.height=o.clientHeight+"px"}return t.setContent(o),e})}else r.prototype._initLayout.call(e)},_getAnchor:function(){var t=r.prototype._getAnchor.call(this),e=this._map,n=this._contentNode,o=this._source,i=this.options,a=n.firstChild;if(i.autoPosition&&i.leaf&&a&&o&&o._latlng){var s=a.style;s.left=s.top="0px";var u=a.clientHeight+20,h=e.latLngToContainerPoint(o._latlng),c=h.x,l=h.y,p=e.getSize(),f=16,d=0;if(n.clientHeight?l-u<0&&(d=u,l+d>p.y&&(d-=l+d-p.y)):l+u>p.y&&(d=-u,l+d<0&&(d-=l+d)),c+a.clientWidth>p.x&&(f=-a.clientWidth-f),f||d){var m=t;t=[f+m.x,d+m.y]}}return t}}),i.include({bindPopup:function(t,e){if(t instanceof r?(L.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new r(e,this)),this._popup.setContent(t)),!this._popupHandlersAdded){var n={click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup};e&&e.hover&&(n.mouseover=this._openPopup),this.on(n),this._popupHandlersAdded=!0}return this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this}})},12:function(t,e,n){"use strict";var o={};e.a=function(t){return o[t]=o[t]||function(){var e=[],n=new Image,i=!1,r=o[t]={then:function(t){i?t(n):e.push(t)}};return n.src=t,n.onload=function(){for(i=!0;e.length>0;)e.shift()(n)},r}()}},165:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(50),s=n(51),u=n(166),h=n(167),c=n(168),l=n(169),p=n(52),f=n(53),d=n(171),m=n(172),y=n(173),g=n(2),v=n(29),_=n(174),w=n(175),b=(n.n(w),n(176)),x=(n.n(b),T),M=x.isArray,P=L,O=P.Marker,k=P.Polyline,E=P.Polygon,C=P.Circle,j=P.CircleMarker,A=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.history=[],r.next=[],a=n,i(r,a)}return r(e,t),e.prototype.addTo=function(e){return e.on("draw-end",this.onDrawEnd.bind(this)),t.prototype.addTo.call(this,e)},e.prototype.add=function(e,n,o){n.tooltip&&(n.tooltip.draggable=!0),t.prototype.add.call(this,e,n,o),this._check(e)},e.prototype._check=function(t){t&&(t.editEnable(),t.dragging?t.dragging.enable():(t.makeDraggable(),t.dragging.enable()))},e.prototype.change=function(t){var e=this;if(t){T.data.pan=!1;var n=e.dmap,o=e.history,i=e.next;switch(t.tool){case"pan":e.reset(),n.cursor="-webkit-grab",T.data.pan=!0;break;case"clear":e.clear();case"pointer":e.reset(),n.cursor="default";break;case"go":var r=i[i.length-1];r&&r.restore()&&i.pop(),!o.includes(r)&&o.push(r),e.reset();break;case"back":var a=o[o.length-1];a&&a.reback()&&o.pop(),!i.includes(a)&&i.push(a),e.reset();break;default:e.start(t)}n.do("tool-change",{target:e,options:t})}return e},e.prototype.start=function(t){var e=this,n=e.map,o=t.tool;e.cancel(),n.dragging.disable();var i=e.get(o),r=new i(e,t);r.setOptions(t),r.options.feature.interactive=!1,r.start(),e.tool=r},e.prototype.get=function(t){switch(t){case"point":return a.a;case"distance":return u.b;case"distancePolygon":return u.a;case"polyline":return s.a;case"pen":return h.a;case"circle":return f.a;case"ellipse":return d.a;case"rect":return l.a;case"polygon":return p.a;case"penfill":return c.a;case"militaryArrow":return m.a;case"text":return y.a}},e.prototype.cancel=function(){this.tool&&this.tool.cancel(),this.tool=null},e.prototype.reset=function(){this.cancel(),this.map.dragging.enable()},e.prototype.onDrawEnd=function(t){var e=this;this.next.length=0;var n=this.tool;if(n&&n.marker){!this.history.includes(n)&&this.history.push(n);var o=n,i=o.options,r=o.marker;r.__data=n.data,"distance"===n.options.tool||"distancePolygon"===n.options.tool||i.reable||setTimeout(function(){r.setStyle({interactive:!0,draggable:!0}),e._check(r),r instanceof L.Text==!1&&e._bindText(r,n.options)},100),i.searchable&&this.dmap.do("search-end",{target:this,event:t,value:this.search(t)}),i.onDrawEnd&&i.onDrawEnd(t),i.multi?(n.cancel(),n=this.tool=n.clone(),n.start()):i.reable?(n.cancel(),this.tool=n,n.start()):this.reset()}else this.reset()},e.prototype.search=function(t){var e=t.marker,n=[];if(!e)throw"search error";var o=e._map,i=o.latLngToLayerPoint.bind(o);if(e instanceof C){var r=e._radius,a=e.getLatLng();o.eachLayer(function(t){if(t instanceof O||t instanceof g.a)i(t.getLatLng()).distanceTo(i(a))<r&&n.push(t);else if(t instanceof k||t instanceof E){var e=t.getLatLngs();M(e[0])&&(e=e[0]);for(var o=0,s=e.length;o<s;o++)if(i(e[o]).distanceTo(i(a))<r){n.push(t);break}}})}else if(e instanceof E){var s=e._rings;o.eachLayer(function(t){if(t instanceof O||t instanceof j)Object(_.a)(i(t.getLatLng()),s[0])&&n.push(t);else if(t instanceof k||t instanceof E){var e=t.getLatLngs();M(e[0])&&(e=e[0]);for(var o=0,r=e.length;o<r;o++)if(Object(_.a)(i(e[o]),s[0])){n.push(t);break}}})}return n},e}(v.a);e.default=A},166:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"b",function(){return u}),n.d(e,"a",function(){return h});var a=n(51),s=n(52),u=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red",weight:2,showMeasurements:!0}},a=n,i(r,a)}return r(e,t),e.prototype.onMouseMove=function(e){t.prototype.onMouseMove.call(this,e),this.marker.updateMeasurements()},e}(a.a),h=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red",fillOpacity:.5,weight:1,showMeasurements:!0}},a=n,i(r,a)}return r(e,t),e.prototype.onMouseMove=function(e){t.prototype.onMouseMove.call(this,e),this.marker.updateMeasurements()},e}(s.a)},167:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=L,u=s.Polyline,h=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red"}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.map.once("mousedown",this.onMouseDown,this),this.restart=!0},e.prototype.cancel=function(){this.map.off("mousedown",this.onMouseDown,this),this.map.off("mousemove",this.onMouseMove,this)},e.prototype.onMouseDown=function(t){this.reset();var e=this.marker,n=this.options,o=this.map,i=this.layer,r=t.latlng;e||(e=this.marker=new u([r],n.feature).addTo(i),o.once("mouseup",this.onEnd,this),o.on("mousemove",this.onMouseMove,this))},e.prototype.onMouseMove=function(t){this.marker.addLatLng(t.latlng)},e}(a.a);e.a=h},168:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red",fillOpacity:.5,weight:1}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.initMouseDownHandler(),this.map.on("mousedown",this.onMouseDown,this),this.restart=!0},e.prototype.cancel=function(){var t=this.map;t.off("mousedown",this.onMouseDown,this),t.off("mousemove",this.onMouseMove,this)},e.prototype._onMouseDown=function(t){this.reset();var e=this.marker,n=this.options,o=this.map,i=this.layer,r=t.latlng;e||(e=this.marker=L.rectangle(L.latLngBounds(r,r),n.feature).addTo(i),o.on("mousemove",this.onMouseMove,this),o.once("mouseup",this.onEnd,this))},e.prototype.onMouseMove=function(t){this.marker.addLatLng(t.latlng)},e}(a.a);e.a=s},169:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=L,u=s.Rectangle,h=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red",fillOpacity:.5,weight:1}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.initMouseDownHandler(),this.map.once("mousedown",this.onMouseDown,this)},e.prototype.cancel=function(){var t=this.map;t.off("mousedown",this.onMouseDown,this),t.off("mousemove",this.onMouseMove,this),this.sp=null},e.prototype._onMouseDown=function(t){var e=this.map,n=this.layer,o=this.options,i=t.latlng;this.clear(),this.marker=new u(L.latLngBounds(i,i),o.feature).addTo(n),this.sp=i,e.on("mousemove",this.onMouseMove,this),e.once("mouseup",this.onEnd,this)},e.prototype.onMouseMove=function(t){var e=this.marker,n=t.latlng;e.setBounds(L.latLngBounds(this.sp,n)),e.redraw()},e}(a.a);e.a=h},170:function(t,e,n){"use strict";var o=L,i=o.Circle;i.include({toGeoJSON:function(){var t=this.getLatLng(),e=t.lat,n=t.lng;return this.options.radius=this._mRadius,{type:"Feature",properties:{},geometry:{coordinates:[n,e],type:"Circle"}}}}),e.a=i.extend({_updateBounds:function(){this._radius=this._radiusY,i.prototype._updateBounds.call(this)}})},171:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(53),s=n(20),u=function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._onMouseDown=function(t){var e=this.options,n=this.map,o=this.layer,i=t.latlng;this.clear(),this.marker=new s.a(i,0,e.feature).addTo(o),n.on("mousemove",this.onMouseMove,this),n.once("mouseup",this.onEnd,this)},e.prototype.onMouseMove=function(t){var e=this.marker,n=t.latlng,o=e.getLatLng(),i=n.clone(),r=n.clone();i.lat=o.lat,r.lng=o.lng;var a=i.distanceTo(o),s=r.distanceTo(o);e.setRadius(a),e.setRadiusY(s),e.redraw()},e}(a.a);e.a=u},172:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=n(21),u=L,h=(u.LatLng,function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{fillColor:"red",weight:1,fillOpacity:.5,color:"#333"}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.initMouseDownHandler(),this.map.on("mousedown",this.onMouseDown,this),this.restart=!0},e.prototype.cancel=function(){var t=this.map;t.off("mousedown",this.onMouseDown,this),t.off("mousemove",this.onMouseMove,this),this.mp=null},e.prototype._onMouseDown=function(t){this.reset();var e=this.marker,n=this.map,o=this.layer,i=this.options,r=i.feature,a=t.latlng;e?this.mp=null:(r.draggable=!1,e=this.marker=new s.a([a],r).addTo(o),n.on("mousemove",this.onMouseMove,this),n.once("dblclick",this.onEnd,this)),this.lp=t.layerPoint},e.prototype.onMouseMove=function(t){var e=this.marker,n=this.mp,o=t.latlng;t.layerPoint,e.getLatLngs();if(n)n.lat=o.lat,n.lng=o.lng,e.redraw();else{this.lp;e.addLatLng(o),this.mp=o}},e}(a.a));e.a=h},173:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(50),s=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{}},a=n,i(r,a)}return r(e,t),e.prototype._onMouseDown=function(t){var e=t.latlng,n=this.options,o=this.layer;this.marker=L.text(e,n.text,n.feature).addTo(o),this.onEnd()},e}(a.a);e.a=s},174:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(t,e){var n=0;if(e.length>0)for(var o=0;o<e.length;o++){var i=t,r=e[o],a=e[(o+1)%e.length];r.y==a.y||i.y<(r.y<=a.y?r.y:a.y)||i.y>=(r.y>=a.y?r.y:a.y)||(i.y-r.y)*(a.x-r.x)/(a.y-r.y)+r.x>i.x&&n++}return n%2==1}},175:function(t,e){!function(){L.Marker.Measurement=L.Layer.extend({options:{pane:"markerPane"},initialize:function(t,e,n,o,i){L.setOptions(this,i),this._latlng=t,this._measurement=e,this._title=n,this._rotation=o},addTo:function(t){return t.addLayer(this),this},onAdd:function(t){this._map=t;var e=this.getPane?this.getPane():t.getPanes().markerPane,n=this._element=L.DomUtil.create("div","leaflet-zoom-animated leaflet-measure-path-measurement",e),o=L.DomUtil.create("div","",n);o.title=this._title,o.innerHTML=this._measurement,t.on("zoomanim",this._animateZoom,this),this._setPosition()},onRemove:function(t){t.off("zoomanim",this._animateZoom,this),(this.getPane?this.getPane():t.getPanes().markerPane).removeChild(this._element),this._map=null},_setPosition:function(){L.DomUtil.setPosition(this._element,this._map.latLngToLayerPoint(this._latlng)),this._element.style.transform+=" rotate("+this._rotation+"rad)"},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();L.DomUtil.setPosition(this._element,e),this._element.style.transform+=" rotate("+this._rotation+"rad)"}}),L.marker.measurement=function(t,e,n,o,i){return new L.Marker.Measurement(t,e,n,o,i)};var t=function(t){var e,n;return this._measurementOptions.imperial?(n=t/.3048,n>3e3?(t/=1609.344,e="mi"):(t=n,e="ft")):t>1e3?(t/=1e3,e="km"):e="m",t<100?t.toFixed(1)+" "+e:Math.round(t)+" "+e},e=function(t){var e;return this._measurementOptions.imperial?t>404.685642?(t/=4046.85642,e="ac"):(t/=.09290304,e="ft²"):t>1e6?(t/=1e6,e="km²"):e="m²",t<100?t.toFixed(1)+" "+e:Math.round(t)+" "+e},n=function(t){var e,n,o,i,r,a,s=function(t){return t*Math.PI/180},u=0,h=t.length;if(h>2){for(var c=0;c<h;c++)c===h-2?(i=h-2,r=h-1,a=0):c===h-1?(i=h-1,r=0,a=1):(i=c,r=c+1,a=c+2),e=t[i],n=t[r],o=t[a],u+=(s(o.lng)-s(e.lng))*Math.sin(s(n.lat));u=6378137*u*6378137/2}return Math.abs(u)},o=function(t){var e=t/6378137;return 2*Math.PI*6378137*6378137*(1-Math.cos(e))},i=function(t,e,n){return n?function(){return e.apply(this,arguments),t.apply(this,arguments)}:function(){return t.apply(this,arguments),e.apply(this,arguments)}};L.Polyline.include({showMeasurements:function(t){return!this._map||this._measurementLayer?this:(this._measurementOptions=L.extend({showOnHover:!1,minPixelDistance:30,showDistances:!0,showArea:!0,lang:{totalLength:"Total length",totalArea:"Total area",segmentLength:"Segment length"}},t||{}),this._measurementLayer=L.layerGroup().addTo(this._map),this.updateMeasurements(),this._map.on("zoomend",this.updateMeasurements,this),this)},hideMeasurements:function(){return this._map.off("zoomend",this.updateMeasurements,this),this._measurementLayer?(this._map.removeLayer(this._measurementLayer),this._measurementLayer=null,this):this},onAdd:i(L.Polyline.prototype.onAdd,function(){this.options.showMeasurements&&this.showMeasurements(this.options.measurementOptions)}),onRemove:i(L.Polyline.prototype.onRemove,function(){this.hideMeasurements()},!0),setLatLngs:i(L.Polyline.prototype.setLatLngs,function(){return this.updateMeasurements()}),spliceLatLngs:i(L.Polyline.prototype.spliceLatLngs,function(){return this.updateMeasurements()}),formatDistance:t,formatArea:e,updateMeasurements:function(){if(!this._measurementLayer)return this;var t,e,o,i,r,a,s=this.getLatLngs(),u=this instanceof L.Polygon,h=this._measurementOptions,c=0;if(s&&s.length&&L.Util.isArray(s[0])&&(s=s[0]),this._measurementLayer.clearLayers(),this._measurementOptions.showDistances&&s.length>1){t=this._measurementOptions.formatDistance||L.bind(this.formatDistance,this);for(var l=1,p=s.length;u&&l<=p||l<p;l++)e=s[l-1],o=s[l%p],a=e.distanceTo(o),c+=a,i=this._map.latLngToLayerPoint(e),r=this._map.latLngToLayerPoint(o),i.distanceTo(r)>=h.minPixelDistance&&L.marker.measurement(this._map.layerPointToLatLng([(i.x+r.x)/2,(i.y+r.y)/2]),t(a),h.lang.segmentLength,this._getRotation(e,o),h).addTo(this._measurementLayer);u||L.marker.measurement(o,t(c),h.lang.totalLength,0,h).addTo(this._measurementLayer)}if(u&&h.showArea&&s.length>2){t=h.formatArea||L.bind(this.formatArea,this);var f=n(s);L.marker.measurement(this.getBounds().getCenter(),t(f),h.lang.totalArea,0,h).addTo(this._measurementLayer)}return this},_getRotation:function(t,e){var n=this._map.project(t),o=this._map.project(e);return Math.atan((o.y-n.y)/(o.x-n.x))}}),L.Polyline.addInitHook(function(){this.options.showMeasurements&&this.showMeasurements()}),L.Circle.include({showMeasurements:function(t){return!this._map||this._measurementLayer?this:(this._measurementOptions=L.extend({showOnHover:!1,showArea:!0,lang:{totalArea:"Total area"}},t||{}),this._measurementLayer=L.layerGroup().addTo(this._map),this.updateMeasurements(),this._map.on("zoomend",this.updateMeasurements,this),this)},hideMeasurements:function(){return this._map.on("zoomend",this.updateMeasurements,this),this._measurementLayer?(this._map.removeLayer(this._measurementLayer),this._measurementLayer=null,this):this},onAdd:i(L.Circle.prototype.onAdd,function(){this.options.showMeasurements&&this.showMeasurements(this.options.measurementOptions)}),onRemove:i(L.Circle.prototype.onRemove,function(){this.hideMeasurements()},!0),setLatLng:i(L.Circle.prototype.setLatLng,function(){this.updateMeasurements()}),setRadius:i(L.Circle.prototype.setRadius,function(){this.updateMeasurements()}),formatArea:e,updateMeasurements:function(){if(this._measurementLayer){var t=this.getLatLng(),e=this._measurementOptions,n=e.formatArea||L.bind(this.formatArea,this);if(this._measurementLayer.clearLayers(),e.showArea){n=e.formatArea||L.bind(this.formatArea,this);var i=o(this.getRadius());L.marker.measurement(t,n(i),e.lang.totalArea,0,e).addTo(this._measurementLayer)}}}}),L.Circle.addInitHook(function(){this.options.showMeasurements&&this.showMeasurements()})}()},176:function(t,e,n){var o=n(177);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n(5).default;i("10279068",o,!0,{})},177:function(t,e,n){e=t.exports=n(4)(!1),e.push([t.i,".leaflet-measure-path-measurement{position:absolute;font-size:10px;color:#000;text-shadow:-1px 0 0 #fff,-1px -1px 0 #fff,0 -1px 0 #fff,1px -1px 0 #fff,1px 0 0 #fff,1px 1px 0 #fff,0 1px 0 #fff,-1px 1px 0 #fff;white-space:nowrap;transform-origin:0;pointer-events:none}.leaflet-measure-path-measurement>div{position:relative;margin-top:-25%;left:-50%}",""])},2:function(t,e,n){"use strict";var o=n(12),i=L,r=i.CircleMarker;e.a=L.VectorMarker=L.VectorMarker||r.extend({options:{weight:1,color:"#000",stroke:!0,fill:!0,radius:5,angle:0,riseOnHover:!0},initialize:function(t,e){r.prototype.initialize.call(this,t,e),this._radiusY=this.options.radiusY},_clickTolerance:function(){return r.prototype._clickTolerance.call(this)+1},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);var t=this.options,e=t.offset,n=t.icon;e&&(this._point=this._point.add(e)),n&&n.iconAnchor&&(this._point=this._point.subtract(n.iconAnchor)),this._updateBounds()},beforeAdd:function(t){var e=this,n=this.options;r.prototype.beforeAdd.call(this,t),t.options.preferCanvas||n.renderer||(n.renderer=t.__canvas=t.__canvas||L.canvas()),this.on("transformed",function(t){n.angle=t.rotation,e.redraw()})},_updatePath:function(){var t=this,e=t.options,n=t._renderer,i=e.src;switch(i=i||"circle"){case"triangle":return n._updateTriangle(t);case"rect":return e.radiusY||(t._radius=t._radiusY=8),n._updateRect(t);case"circle":return n._updateCircle(t);case"line":return n._updateLine(t);case"balloon":return n._updateBalloon(t);default:t._loader?n._updateIcon(t):(i&&0!==i.indexOf("/")&&!i.includes("http")&&(i=e.src=T+i),!t.loader&&(t.loader=Object(o.a)(i)).then(function(e){t._loader=e,t._radius=e.width/2,t._radiusY=e.height/2,t.redraw()}))}}})},20:function(t,e,n){"use strict";var o=L,i=o.Circle;e.a=i.extend({initialize:function(t,e,n){i.prototype.initialize.call(this,t,e,n),this._mRadiusY=this.options.radiusY},_project:function(){var t=this._latlng,e=this._map,n=this._mRadius,o=this._mRadiusY;o=o||n;var i=L.CRS.EPSG3857,r=this._point=e.latLngToLayerPoint(t),a=i.unproject(i.project(t).subtract([n,0])),s=i.unproject(i.project(t).subtract([o,0]));this._radius=r.x-e.latLngToLayerPoint(a).x,this._radiusY=r.x-e.latLngToLayerPoint(s).x,this._updateBounds()},setRadiusY:function(t){return this._mRadiusY=t,this.redraw()},getRadiusY:function(){return this._mRadiusY},toGeoJSON:function(){var t=this.getLatLng(),e=t.lat,n=t.lng;return this.options.radius=this._mRadius,this.options.radiusY=this._mRadiusY,{type:"Feature",properties:{},geometry:{coordinates:[n,e],type:"Ellipse"}}}})},21:function(t,e,n){"use strict";var o=n(36),i=L,r=i.Polyline,a=i.Polygon,s=i.point,u=r.prototype,h=u._projectLatlngs,c=u.toGeoJSON;e.a=L.MilitaryArrow=L.MilitaryArrow||r.extend({options:{fill:!0},_projectLatlngs:function(t,e,n){h.call(this,t,e,n);var i=this._rings;i=i[0].map(function(t){return[t.x,t.y]}),i=Object(o.a)(i,.005,this.options);for(var r=this._rings_temp=[[]],a=r[0],u=0,c=i.length;u<c;u++)a[u]=s(i[u][0],i[u][1]),n.extend(a[u])},_clipPoints:function(){this._parts=this._rings_temp},_containsPoint:function(t){return a.prototype._containsPoint.call(this,t,!0)},toGeoJSON:function(){var t=c.call(this);return t.geometry.type="MilitaryArrow",t}})},22:function(t,e,n){"use strict";function o(t,e){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],a=r[0],s=r[1],u=r[2],h=r[3],c={id:t+":"+i,css:s,media:u,sourceMap:h};o[a]?o[a].parts.push(c):n.push(o[a]={id:a,parts:[c]})}return n}e.a=o},29:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(8),s=n(11),u=n(2),h=n(30),c=n(20),l=n(32),p=(n.n(l),n(33)),f=(n.n(p),n(34)),d=(n.n(f),n(35)),m=n(21),y=n(37),g=(n.n(y),T),v=g.isFunction,_=g.isArray,w=g.fmt,b=g.assign,x=L,M=x.featureGroup,P=x.marker,O=x.polyline,k=x.polygon,E=x.circle,C=x.icon,j=x.divIcon,A=x.imageOverlay,F=function(t){return _(t)?t:[t]},D=function(t,e){return v(t)?t(e):t||{}},S=function(t){function e(n){o(this,e);var r=i(this,t.call(this));return r.initHook(),r.config(n),r}return r(e,t),e.prototype.initHook=function(){var t=this,e=this;e._source=[],["addPoints","addPolylines","addPolygons","addTyphoon","addAlarmLines"].forEach(function(n){t.addFnHook(n,{precall:function(){var t=this,o={fn:n,args:arguments};e._source.push(o),T.defer(function(){t.do("feature-add",o)})}})}),this.addFnHook("clear",{precall:function(){e._source.length=0,T.defer(function(){e.do("feature-clear")})}})},e.prototype.connect=function(t){var e=this.options,n=this._source;t.options=e,n.forEach(function(e){t[e.fn].apply(t,e.args)}),this.on("feature-add",function(e){t[e.fn].apply(t,e.args)}).on("feature-clear",function(){t.clear()})},e.prototype.config=function(t){this.options=t,this.layer=M()},e.prototype.has=function(t){return this.layer.hasLayer(t)},e.prototype.getMarkers=function(){return this.layer.getLayers()},e.prototype._add=function(t){this.layer.addLayer(t)},e.prototype.add=function(t,e,n){t&&(t.__data=n,this._add(t),this._bindToolTip(t,e,n),this._bindPopup(t,e,n),this._bindText(t,e,n))},e.prototype.addPoints=function(t,e){var n=this;return F(t).map(function(t){var o=D(e,t),i=n.createPoint(t,o);return n.add(i,o,t),i})},e.prototype.addClusterPoints=function(t,e){var n=this,o=L.markerClusterGroup(e&&e.cluster),i=this.layer,r=this._bindToolTip,a=this._bindPopup;return i.addLayer(o),F(t).map(function(t){var i=D(e,t),s=n.createPoint(t,i);return s&&(s.__data=t,r(s,i,t),a(s,i,t),o.addLayer(s)),s})},e.prototype.addClusterPoints2=function(t,e){var n=this.oms=this.oms||new L.OverlappingMarkerSpiderfier(this.map);this.addPoints(t,e).forEach(function(t){n.addMarker(t)})},e.prototype.addPolylines=function(t,e){var n=this;return F(t).map(function(t){var o=D(e,t),i=n.createPolyLine(t,o);return n.add(i,o,t),i.bringToBack(),i})},e.prototype.addPolygons=function(t,e){var n=this;return F(t).map(function(t){var o=D(e,t),i=n.createPolygon(t,o);return n.add(i,o,t),i.bringToBack(),i})},e.prototype.addCircles=function(t,e){var n=this;return F(t).map(function(t){var o=D(e,t),i=n.createCircle(t,o);n.add(i,o,t),i.bringToBack()})},e.prototype.addEllipses=function(t,e){var n=this;return F(t).map(function(t){var o=D(e,t),i=n.createEllipse(t,o);n.add(i,o,t),i.bringToBack()})},e.prototype.addTexts=function(t,e){var n=this;return F(t).map(function(t){var o=D(e,t),i=L.text(Object(a.a)(t.coordinates||t),t.text||t.properties.text,o.feature||o);i.__data=t,n.layer.addLayer(i)})},e.prototype.addRivers=function(t,e){var n=this;return F(t).map(function(t){var o=t.properties,i=t.coordinates,r=o||D(e,o||t),s=r.feature,u=i[0]&&_(i[0][0])?2:1,h=new d.a(Object(a.a)(i,u),s);n.layer.addLayer(h)})},e.prototype.addImage=function(t,e){var n=A(e.url,Object(a.a)(t.coordinates,1),e);return this.layer.addLayer(n),n},e.prototype.addMilitaryArrows=function(t,e){var n=this;return F(t).map(function(t){var o=D(e,t),i=o.feature,r=t.coordinates,s=1;r&&r[0]&&_(r[0][0])&&(s=2);var u=new m.a(Object(a.a)(r,s),i);return n.add(u,o,t),u.bringToBack(),u})},e.prototype.addTyphoon=function(t,e){var n=this.typhoons||(this.typhoons={}),o=n[t.tfbh],i=D(e||this.options);return o?o.update(t):(o=n[t.tfbh]=this.createTyphoon(t,i),o.addTo(this)),o},e.prototype.addAlarmLines=function(t){if(t){var e=this.layer,n=function(t,e){return O(Object(a.a)(t,1),e)},o=n(t.g48,t.s48),i=n(t.g24,t.s24);e.addLayer(o).addLayer(i)}},e.prototype.addHeat=function(t,e){e=D(e);var n=L.heat(Object(a.a)(t,1),e.feature);return this.add(n,e,t),n},e.prototype.addVelocity=function(t,e){var n=this;return new Promise(function(o){T.require(["dmap/leaflet/plugins/velocityLayer"],function(i){var r=i.default,a=r(t,e);n._add(a),o(a)})})},e.prototype.addWindy=function(t,e){var n=this;return new Promise(function(o){T.require(["dmap/leaflet/plugins/windyLayer"],function(i){var r=i.default;e=T.assign({tempOverlay:!0},e);var a=n.windfarm;a&&a.options.tempOverlay===e.tempOverlay?a.loadWindy(t):(a&&a.removeFrom(n.layer),a=n.windfarm=r(e),n._add(a),a.loadWindy(t)),o(a)})})},e.prototype.addShp=function(t,e){var n=L.shapefile(t,e);return this._add(n),n},e.prototype.addWFS=function(t,e){var n=this;T.require(["dmap/leaflet/plugins/wfst"],function(o){var i=o.default;e.url=t,new L.WFST(e,new L.Format.GeoJSON({crs:L.CRS.EPSG4326})).addTo(n.map).once("load",function(){this.map.fitBounds(i)})})},e.prototype.addGeoJSON=function(t,e){var n=this,o="Feature"===t.type?t.geometry:t,i=o?o.coordinates:null,r=o.type;if(!i&&!o)return null;switch(e=v(e)?e:b({},e,o.properties),r){case"MultiPoint":t=i.map(function(t){return{coordinates:t,properties:o.properties}});case"Point":return this.addPoints(t,e);case"LineString":case"MultiLineString":return this.addPolylines(o,e);case"Polygon":case"MultiPolygon":return this.addPolygons(o,e);case"GeometryCollection":return o.geometries.map(function(t){return n.addGeoJSON(t,e)});case"Circle":return this.addCircles(o,e);case"Ellipse":return this.addEllipses(o,e);case"Text":return this.addTexts(o,e);case"MilitaryArrow":return this.addMilitaryArrows(o,e)}},e.prototype.removeTyphoons=function(t){var e=this.typhoons;e&&(t=t||Object.keys(e),T.each(t,function(t){var n=e[t];n&&(n.remove(),delete e[t])}))},e.prototype.getTyphoon=function(t){var e=this.typhoons;return void 0===t?e:e&&e[t]},e.prototype.createTyphoon=function(t,e){return new h.a(t,e)},e.prototype.createPoint=function(t,e){var n=e.feature,o=n||{},i=o.tag,r=o.src,s=Object(a.a)(t.coordinates||t);if(s){if(i){switch(i){case"img":var h=n.offset;h&&(h=[-h[0],-h[1]]),n.icon=C(b({iconUrl:r,iconAnchor:h},n.icon));break;case"div":n.icon=j(b({iconAnchor:h},n.icon))}return P(s,n)}return new u.a(s,n)}},e.prototype.createPolyLine=function(t,e){var n=e.feature,o=t.coordinates,i=1;return o&&o[0]&&_(o[0][0])&&(i=2),O(Object(a.a)(o,i),n)},e.prototype.createPolygon=function(t,e){var n=e.feature,o=t.coordinates,i=o&&o[0]&&_(o[0][0])?2:1;return _(o[0])||(o=[o]),k(Object(a.a)(o,i),n)},e.prototype.createCircle=function(t,e){return E(Object(a.a)(t.coordinates),e.feature)},e.prototype.createEllipse=function(t,e){return new c.a(Object(a.a)(t.coordinates),e.feature)},e.prototype._bindToolTip=function(t,e,n){if(e=e.tooltip){var o=e,i=o.text,r=n&&"string"==typeof i?w(i,n.properties||n):i;r&&t.bindTooltip(r,e)}},e.prototype._bindPopup=function(t,e){if(e=e.popup){var n=new s.a(e).setContent(e.text);t.bindPopup(n,e)}},e.prototype._bindText=function(t,e){(e=e.text)&&t.bindText(e.text,e)},e.prototype.updateTooltips=function(){this.map&&this.map.eachLayer(function(t){var e=t.getTooltip();e&&e.isOpen&&e.update()})},e.prototype.hideTooltip=function(t){void 0===t&&(t=!0),this.layer.eachLayer(function(e){e.getTooltip()&&e.hideTooltip(t)})},e.prototype.clear=function(){return this.layer.clearLayers(),this.typhoons=null,this},e.prototype.suspend=function(){var t=this.map,e=this.layer;t&&t.removeLayer(e),this.suspended=!0},e.prototype.resume=function(){var t=this.map,e=this.layer;t&&t.addLayer(e)},e.prototype.addTo=function(t){return this.dmap=t,this.map=t.map,t.addLayer(this),this},e.prototype.remove=function(){return this.dmap.removeLayer(this.layer),this.dmap=null,this.map=null,this},e.prototype.on=function(t,e,n){return this.layer.on(t,e,n)},e.prototype.once=function(t,e,n){return this.layer.once(t,e,n)},e.prototype.off=function(t,e,n){return this.layer.off(t,e,n)},e.prototype.do=function(t,e){return this.layer.fire(t,e)},e.prototype.toGeoJSON=function(t){var e=this.layer,n=[];return e.eachLayer(function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t),i=o.geometry,r=o.properties,a=e.__data,s=e.options,u=e.getTooltip(),h=e.getText();i.properties=b(r,i.properties,a&&a.properties,{feature:s,tooltip:u&&u.options,text:h&&h.options}),i.properties.feature.className="",n.push(i)}}),{geometries:n,type:"GeometryCollection"}},e}(T.Class);e.a=S},3:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e,n){o(this,t),this.owner=e,this.dmap=e.dmap,this.map=e.map,this.layer=e.layer,this.data=n.data}return t.prototype.initMouseDownHandler=function(){var t=this;this.onMouseDown=this.onMouseDown||function(e){0==e.originalEvent.button&&t._onMouseDown(e)}},t.prototype.setOptions=function(t){this.options=T.assign(this.options||{},t)},t.prototype.reback=function(){var t=this.marker,e=this.layer,n=this.history;if(t){if(!t._defaultShape)return t.removeFrom(e),!0;var o=t._defaultShape(),i=o.pop();if(!i)return t.removeFrom(e),!0;n.push(i),t.setLatLngs(o)}},t.prototype.restore=function(){var t=this.marker,e=this.layer,n=this.history;if(t){if(t.addTo(e),!(t._defaultShape&&n.length>0))return!0;var o=t._defaultShape(),i=n.pop();o.push(i),t.setLatLngs(o)}},t.prototype.onEnd=function(t){this.history=[],this.dmap.do("draw-end",{target:this,marker:this.marker})},t.prototype.clear=function(){var t=this.marker;t&&t.remove()},t.prototype.reset=function(){this.restart&&(this.clear(),this.restart=!1,this.marker=null)},t.prototype.cancel=function(){},t.prototype.clone=function(){var t=new this.constructor(this.owner,this.options);return t.options=this.options,t},t}();e.a=i},30:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(8),r=n(31),a=n(11),s=n(2),u=L,h=u.marker,c=u.canvas,l=u.polyline,p=u.circle,f=u.circleMarker,d=u.divIcon,m=u.tooltip,y=u.featureGroup,g=u.latLng,v=T,_=v.assign,w=function(){function t(e,n){o(this,t),this.options={autoPlay:!0,hasLsljLater:!0,inView:!0,keepZoom:!0,click2drawOnTime:!0,hitForPoint:!0,ls:{color:"#0096FF",weight:3,opacity:.8,interactive:!1},lsyb:{color:"#666666",weight:2,opacity:.8,interactive:!1},org:{weight:1,dashArray:"10,3",interactive:!1},orgs:[{label:"中国",th:"CN",color:"#FF4050"},{label:"韩国",th:"KR",color:"#000000"},{label:"美国",th:"US",color:"#4099EE"},{label:"中国台湾",th:"TW",color:"#FFA040"},{label:"日本",th:"JP",color:"#43FF4B"},{label:"中国香港",th:"HK",color:"#FF40F5"}],grade:{color:"#000",radius:4,fillColor:"#FFF",weight:1,fillOpacity:1,src:"circle"},grades:[{F1:0,F2:.2},{F1:.3,F2:1.5},{F1:1.6,F2:3.3},{F1:3.4,F2:5.4},{F1:5.5,F2:7.9},{F1:8,F2:10.7},{F1:10.8,F2:13.8,fillColor:"#00FF03",GRADENAME:"热带低压"},{F1:13.95,F2:17.15,fillColor:"#00FF03",GRADENAME:"热带低压"},{F1:17.2,F2:20.7,fillColor:"#0062FE",GRADENAME:"热带风暴"},{F1:20.8,F2:24.4,fillColor:"#0062FE",GRADENAME:"热带风暴"},{F1:24.5,F2:28.4,fillColor:"#FDFA00",GRADENAME:"强热带风暴"},{F1:28.5,F2:32.6,fillColor:"#FDFA00",GRADENAME:"强热带风暴"},{F1:32.7,F2:36.9,fillColor:"#FDAC03",GRADENAME:"台风"},{F1:37,F2:41.4,fillColor:"#FDAC03",GRADENAME:"台风"},{F1:41.5,F2:46.1,fillColor:"#F072F6",GRADENAME:"强台风"},{F1:46.2,F2:50.9,fillColor:"#F072F6",GRADENAME:"强台风"},{F1:51,F2:56,fillColor:"#FD0002",GRADENAME:"超强台风"},{F1:56.1,F2:161.2,fillColor:"#FD0002",GRADENAME:"超强台风"}],c7:{fillColor:"#79C0AE",fillOpacity:.5,color:"#49BA6E",weight:1},c10:{fillColor:"#FFFF00",fillOpacity:.2,color:"#FFFF00",weight:1},c12:{fillColor:"#FF0000",fillOpacity:.3,color:"#FF0000",weight:1},land:{src:T+"assets/common/dmap/markers/flag.png"}},this.group=y(),this.data=T.action(e),n=_(this.options,n),n.grades=n.grades.map(function(t){return _({},n.grade,t)}),this._points=[]}return t.prototype.setOptions=function(t){_(this.options,t),this.update()},t.prototype.update=function(t){t&&t!==this.data&&(this.data=T.action(t),this.ci=t.points.length-1),this.complete&&this.draw(this.ci)},t.prototype.createPoint=function(t,e,n){var o=f(Object(i.a)(t),e);return n._source=this.data,o.__data=n,e=this.options.popup,e&&o.bindPopup(new a.a(e),e),o},t.prototype.createLand=function(t,e){return new s.a(Object(i.a)(t),e)},t.prototype.createPolyline=function(t,e){return l(Object(i.a)(t,1),e)},t.prototype.createCicle=function(t,e,n){return e&&p(Object(i.a)(t),1e3*e,n)},t.prototype.createQuadrant=function(t,e,n){if(e){var o=e.ne,i=e.nw,a=e.sw,s=e.se;if(o&&i&&a&&s)return this.renderer=this.renderer||c({style:{zIndex:40}}),new r.a([t[1],t[0]],_({},n,{renderer:this.renderer,radius:[1e3*o,1e3*i,1e3*a,1e3*s]}))}},t.prototype.createHurricane=function(t,e,n){var o=parseInt((n-6)/2)+1;return e?h(Object(i.a)(t),{icon:d(e)}):new s.a(Object(i.a)(t),{src:T+"assets/common/dmap/typhoon/hurricane"+(o>0?o:0)+".png",rotate:!0})},t.prototype.draw=function(t){var e=this,n=this,o=n.options,i=n.data,r=n.group,a=n.lsp,s=n.createPolyline,u=n.createCicle,h=n._points,c=o.autoPlay,p=o.ls,f=o.lsyb,d=o.grades,v=o.c7,L=o.c10,w=o.c12,b=o.org,x=o.orgs,M=o.hurricane,P=o.hasLsljLater,O=o.hitForPoint,k=n.createPoint.bind(n),E=n.createLand.bind(n),C=n.createQuadrant.bind(n),j=n.handleEvent.bind(n),A=i.points,F=i.land,D=this.getTimeIndex(A,t),S=A.length,R=function(t,e,n){!t||n===a&&e>D&&c||r.addLayer(t)},B=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))};n.tempLayer||(n.tempLayer=y(),r.addLayer(n.tempLayer));var z=n.tempLayer,N=function(t,e,n){!t||n===a&&e>D&&c||z.addLayer(t)},G=function(t,l){z.clearLayers(),(!t||t<l)&&(r.clearLayers(),r.addLayer(z));var y=void 0,G=void 0,I=[],H=[],W=[],U=A[t],Y=A.slice(0,t+1),Z=A.slice(t),J=[U.lng,U.lat];if(Y.length>1&&(y=s(Y,p)),!c&&P&&Z.length>1&&(G=s(Z,f),Y=Y.concat(Z.slice(1))),a.length=Y.length,Y.forEach(function(t,n){if(O){var o=t._point=e.map.latLngToLayerPoint(g(t)),r=function(t){for(;t--;)if(a[t])return Y[t]._point}(n);if(n>0&&B(o,r)<8)return void(a[n]=null)}var s=a[n]=h[n]=h[n]||k([t.lng,t.lat],d[t.power||0],t).on("click mouseover mouseout",j);if(0===n&&!s.getTooltip()){var u=m(T.merge({zoom:1,direction:"right",offset:[5,0]},e.options.tooltip),s).setContent(i.tfbh+i.name);s.bindTooltip(u)}}),W=o.land&&(F||[]).map(function(t){var e=T.clock(t.land_time),n=T.clock(U.time);if(e.date<n.date){return E(t,o.land)}}),c||t===D){var q=U.radius7_quad,V=U.radius10_quad,K=U.radius12_quad,Q=U.forecast,X=n.createHurricane(J,M,U.power),$=C(J,q,v)||u(J,U.radius7,v),tt=C(J,V,L)||u(J,U.radius10,L),et=C(J,K,w)||u(J,U.radius12,w);if(H.push($,tt,et,X),!c||t===S-1){var nt=[];x.forEach(function(n){for(var o=n.label,i=t,r=void 0,a=void 0,u={sets:o};!r&&i>=0;)a=A[i--],Q=a.forecast,r=Q&&T.find(Q,u);if(r){var h=r,c=h.sets,l=h.points,p=_({},b,T.find(x,{label:c}));I.push(s([a].concat(l),p)),l.forEach(function(t){t.sets=c;var n=t._point=e.map.latLngToLayerPoint(g(t));if(O)for(var o=0,i=nt.length;o<i;o++)if(B(n,nt[o])<8)return;nt.push(n),I.push(k(t,d[t.power||0],t).on("click mouseover mouseout",j))})}})}}H.forEach(N),I.forEach(N),N(y),N(G),a.forEach(R),W.forEach(N),z.bringToBack()};if(c){var I=0;!function t(){e.init&&(I<S&&n.layer?(G(I,I-1),setTimeout(t,30),I++):n.layer&&(T.do("typhoon-playend",{tf:i,attr:A[I-1]}),o.autoPlay=!1,n.complete=!0),I===S&&o.inView&&!e.layer.suspended&&(e.map&&o.keepZoom?e.map.setView(A[I-1]):e.map.fitBounds(l([[30,105],[10,125]].concat(A)).getBounds())))}()}else G(D,n.ci),T.do("typhoon-playend",{tf:i,attr:A[D]}),n.complete=!0;n.ci=D},t.prototype.getTimeIndex=function(t,e){return void 0!==e?+e:t.length-1},t.prototype.setTimeIndex=function(t){this.ci!==t&&this.complete&&(this.data.do("setTimeIndex",t),this.draw(t))},t.prototype.addTo=function(t){var e=this,n=this;t.map?(n.map=t.map.on("zoomend",function(){n.init&&n.update()}),n.layer=t,t._add(this.group),n.init||(n.init=!0,n.lsp=[],n.draw())):t.layer.on("add",function(){e.addTo(t)})},t.prototype.remove=function(){this.init=!1,this.layer&&this.group.removeFrom(this.layer.layer)},t.prototype.handleEvent=function(t){var e=this.data,n=this.lsp,o=this.complete,i=this._overTarget,r=this.options,a=t.target,s=t.type,u=n.indexOf(a);if(o){var h=void 0;switch(s){case"click":h={data:e,dataProvider:e.points,selItem:e.points[u],event:t},n[u]?(r.click2drawOnTime&&this.setTimeIndex(u),a.openPopup(),a.setRadius(7),T.do("typhoon-lslj-click",h)):(a.openPopup(),T.do("typhoon-yblj-click",h));break;case"mouseover":h={tf:e,attr:a.__data||e.points[u],event:t},n[u]?(i!=a&&(a.setRadius(7),this._overTarget=a),T.do("typhoon-lslj-over",h)):T.do("typhoon-yblj-over",h);break;case"mouseout":i&&(i.setRadius(4),this._overTarget=null),T.do("typhoon-lslj-out",h)}}},t}();e.a=w},31:function(t,e,n){"use strict";var o=L,i=o.Circle,r=o.CircleMarker;e.a=i.extend({initialize:function(t,e){r.prototype.initialize.call(this,t,e),this._mRadius=this.options.radius},_project:function(){var t=this._latlng,e=this._map,n=(this.options,this._mRadius),o=n[0],i=n[1],r=n[2],a=n[3],s=e.options.crs,u=L.CRS.Earth,h=t.lat,c=t.lng;if(s.distance===u.distance){var l=function(t){var n=Math.PI/180,o=t/u.R/n,i=e.project([h+o,c]),r=e.project([h-o,c]),a=i.add(r).divideBy(2);return p=p||a.subtract(e.getPixelOrigin()),a.y-i.y},p=void 0;o=l(o),i=l(i),r=l(r),a=l(a),this._point=p,this._radius=[a,r,i,o]}else{var f=s.project(t);o=[s.unproject(f.add([o,0])),s.unproject(f.add([0,-o]))],i=[s.unproject(f.add([-i,0])),s.unproject(f.add([0,-i]))],r=[s.unproject(f.add([r,0])),s.unproject(f.add([0,r]))],a=[s.unproject(f.add([-a,0])),s.unproject(f.add([0,a]))];var d=this._point=e.latLngToLayerPoint(t),m=d.x;this._radius=[m-e.latLngToLayerPoint(a[0]).x,e.latLngToLayerPoint(r[0]).x-m,m-e.latLngToLayerPoint(i[0]).x,e.latLngToLayerPoint(o[0]).x-m]}this._updateBounds()},_updatePath:function(){this._renderer._updateCircular(this)},_updateBounds:function(){var t=this._point,e=this._radius,n=this._clickTolerance(),o=e[0],i=e[1],r=e[2],a=e[3],s=Math.max(o,i,r,a),u=[s+n,s+n];this._pxBounds=new L.Bounds(t.subtract(u),t.add(u))}})},32:function(t,e){var n=L,o=n.Layer;o.include({getText:function(){return this._text},bindText:function(t,e){if(this._text instanceof L.Text)this._text.setContent(t);else{var n=this._latlng;this._text=t?L.text(n,t,e):new L.VectorMarker(n,e)}return this._initTextInteractions(),this._map&&this._map.hasLayer(this)&&this.openText(),this},_initTextInteractions:function(){this.on({remove:this._closeText,move:this._moveText})},openText:function(t,e){t instanceof o||(e=t,t=this),e||(e=t.getCenter?t.getCenter():t.getLatLng());var n=this._map,i=this._text;n&&(i._source=t,i.setLatLng(e),n.hasLayer(i)||n.addLayer(i))},unbindText:function(t){var e=this._text;e&&(t.removeLayer(e),this._text=null)},_closeText:function(){var t=this._map,e=this._text;t&&e&&t.hasLayer(e)&&t.removeLayer(e)},_moveText:function(t){this._text.setLatLng(t.latlng)}}),L.Canvas.include({_getTextWidth:function(t){return this._ctx.font=t.options.font,this._ctx.measureText(t._text).width},_updateText:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,o=t.options;o.fill&&(o.offset&&(e=e.add(o.offset)),n.font=o.font,n.translate(e.x,e.y),n.rotate(o.rotation),n.fillStyle=o.color,n.textAlign=o.textAlign,n.fillText(t._text,0,0),n.rotate(-o.rotation),n.translate(-e.x,-e.y))}}}),L.Text=L.Path.extend({options:{color:"blue",fill:!0,fillOpacity:1,rotation:0,stroke:!1,textAlign:"center",font:"14px arial"},initialize:function(t,e,n){L.setOptions(this,n),this._latlng=L.latLng(t),this._text=String(e||n.text)},setContent:function(t){this._text=String(t),this._update()},setLatLng:function(t){this._latlng=L.latLng(t),this._update()},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._renderer._getTextWidth(this),e=[t/2,t/2];this._pxBounds=L.bounds(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateText(this)},_empty:function(){return!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return!1},toGeoJSON:function(){var t=this.getLatLng(),e=t.lat,n=t.lng;return this.options.text=this._text,{type:"Feature",properties:{},geometry:{coordinates:[n,e],type:"Text"}}}}),L.text=function(t,e,n){return new L.Text(t,e,n)}},33:function(t,e){function n(t){if(!(this instanceof n))return new n(t);this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,this._data=[]}L.Heat=L.Layer.extend({initialize:function(t,e){this._latlngs=t,L.setOptions(this,e)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return this._heat&&!this._frame&&this._map&&!this._map._animating&&(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){this.options.pane?this.getPane().removeChild(this._canvas):t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=T.canvas("leaflet-heatmap-layer leaflet-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[e]="50% 50%";var o=this._map.getSize();t.width=o.x,t.height=o.y;var i=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(i?"animated":"hide")),this._heat=n(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){if(this._map){var t,e,n,o,i,r,a,s,u,h=[],c=this._heat._r,l=this._map.getSize(),p=new L.Bounds(L.point([-c,-c]),l.add([c,c])),f=void 0===this.options.max?1:this.options.max,d=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,m=1/Math.pow(2,Math.max(0,Math.min(d-this._map.getZoom(),12))),y=c/2,g=[],v=this._map._getMapPanePos(),_=v.x%y,w=v.y%y;for(t=0,e=this._latlngs.length;t<e;t++)if(n=this._map.latLngToContainerPoint(this._latlngs[t]),p.contains(n)){i=Math.floor((n.x-_)/y)+2,r=Math.floor((n.y-w)/y)+2;var b=this._latlngs[t].alt||1;u=b*m,g[r]=g[r]||[],o=g[r][i],o?(o[0]=(o[0]*o[2]+n.x*u)/(o[2]+u),o[1]=(o[1]*o[2]+n.y*u)/(o[2]+u),o[2]+=u):g[r][i]=[n.x,n.y,u]}for(t=0,e=g.length;t<e;t++)if(g[t])for(a=0,s=g[t].length;a<s;a++)(o=g[t][a])&&h.push([Math.round(o[0]),Math.round(o[1]),Math.min(o[2],f)]);this._heat.data(h).draw(this.options.minOpacity),this._frame=null}},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,n,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(n)+" scale("+e+")"}}),L.heat=function(t,e){return new L.Heat(t,e)},n.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=void 0===e?15:e;var n=this._circle=T.canvas(),o=n.getContext("2d"),i=this._r=t+e;return n.width=n.height=2*i,o.shadowOffsetX=o.shadowOffsetY=2*i,o.shadowBlur=e,o.shadowColor="black",o.beginPath(),o.arc(-i,-i,t,0,2*Math.PI,!0),o.closePath(),o.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(t){var e=T.canvas(),n=e.getContext("2d"),o=n.createLinearGradient(0,0,0,256);e.width=1,e.height=256;for(var i in t)o.addColorStop(+i,t[i]);return n.fillStyle=o,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var n,o=0,i=this._data.length;o<i;o++)n=this._data[o],e.globalAlpha=Math.min(Math.max(n[2]/this._max,void 0===t?.05:t),1),e.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var r=e.getImageData(0,0,this._width,this._height);return this._colorize(r.data,this._grad),e.putImageData(r,0,0),this},_colorize:function(t,e){for(var n,o=0,i=t.length;o<i;o+=4)(n=4*t[o+3])&&(t[o]=e[n],t[o+1]=e[n+1],t[o+2]=e[n+2])}}},34:function(t,e){var n=4*(Math.sqrt(2)-1)/3;L.Canvas.include({_updateBalloon:function(t){if(this._drawing&&!t._empty()){var e=t._point,o=this._ctx,i=t.options,r=e.x,a=e.y,s=i.radius,u=i.color,h=i.offset,c=i.label;s-=3,h||(h=[0,-32]),r+=h[0],a+=h[1];var l=n*s*.6,p=.0333*s,f=.4*s,d=a+s+f;o.beginPath();var m=r-s,y=a,g=r,v=a-s;o.moveTo(m,y),o.bezierCurveTo(m,y-l-p,g-l,v,g,v);var _=r,L=a-s,w=r+s,b=a;o.bezierCurveTo(_+l+p,L,w,b-l,w,b);var T=r+s,x=a,M=r,P=d;o.bezierCurveTo(T,x+l,M+l,P,M,P);var O=r,k=d,E=r-s,C=a;o.bezierCurveTo(O-l,k,E,C+l,E,C),o.fillStyle=u,o.fill(),o.beginPath(),o.strokeStyle=u,o.moveTo(r,d),o.lineTo(r,d+3),o.stroke(),c&&(o.beginPath(),o.font="14px arial",o.fillStyle="white",o.textAlign="center",o.fillText(c,r,a+5))}}})},35:function(t,e,n){"use strict";var o=L,i=o.FeatureGroup,r=o.setOptions,a=o.polyline,s=i.prototype;e.a=i.extend({options:{color:"blue",minWidth:1,maxWidth:10,ratio:null},initialize:function(t,e){s.initialize.call(this,[],e),this._latLngs=t,r(this,e),this._buildLines(t)},onAdd:function(t){s.onAdd.call(this,t),this._getLength(t),this.setStyle()},_buildLines:function(t){for(var e=0;e<t.length-1;e++){var n=a([t[e],t[e+1]]);this.addLayer(n)}},_getLength:function(t){for(var e=this._latLngs,n=0,o=0;o<e.length-1;o++)n+=t.latLngToLayerPoint(e[o]).distanceTo(t.latLngToLayerPoint(e[o+1]));return this._length=n},setStyle:function(t){var e,n,o=this.options=L.extend(this.options,t),i=this._length,r=this._map,a=this._layers,s=0;for(var u in a)e=a[u],n=e.getLatLngs(),s+=r.latLngToLayerPoint(n[0]).distanceTo(r.latLngToLayerPoint(n[1])),e.setStyle(L.extend({},o,{weight:o.ratio?s/o.ratio:o.minWidth+(o.maxWidth-o.minWidth)*(s/i)}))},setMinWidth:function(t){this.setStyle({minWidth:t})},setMaxWidth:function(t){this.setStyle({maxWidth:t})},getMinWidth:function(){return this.options.minWidth},getMaxWidth:function(){return this.options.maxWidth},useLength:function(t){return r(this,{ratio:t}),this},convertToPolyline:function(t){return a(this._latLngs,t)}})},36:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(t,e,n){var o=T.assign({r:36,ra:.2,ma:16},n),r=o.r,a=o.ra,s=o.ma,u=Math.PI,h=[t[0]],c=t.length,l=t[0],p=2*Math.ceil(1/e+1),f=1,d=void 0;if(c<2)return t;for(var m=e;m<1;m+=e,f++){d=i(t,c,m);var y=s-9*m,g=Math.atan2(d[1]-l[1],d[0]-l[0])-Math.PI/2,v=y*Math.cos(g),_=y*Math.sin(g);h[f]=[d[0]+v,d[1]+_],h[p-f]=[d[0]-v,d[1]-_],l=d}d=t[c-1];var L=Math.atan2(d[1]-l[1],d[0]-l[0]);return d=[l[0]+(s+2)*Math.cos(L),l[1]+(s+2)*Math.sin(L)],h[f++]=[d[0]+r*Math.cos(u*(1+a)+L),d[1]+r*Math.sin(u*(1+a)+L)],h[f++]=d,h[f]=[d[0]+r*Math.cos(u*(1-a)+L),d[1]+r*Math.sin(u*(1-a)+L)],h.push(t[0]),h},i=function(t,e,n){for(var o,i=0,a=0,s=e-1,u=0;u<e;u++)o=r(s,u,n),i+=t[u][0]*o,a+=t[u][1]*o;return[i,a]},r=function(t,e,n){return a(t,e)*Math.pow(n,e)*Math.pow(1-n,t-e)},a=function(t,e){return s(t)/(s(e)*s(t-e))},s=function(t){for(var e=1,n=1;n<=t;n++)e*=n;return e}},37:function(t,e){!function(){"use strict";/** @preserve OverlappingMarkerSpiderfier
  https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet
  Copyright (c) 2011 - 2012 George MacKerron
  Released under the MIT licence: http://opensource.org/licenses/mit-license
  Note: The Leaflet maps API must be included *before* this code
   */
var t={}.hasOwnProperty,e=[].slice;(function(){if(null!=this.L)return this.OverlappingMarkerSpiderfier=L.OverlappingMarkerSpiderfier=function(){function n(e,n){var o,i,r,a,s,u;this.map=e,null==n&&(n={});for(r in n)t.call(n,r)&&(u=n[r],this[r]=u);for(this.initMarkerArrays(),this.listeners={},s=["click","zoomend"],i=0,a=s.length;i<a;i++)o=s[i],this.map.addEventListener(o,function(t){return function(){return t.unspiderfy()}}(this))}var o,i;return o=n.prototype,o.VERSION="0.2.6",i=2*Math.PI,o.keepSpiderfied=!1,o.nearbyDistance=20,o.circleSpiralSwitchover=9,o.circleFootSeparation=25,o.circleStartAngle=i/12,o.spiralFootSeparation=28,o.spiralLengthStart=11,o.spiralLengthFactor=5,o.legWeight=1.5,o.legColors={usual:"#222",highlighted:"#f00"},o.initMarkerArrays=function(){return this.markers=[],this.markerListeners=[]},o.addMarker=function(t){var e;return null!=t._oms?this:(t._oms=!0,e=function(e){return function(){return e.spiderListener(t)}}(this),t.addEventListener("click",e),this.markerListeners.push(e),this.markers.push(t),this)},o.getMarkers=function(){return this.markers.slice(0)},o.removeMarker=function(t){var e,n;return null!=t._omsData&&this.unspiderfy(),(e=this.arrIndexOf(this.markers,t))<0?this:(n=this.markerListeners.splice(e,1)[0],t.removeEventListener("click",n),delete t._oms,this.markers.splice(e,1),this)},o.clearMarkers=function(){var t,e,n,o,i,r;for(this.unspiderfy(),r=this.markers,t=e=0,n=r.length;e<n;t=++e)o=r[t],i=this.markerListeners[t],o.removeEventListener("click",i),delete o._oms;return this.initMarkerArrays(),this},o.addListener=function(t,e){var n;return(null!=(n=this.listeners)[t]?n[t]:n[t]=[]).push(e),this},o.removeListener=function(t,e){var n;return n=this.arrIndexOf(this.listeners[t],e),n<0||this.listeners[t].splice(n,1),this},o.clearListeners=function(t){return this.listeners[t]=[],this},o.trigger=function(){var t,n,o,i,r,a,s,u;for(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],s=null!=(a=this.listeners[n])?a:[],u=[],i=0,r=s.length;i<r;i++)o=s[i],u.push(o.apply(null,t));return u},o.generatePtsCircle=function(t,e){var n,o,r,a,s,u,h,c;for(r=this.circleFootSeparation*(2+t),u=r/i,o=i/t,c=[],a=s=0,h=t;0<=h?s<h:s>h;a=0<=h?++s:--s)n=this.circleStartAngle+a*o,c.push(new L.Point(e.x+u*Math.cos(n),e.y+u*Math.sin(n)));return c},o.generatePtsSpiral=function(t,e){var n,o,r,a,s,u,h;for(a=this.spiralLengthStart,n=0,h=[],o=r=0,u=t;0<=u?r<u:r>u;o=0<=u?++r:--r)n+=this.spiralFootSeparation/a+5e-4*o,s=new L.Point(e.x+a*Math.cos(n),e.y+a*Math.sin(n)),a+=i*this.spiralLengthFactor/n,h.push(s);return h},o.spiderListener=function(t){var e,n,o,i,r,a,s,u,h,c;if(a=null!=t._omsData,a&&this.keepSpiderfied||this.unspiderfy(),a)return this.trigger("click",t);for(s=[],u=[],h=this.nearbyDistance*this.nearbyDistance,r=this.map.latLngToLayerPoint(t.getLatLng()),c=this.markers,e=0,n=c.length;e<n;e++)o=c[e],this.map.hasLayer(o)&&(i=this.map.latLngToLayerPoint(o.getLatLng()),this.ptDistanceSq(i,r)<h?s.push({marker:o,markerPt:i}):u.push(o));return 1===s.length?this.trigger("click",t):this.spiderfy(s,u)},o.makeHighlightListeners=function(t){return{highlight:function(e){return function(){return t._omsData.leg.setStyle({color:e.legColors.highlighted})}}(this),unhighlight:function(e){return function(){return t._omsData.leg.setStyle({color:e.legColors.usual})}}(this)}},o.spiderfy=function(t,e){var n,o,i,r,a,s,u,h,c,l,p;return this.spiderfying=!0,l=t.length,n=this.ptAverage(function(){var e,n,o;for(o=[],e=0,n=t.length;e<n;e++)u=t[e],o.push(u.markerPt);return o}()),r=l>=this.circleSpiralSwitchover?this.generatePtsSpiral(l,n).reverse():this.generatePtsCircle(l,n),p=function(){var e,n,u;for(u=[],e=0,n=r.length;e<n;e++)i=r[e],o=this.map.layerPointToLatLng(i),c=this.minExtract(t,function(t){return function(e){return t.ptDistanceSq(e.markerPt,i)}}(this)),s=c.marker,a=new L.Polyline([s.getLatLng(),o],{color:this.legColors.usual,weight:this.legWeight,clickable:!1}),this.map.addLayer(a),s._omsData={usualPosition:s.getLatLng(),leg:a},this.legColors.highlighted!==this.legColors.usual&&(h=this.makeHighlightListeners(s),s._omsData.highlightListeners=h,s.addEventListener("mouseover",h.highlight),s.addEventListener("mouseout",h.unhighlight)),s.setLatLng(o),s.setZIndexOffset(1e6),u.push(s);return u}.call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",p,e)},o.unspiderfy=function(t){var e,n,o,i,r,a,s;if(null==t&&(t=null),null==this.spiderfied)return this;for(this.unspiderfying=!0,s=[],r=[],a=this.markers,e=0,n=a.length;e<n;e++)o=a[e],null!=o._omsData?(this.map.removeLayer(o._omsData.leg),o!==t&&o.setLatLng(o._omsData.usualPosition),o.setZIndexOffset(0),i=o._omsData.highlightListeners,null!=i&&(o.removeEventListener("mouseover",i.highlight),o.removeEventListener("mouseout",i.unhighlight)),delete o._omsData,s.push(o)):r.push(o);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",s,r),this},o.ptDistanceSq=function(t,e){var n,o;return n=t.x-e.x,o=t.y-e.y,n*n+o*o},o.ptAverage=function(t){var e,n,o,i,r,a;for(r=a=0,e=0,n=t.length;e<n;e++)i=t[e],r+=i.x,a+=i.y;return o=t.length,new L.Point(r/o,a/o)},o.minExtract=function(t,e){var n,o,i,r,a,s,u;for(i=a=0,s=t.length;a<s;i=++a)r=t[i],u=e(r),(void 0===n||null===n||u<o)&&(o=u,n=i);return t.splice(n,1)[0]},o.arrIndexOf=function(t,e){var n,o,i;if(null!=t.indexOf)return t.indexOf(e);for(n=o=0,i=t.length;o<i;n=++o)if(t[n]===e)return n;return-1},n}()}).call(window)}()},4:function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=o(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([r]).join("\n")}return[n].join("\n")}function o(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=n(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},5:function(t,e,n){"use strict";function o(t,e,n,o){m=n,g=o||{};var r=Object(h.a)(t,e);return i(r),function(e){for(var n=[],o=0;o<r.length;o++){var a=r[o],s=l[a.id];s.refs--,n.push(s)}e?(r=Object(h.a)(t,e),i(r)):r=[];for(var o=0;o<n.length;o++){var s=n[o];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete l[s.id]}}}}function i(t){for(var e=0;e<t.length;e++){var n=t[e],o=l[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(a(n.parts[i]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{for(var r=[],i=0;i<n.parts.length;i++)r.push(a(n.parts[i]));l[n.id]={id:n.id,refs:1,parts:r}}}}function r(){var t=document.createElement("style");return t.type="text/css",p.appendChild(t),t}function a(t){var e,n,o=document.querySelector("style["+v+'~="'+t.id+'"]');if(o){if(m)return y;o.parentNode.removeChild(o)}if(_){var i=d++;o=f||(f=r()),e=s.bind(null,o,i,!1),n=s.bind(null,o,i,!0)}else o=r(),e=u.bind(null,o),n=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else n()}}function s(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=L(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function u(t,e){var n=e.css,o=e.media,i=e.sourceMap;if(o&&t.setAttribute("media",o),g.ssrId&&t.setAttribute(v,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var h=n(22),c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l={},p=c&&(document.head||document.getElementsByTagName("head")[0]),f=null,d=0,m=!1,y=function(){},g=null,v="data-vue-ssr-id",_="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase()),L=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},50:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=n(2),u=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{src:"circle",color:"#000",radius:5,fillColor:"#FFF",weight:1,fillOpacity:1}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.initMouseDownHandler(),this.map.on("mousedown",this.onMouseDown,this)},e.prototype.cancel=function(){this.map.off("mousedown",this.onMouseDown,this)},e.prototype._onMouseDown=function(t){var e=t.latlng,n=this.options,o=this.layer,i=this.marker;i?i.setLatLng(e):this.marker=new s.a(e,n.feature).addTo(o),this.onEnd()},e}(a.a);e.a=u},51:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=L,u=s.Polyline,h=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red",weight:2}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.map.on("mousedown",this.onMouseDown,this),this.restart=!0},e.prototype.cancel=function(){var t=this.map;t.off("mousedown",this.onMouseDown,this),t.off("mousemove",this.onMouseMove,this),this.mp=null},e.prototype.onMouseDown=function(t){this.reset();var e=this.marker,n=this.map,o=this.layer,i=this.options,r=t.latlng;e?this.mp=null:(e=this.marker=new u([r],i.feature).addTo(o),n.on("mousemove",this.onMouseMove,this),n.once("dblclick",this.onEnd,this))},e.prototype.onMouseMove=function(t){var e=this.marker,n=this.mp,o=t.latlng;n?(n.lat=o.lat,n.lng=o.lng,e.getBounds().extend(n),e.redraw()):(e.addLatLng(o),this.mp=o)},e}(a.a);e.a=h},52:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=L,u=s.Polygon,h=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red",fillOpacity:.5,weight:1}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.initMouseDownHandler(),this.map.on("mousedown",this.onMouseDown,this),this.restart=!0},e.prototype.cancel=function(){var t=this.map;t.off("mousedown",this.onMouseDown,this),t.off("mousemove",this.onMouseMove,this),this.mp=null},e.prototype._onMouseDown=function(t){this.reset();var e=this.marker,n=this.map,o=this.layer,i=this.options,r=t.latlng;e||(e=this.marker=new u([r],i.feature).addTo(o),n.on("mousemove",this.onMouseMove,this),n.once("dblclick",this.onEnd,this)),this.mp=null},e.prototype.onMouseMove=function(t){var e=this.marker,n=this.mp,o=t.latlng;n?(n.lat=o.lat,n.lng=o.lng,e.getBounds().extend(n),e.redraw()):(e.addLatLng(o),this.mp=o)},e}(a.a);e.a=h},53:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),s=n(170),u=function(t){function e(){var n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),h=0;h<s;h++)u[h]=arguments[h];return n=r=i(this,t.call.apply(t,[this].concat(u))),r.options={feature:{color:"red",fillOpacity:.5,weight:1}},a=n,i(r,a)}return r(e,t),e.prototype.start=function(){this.initMouseDownHandler(),this.map.once("mousedown",this.onMouseDown,this)},e.prototype.cancel=function(){var t=this.map;t.off("mousedown",this.onMouseDown,this),t.off("mousemove",this.onMouseMove,this)},e.prototype._onMouseDown=function(t){var e=this.options,n=this.map,o=this.layer,i=t.latlng;this.clear(),this.marker=new s.a(i,e.feature).addTo(o),n.on("mousemove",this.onMouseMove,this),n.once("mouseup",this.onEnd,this)},e.prototype.onMouseMove=function(t){var e=this.marker,n=t.latlng,o=e.getLatLng(),i=n.distanceTo(o);e.setRadius(i),e.redraw()},e}(a.a);e.a=u},8:function(t,e,n){"use strict";function o(t,e){return e--&&t.map(function(t){return o(t,e)})||r(t)&&s(t[1],t[0])||s(t)}e.a=o;var i=T,r=i.isArray,a=L,s=a.latLng}})});
//# sourceMappingURL=drawLayer.js.map