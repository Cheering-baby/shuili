{"version":3,"sources":["webpack:///plugins/drawLayer.js","webpack:///webpack/bootstrap 7b19f38a437100774b0e","webpack:///./src/polyfill/Popup.js","webpack:///./src/utils/Loader.js","webpack:///./src/plugins/DrawLayer.js","webpack:///./src/plugins/tools/DistanceTool.js","webpack:///./src/plugins/tools/PenTool.js","webpack:///./src/plugins/tools/PenFillTool.js","webpack:///./src/plugins/tools/RectTool.js","webpack:///./src/feature/Circle.js","webpack:///./src/plugins/tools/EllipseTool.js","webpack:///./src/plugins/tools/MilitaryArrowTool.js","webpack:///./src/plugins/tools/TextTool.js","webpack:///./src/utils/geoUtils.js","webpack:///./src/plugins/meature/leaflet-measure-path.js","webpack:///./src/plugins/meature/leaflet-measure-path.css?1037","webpack:///./src/plugins/meature/leaflet-measure-path.css","webpack:///./src/feature/VectorMarker.js","webpack:///./src/feature/Ellipse.js","webpack:///./src/feature/MilitaryArrow.js","webpack:///./node_modules/vue-style-loader/lib/listToStyles.js","webpack:///./src/layer/FeatureLayer.js","webpack:///./src/plugins/tools/Tool.js","webpack:///./src/feature/Typhoon.js","webpack:///./src/feature/Quadrant.js","webpack:///./src/feature/Text.js","webpack:///./src/feature/Heat.js","webpack:///./src/feature/Balloon.js","webpack:///./src/feature/River.js","webpack:///./src/utils/Bezier.js","webpack:///./node_modules/overlapping-marker-spiderfier-leaflet/build/oms.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/vue-style-loader/lib/addStylesClient.js","webpack:///./src/plugins/tools/PointTool.js","webpack:///./src/plugins/tools/PolylineTool.js","webpack:///./src/plugins/tools/PolygonTool.js","webpack:///./src/plugins/tools/CircleTool.js","webpack:///./src/utils/LonLats.js"],"names":["define","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","11","__webpack_exports__","_L","L","Layer","Popup","DomEvent","_T","T","$div","div","Popup2","extend","options","maxWidth","minWidth","autoPan","autoPosition","closeButton","autoClose","_initLayout","_this","this","that","branch","leaf","className","container","_container","prefix","_contentNode","disableScrollPropagation","disableClickPropagation","el","props","assign","owner","marker","_source","data","__data","render","then","vm","$el","style","width","clientWidth","height","clientHeight","setContent","_getAnchor","point","map","_map","firstChild","_latlng","left","top","contentHeight","_map$latLngToContaine","latLngToContainerPoint","x","y","size","getSize","dx","dy","_point","include","bindPopup","content","setOptions","_popup","_popupHandlersAdded","events","click","_openPopup","keypress","_onKeyPress","remove","closePopup","move","_movePopup","hover","mouseover","on","unbindPopup","off","12","imgs","url","funcs","img","Image","complete","loader","func","push","src","onload","length","shift","165","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","writable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0__tools_PointTool__","__WEBPACK_IMPORTED_MODULE_1__tools_PolylineTool__","__WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__","__WEBPACK_IMPORTED_MODULE_3__tools_PenTool__","__WEBPACK_IMPORTED_MODULE_4__tools_PenFillTool__","__WEBPACK_IMPORTED_MODULE_5__tools_RectTool__","__WEBPACK_IMPORTED_MODULE_6__tools_PolygonTool__","__WEBPACK_IMPORTED_MODULE_7__tools_CircleTool__","__WEBPACK_IMPORTED_MODULE_8__tools_EllipseTool__","__WEBPACK_IMPORTED_MODULE_9__tools_MilitaryArrowTool__","__WEBPACK_IMPORTED_MODULE_10__tools_TextTool__","__WEBPACK_IMPORTED_MODULE_11__feature_VectorMarker__","__WEBPACK_IMPORTED_MODULE_12__layer_FeatureLayer__","__WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__","__WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path__","__WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css__","isArray","Marker","Polyline","Polygon","Circle","CircleMarker","DrawLayer","_FeatureLayer","_temp","_ret","_len","arguments","args","Array","_key","apply","concat","history","next","addTo","dmap","onDrawEnd","bind","add","tooltip","draggable","_check","editEnable","dragging","enable","makeDraggable","change","pan","tool","reset","cursor","clear","todo","restore","pop","includes","done","reback","start","do","target","type","cancel","disable","Tool","feature","interactive","e","_this2","_tool","reable","setTimeout","setStyle","Text","_bindText","searchable","event","search","multi","clone","result","latLngToLayerPoint","_radius","center","getLatLng","eachLayer","layer","distanceTo","latlngs","getLatLngs","len","_rings","166","DistancePolylineTool","DistancePolygonTool","__WEBPACK_IMPORTED_MODULE_0__PolylineTool__","__WEBPACK_IMPORTED_MODULE_1__PolygonTool__","_PolylineTool","color","weight","showMeasurements","onMouseMove","updateMeasurements","_PolygonTool","_temp2","_ret2","_len2","_key2","fillOpacity","167","__WEBPACK_IMPORTED_MODULE_0__Tool__","PenTool","_Tool","once","onMouseDown","restart","latlng","onEnd","addLatLng","168","PenFillTool","initMouseDownHandler","_onMouseDown","rectangle","latLngBounds","169","Rectangle","RectTool","sp","setBounds","redraw","170","toGeoJSON","_getLatLng","lat","lng","radius","_mRadius","properties","geometry","coordinates","_updateBounds","_radiusY","171","__WEBPACK_IMPORTED_MODULE_0__CircleTool__","__WEBPACK_IMPORTED_MODULE_1__feature_Ellipse__","EllipseTool","_CircleTool","latlng1","latlng2","r","ry","setRadius","setRadiusY","172","__WEBPACK_IMPORTED_MODULE_1__feature_MilitaryArrow__","MilitaryArrowTool","LatLng","fillColor","mp","lp","layerPoint","173","__WEBPACK_IMPORTED_MODULE_0__PointTool__","TextTool","_PointTool","text","174","pointInPolygon","arr","nCross","p0","p1","p2","175","Measurement","pane","initialize","measurement","title","rotation","_measurement","_title","_rotation","addLayer","onAdd","getPane","getPanes","markerPane","_element","DomUtil","inner","innerHTML","_animateZoom","_setPosition","onRemove","removeChild","setPosition","transform","opt","pos","_latLngToNewLayerPoint","zoom","round","latLng","formatDistance","unit","feet","_measurementOptions","imperial","toFixed","Math","formatArea","a","ringArea","coords","p3","lowerIndex","middleIndex","upperIndex","rad","_","PI","area","coordsLength","sin","abs","circleArea","rho","cos","override","method","fn","hookAfter","_measurementLayer","showOnHover","minPixelDistance","showDistances","showArea","lang","totalLength","totalArea","segmentLength","layerGroup","hideMeasurements","removeLayer","measurementOptions","setLatLngs","spliceLatLngs","formatter","ll1","ll2","dist","latLngs","isPolygon","totalDist","Util","clearLayers","layerPointToLatLng","_getRotation","getBounds","getCenter","project","atan","addInitHook","setLatLng","getRadius","176","locals","default","177","2","__WEBPACK_IMPORTED_MODULE_0__utils_Loader__","VectorMarker","stroke","fill","angle","riseOnHover","radiusY","_clickTolerance","_project","offset","icon","iconAnchor","subtract","beforeAdd","preferCanvas","renderer","__canvas","canvas","_updatePath","_renderer","_updateTriangle","_updateRect","_updateCircle","_updateLine","_updateBalloon","_loader","_updateIcon","indexOf","20","legacyOptions","_mRadiusY","crs","CRS","EPSG3857","unproject","latlng3","getRadiusY","21","__WEBPACK_IMPORTED_MODULE_0__utils_Bezier__","toPoint","_Polyline$prototype","_projectLatlngs","MilitaryArrow","projectedBounds","temp","_rings_temp","_clipPoints","_parts","_containsPoint","json","22","listToStyles","parentId","list","styles","newStyles","item","id","css","media","sourceMap","part","parts","29","__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__","__WEBPACK_IMPORTED_MODULE_1__polyfill_Popup__","__WEBPACK_IMPORTED_MODULE_2__feature_VectorMarker__","__WEBPACK_IMPORTED_MODULE_3__feature_Typhoon__","__WEBPACK_IMPORTED_MODULE_4__feature_Ellipse__","__WEBPACK_IMPORTED_MODULE_5__feature_Text__","__WEBPACK_IMPORTED_MODULE_6__feature_Heat__","__WEBPACK_IMPORTED_MODULE_7__feature_Balloon__","__WEBPACK_IMPORTED_MODULE_8__feature_River__","__WEBPACK_IMPORTED_MODULE_9__feature_MilitaryArrow__","__WEBPACK_IMPORTED_MODULE_10_overlapping_marker_spiderfier_leaflet_build_oms__","isFunction","fmt","$assign","toGroup","featureGroup","toMarker","toPolyline","polyline","toPolygon","polygon","toCircle","circle","toIcon","toDivIcon","divIcon","toImageOverlay","imageOverlay","toArray","toOptions","FeatureLayer","_T$Class","initHook","config","forEach","addFnHook","precall","_this3","defer","connect","has","hasLayer","getMarkers","getLayers","_add","_bindToolTip","_bindPopup","addPoints","_this4","featureOptions","createPoint","addClusterPoints","_this5","group","markerClusterGroup","cluster","addClusterPoints2","oms","OverlappingMarkerSpiderfier","addMarker","addPolylines","_this6","createPolyLine","bringToBack","addPolygons","_this7","createPolygon","addCircles","_this8","createCircle","addEllipses","_this9","createEllipse","addTexts","_this10","addRivers","_this11","deep","addImage","addMilitaryArrows","_this12","addTyphoon","typhoons","tfbh","update","createTyphoon","addAlarmLines","createPolyline","coor","m48","g48","s48","m24","g24","s24","addHeat","heat","addVelocity","_this13","Promise","resolve","require","_ref","createLayer","addWindy","_this14","_ref2","createWindyLayer","tempOverlay","windfarm","loadWindy","removeFrom","addShp","shapefile","addWFS","_this15","_ref3","wfst","WFST","Format","GeoJSON","EPSG4326","fitBounds","addGeoJSON","geojson","_this16","geometries","removeTyphoons","ids","keys","each","typhoon","getTyphoon","_ref4","tag","anchor","iconUrl","_options","bindTooltip","popup","bindText","updateTooltips","getTooltip","isOpen","hideTooltip","hide","suspend","suspended","resume","types","ctx","fire","precision","jsons","getText","Class","3","originalEvent","button","_defaultShape","30","__WEBPACK_IMPORTED_MODULE_1__feature_Quadrant__","__WEBPACK_IMPORTED_MODULE_2__polyfill_Popup__","__WEBPACK_IMPORTED_MODULE_3__VectorMarker__","toCanvas","circleMarker","toTooltip","toFeatureGroup","toLatLng","Typhoon","autoPlay","hasLsljLater","inView","keepZoom","click2drawOnTime","hitForPoint","ls","opacity","lsyb","org","dashArray","orgs","label","th","grade","grades","F1","F2","GRADENAME","c7","c10","c12","land","action","val","_points","ci","points","draw","createLand","createCicle","createQuadrant","ne","nw","sw","se","zIndex","createHurricane","colorIndex","parseInt","rotate","time","lsp","hurricane","handleEvent","getTimeIndex","index","array","getDistance","sqrt","tempLayer","addTempLayer","drawing","prev","lslj","lslj_yb","yblj","tffq","landPoints","lslj_prev","slice","lslj_after","point_prev","power","merge","direction","tm","clock","land_time","ctm","date","radius7_quad","radius10_quad","radius12_quad","forecast","h","r7","radius7","r10","radius10","r12","radius12","sets","find","_item","j","playing","init","tf","attr","setView","setTimeIndex","_overTarget","dataProvider","selItem","openPopup","31","Earth","distance","getR","latR","R","bottom","divideBy","getPixelOrigin","xy","_updateCircular","w","maxR","max","_pxBounds","Bounds","32","_text","_initTextInteractions","openText","_closeText","_moveText","unbindText","Canvas","_getTextWidth","_ctx","font","measureText","_updateText","_drawing","_empty","translate","fillStyle","textAlign","fillText","Path","String","_update","bounds","_bounds","intersects","33","simpleheat","_canvas","document","getElementById","getContext","_width","_height","_max","_data","Heat","_latlngs","_heat","_updateOptions","_frame","_animating","requestAnimFrame","_redraw","_initCanvas","appendChild","_panes","overlayPane","_reset","zoomAnimation","Browser","any3d","originProp","testProp","animated","addClass","defaultRadius","blur","gradient","topLeft","containerPointToLayerPoint","cell","len2","k","_r","undefined","maxZoom","getMaxZoom","v","pow","min","getZoom","cellSize","grid","panePos","_getMapPanePos","offsetX","offsetY","contains","floor","alt","minOpacity","scale","getZoomScale","_getCenterOffset","_multiplyBy","setTransform","TRANSFORM","getTranslateString","defaultGradient","0.4","0.6","0.7","0.8","1","_circle","r2","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","arc","closePath","resize","grad","createLinearGradient","addColorStop","fillRect","_grad","getImageData","clearRect","globalAlpha","drawImage","colored","_colorize","putImageData","pixels","34","KAPPA","handleLength","widthDiff","heightDiff","balloonBottomY","topLeftCurveStartX","topLeftCurveStartY","topLeftCurveEndX","topLeftCurveEndY","moveTo","bezierCurveTo","topRightCurveStartX","topRightCurveStartY","topRightCurveEndX","topRightCurveEndY","bottomRightCurveStartX","bottomRightCurveStartY","bottomRightCurveEndX","bottomRightCurveEndY","bottomLeftCurveStartX","bottomLeftCurveStartY","bottomLeftCurveEndX","bottomLeftCurveEndY","strokeStyle","lineTo","35","FeatureGroup","FeatureGroupPrototype","ratio","_latLngs","_buildLines","_getLength","line","_length","layers","_layers","key","setMinWidth","setMaxWidth","getMinWidth","getMaxWidth","useLength","convertToPolyline","36","coattail","step","_T$assign","ra","ma","num","ceil","PBezier","radians","atan2","t","b","px","py","BEZ","C","Factorial","37","hasProp","_Class","opts","ref","initMarkerArrays","listeners","addEventListener","twoPi","usual","highlighted","markers","markerListeners","markerListener","spiderListener","arrIndexOf","splice","removeEventListener","base","trigger","ref1","results","generatePtsCircle","count","centerPt","angleStep","circumference","legLength","Point","generatePtsSpiral","pt","mPt","markerPt","markerSpiderfied","nearbyMarkerData","nonNearbyMarkers","pxSq","ptDistanceSq","spiderfy","makeHighlightListeners","highlight","leg","unhighlight","markerData","bodyPt","footLl","footPt","footPts","md","mhl","nearestMarkerDatum","numFeet","spiderfiedMarkers","spiderfying","ptAverage","reverse","minExtract","clickable","usualPosition","highlightListeners","setZIndexOffset","spiderfied","markerNotToMove","unspiderfiedMarkers","unspiderfying","pt1","pt2","pts","numPts","sumX","sumY","set","bestIndex","bestVal","obj","window","4","cssWithMappingToString","useSourceMap","cssMapping","btoa","sourceMapping","toComment","sources","source","sourceRoot","join","unescape","encodeURIComponent","JSON","stringify","toString","mediaQuery","alreadyImportedModules","5","addStylesClient","_isProduction","isProduction","__WEBPACK_IMPORTED_MODULE_0__listToStyles__","addStylesToDom","newList","mayRemove","domStyle","stylesInDom","refs","addStyle","createStyleElement","styleElement","createElement","head","querySelector","ssrIdKey","noop","parentNode","isOldIE","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","hasDocument","DEBUG","Error","getElementsByTagName","navigator","test","userAgent","toLowerCase","textStore","replacement","filter","Boolean","50","__WEBPACK_IMPORTED_MODULE_1__feature_VectorMarker__","PointTool","51","PolylineTool","52","PolygonTool","53","__WEBPACK_IMPORTED_MODULE_1__feature_Circle__","CircleTool","8","lonlats"],"mappings":"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","file":"plugins/drawLayer.js","sourcesContent":["/*! version:1.4.13 */\ndefine(function() { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./dist/dmap/leaflet/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 165);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 11:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email mocheer@foxmail.com\r\n * @since 2017.5.26\r\n */\nvar _L = L,\n    Layer = _L.Layer,\n    Popup = _L.Popup,\n    DomEvent = _L.DomEvent;\nvar _T = T,\n    $div = _T.div;\n//\n/**\r\n * 弹出层\r\n * @param {props,el}\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (L.Popup2 = Popup.extend({\n  options: {\n    // 最大宽度,设置为 Infinity 居中\n    maxWidth: 0,\n    // // 最小宽度\n    minWidth: 0,\n    // 自动平移，拖动地图以便于popup的最佳显示\n    autoPan: false,\n    //\n    autoPosition: true,\n    //\n    // keepInView: false,\n    // 点击不关闭\n    closeButton: false,\n    //\n    // closeOnClick: false,\n    //\n    autoClose: false\n    //\n    // autoPanPaddingTopLeft: L.point(0, 50)\n  },\n  // update() {\n  // \tPopup.prototype.update.call(this)\n  // },\n  _initLayout: function _initLayout() {\n    var _this = this;\n\n    var that = this;\n    var options = that.options,\n        branch = that.branch;\n    var leaf = options.leaf;\n\n    if (leaf && !branch) {\n      // L.setOptions(that, { maxWidth: Infinity || 0, minWidth: leaf.minWidth || 0 });\n      //\n      var className = options.className;\n\n      var prefix = 'leaflet-popup';\n      var container = that._container = $div(prefix + ' ' + (className || '') + ' leaflet-zoom-animated');\n      var contentNode = that._contentNode = $div('', container); //挂载的对象\n      // 禁止滚轮和点击事件，用于拦截地图事件\n      DomEvent.disableScrollPropagation(container);\n      DomEvent.disableClickPropagation(container);\n      // \n      leaf.el = $div();\n      leaf.props = T.assign({}, leaf.props, {\n        owner: that, // 弹出层对象\n        marker: that._source, // 图元对象\n        data: that._source && that._source.__data // 图元数据\n      });\n      // __vue__\n      this.branch = T.render(leaf).then(function (vm) {\n        var el = vm.$el;\n        if (options.maxWidth) {\n          var style = container.style;\n          style.width = el.clientWidth + 'px';\n          style.height = el.clientHeight + 'px';\n        }\n        _this.setContent(el);\n        return vm;\n      });\n    } else {\n      Popup.prototype._initLayout.call(that);\n    }\n  },\n\n  /**\r\n   * 向下翻转\r\n   */\n  _getAnchor: function _getAnchor() {\n    var point = Popup.prototype._getAnchor.call(this);\n    var map = this._map,\n        container = this._contentNode,\n        marker = this._source,\n        options = this.options;\n\n    var leaf = container.firstChild;\n    // 点\n    // todo 面的弹出\n    if (options.autoPosition && options.leaf && leaf && marker && marker._latlng) {\n      var style = leaf.style;\n\n      style.left = style.top = '0px'; //todo，拖动位置还原\n      var contentHeight = leaf.clientHeight + 20; //20 marginBottom\n\n      var _map$latLngToContaine = map.latLngToContainerPoint(marker._latlng),\n          x = _map$latLngToContaine.x,\n          y = _map$latLngToContaine.y;\n\n      var size = map.getSize();\n      var dx = 16,\n          dy = 0;\n      //\n      if (container.clientHeight) {\n        // 上下边界\n        if (y - contentHeight < 0) {\n          dy = contentHeight;\n          if (y + dy > size.y) {\n            dy -= y + dy - size.y;\n          }\n        }\n      } else {\n        // 上下边界\n        if (y + contentHeight > size.y) {\n          dy = -contentHeight;\n          if (y + dy < 0) {\n            dy -= y + dy;\n          }\n        }\n      }\n      // 右边界\n      if (x + leaf.clientWidth > size.x) {\n        dx = -leaf.clientWidth - dx;\n      }\n      // \n      if (dx || dy) {\n        var _point = point,\n            _x = _point.x,\n            _y = _point.y;\n\n        point = [dx + _x, dy + _y];\n      }\n    }\n    return point;\n  }\n}));\n\n/**\r\n * 默认初始化为Popup\r\n */\nLayer.include({\n  /**\r\n   * \r\n   * @param {*} content \r\n   * @param {*} options \r\n   */\n  bindPopup: function bindPopup(content, options) {\n    if (content instanceof Popup) {\n      L.setOptions(content, options);\n      this._popup = content;\n      content._source = this;\n    } else {\n      if (!this._popup || options) {\n        this._popup = new Popup(options, this);\n      }\n      this._popup.setContent(content);\n    }\n\n    if (!this._popupHandlersAdded) {\n      var events = {\n        click: this._openPopup,\n        keypress: this._onKeyPress,\n        remove: this.closePopup,\n        move: this._movePopup\n      };\n      if (options && options.hover) events.mouseover = this._openPopup;\n      this.on(events);\n      this._popupHandlersAdded = true;\n    }\n    return this;\n  },\n\n  /**\r\n   * \r\n   */\n  unbindPopup: function unbindPopup() {\n    if (this._popup) {\n      this.off({\n        click: this._openPopup,\n        keypress: this._onKeyPress,\n        remove: this.closePopup,\n        move: this._movePopup\n      });\n      this._popupHandlersAdded = false;\n      this._popup = null;\n    }\n    return this;\n  }\n});\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @since 2018-8-3\r\n */\nvar imgs = {};\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (url) {\n  return imgs[url] = imgs[url] || function () {\n    var funcs = [];\n    var img = new Image();\n    var complete = false;\n    var loader = imgs[url] = {\n      then: function then(func) {\n        complete ? func(img) : funcs.push(func);\n      }\n    };\n    img.src = url;\n    img.onload = function () {\n      complete = true;\n      while (funcs.length > 0) {\n        funcs.shift()(img);\n      }\n    };\n    return loader;\n  }();\n});\n\n/**\r\n * 弃用\r\n * ie下，基于 polyfill 的 promise 太影响性能。\r\n */\n// export default url => imgs[url] = imgs[url] || new Promise(reject => {\n//   let img = new Image();\n//   img.src = url;\n//   // 加载src资源时 complete 为true,即使图片尚未加载\n//   // img.addEventListener('load', e => {\n//   //   reject(img);\n//   // })\n//   img.onload = e => { reject(img) }\n// })\n\n/***/ }),\n\n/***/ 165:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__tools_PointTool__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__tools_PolylineTool__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tools_PenTool__ = __webpack_require__(167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__tools_PenFillTool__ = __webpack_require__(168);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tools_RectTool__ = __webpack_require__(169);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__tools_PolygonTool__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tools_CircleTool__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__tools_EllipseTool__ = __webpack_require__(171);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__tools_MilitaryArrowTool__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__tools_TextTool__ = __webpack_require__(173);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__feature_VectorMarker__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__layer_FeatureLayer__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__ = __webpack_require__(174);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path__ = __webpack_require__(175);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css__ = __webpack_require__(176);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//\n// 涉及重写Polyline 的 onAdd 和 flow 有顺序执行的冲突\n\n\n//\nvar _T = T,\n    isArray = _T.isArray;\nvar _L = L,\n    Marker = _L.Marker,\n    Polyline = _L.Polyline,\n    Polygon = _L.Polygon,\n    Circle = _L.Circle,\n    CircleMarker = _L.CircleMarker;\n/**\r\n * 标绘工具-管理器\r\n */\n\nvar DrawLayer = function (_FeatureLayer) {\n  _inherits(DrawLayer, _FeatureLayer);\n\n  function DrawLayer() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, DrawLayer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _FeatureLayer.call.apply(_FeatureLayer, [this].concat(args))), _this), _this.history = [], _this.next = [], _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\r\n   * 用于回滚\r\n   */\n\n  /**\r\n   * 用于前进\r\n   */\n\n  /**\r\n   * 当前的绘制编辑对象\r\n   */\n\n  /**\r\n   * 当前的绘制工具对象\r\n   */\n\n  /**\r\n   * 当前的绘制工具类\r\n   */\n\n\n  /**\r\n   * \r\n   */\n  // options = { reable: false, editable: true, draggable: true }\n  /**\r\n   * \r\n   * @param dmap \r\n   */\n  DrawLayer.prototype.addTo = function addTo(dmap) {\n    dmap.on('draw-end', this.onDrawEnd.bind(this));\n    return _FeatureLayer.prototype.addTo.call(this, dmap);\n  };\n  /**\r\n   * \r\n   * @param {*} marker \r\n   * @param {*} options \r\n   * @param {*} data \r\n   */\n\n\n  DrawLayer.prototype.add = function add(marker, options, data) {\n    //\n    if (options.tooltip) {\n      options.tooltip.draggable = true;\n    }\n\n    _FeatureLayer.prototype.add.call(this, marker, options, data);\n    this._check(marker);\n    //\n  };\n  /**\r\n   * 确保 marker 可编辑拖拽\r\n   */\n\n\n  DrawLayer.prototype._check = function _check(marker) {\n    if (marker) {\n      // 设置为可编辑\n      marker.editEnable();\n      // 设置为可拖拽\n      if (marker.dragging) {\n        marker.dragging.enable();\n      } else {\n        marker.makeDraggable();\n        marker.dragging.enable();\n      }\n    }\n  };\n  /**\r\n   * 改变地图工具\r\n   * @param options {tool,feature,tooltip,popup,onDrawEnd}\r\n   */\n\n\n  DrawLayer.prototype.change = function change(options) {\n    var that = this;\n    if (options) {\n      T.data.pan = false;\n      var dmap = that.dmap,\n          history = that.history,\n          next = that.next;\n\n      switch (options.tool) {\n        case 'pan':\n          that.reset();\n          dmap.cursor = \"-webkit-grab\"; //grab\n          T.data.pan = true;\n          break;\n        case 'clear':\n          //不要break;\n          that.clear();\n        case 'pointer':\n          that.reset();\n          dmap.cursor = 'default';\n          break;\n        case 'go':\n          // 前进\n          var todo = next[next.length - 1];\n          if (todo && todo.restore()) {\n            next.pop();\n          }!history.includes(todo) && history.push(todo);\n          that.reset();\n          break;\n        case 'back':\n          // 回滚\n          var done = history[history.length - 1];\n          if (done && done.reback()) {\n            history.pop();\n          }!next.includes(done) && next.push(done);\n          that.reset();\n          break;\n        default:\n          that.start(options);\n          break;\n      }\n      dmap.do('tool-change', {\n        target: that,\n        options: options\n      });\n    }\n    return that;\n  };\n  /**\r\n   * 启动绘制\r\n   * @param options {tool:'',feature,tooltip,popup}\r\n   */\n\n\n  DrawLayer.prototype.start = function start(options) {\n    var that = this;\n    var map = that.map;\n\n    var type = options.tool;\n    that.cancel();\n    map.dragging.disable();\n    var Tool = that.get(type);\n    var tool = new Tool(that, options);\n    tool.setOptions(options);\n    // if (tool) {\n    //   let mergeOptions = T.assign({}, that.options, options);\n    //   let toolOptions = tool.options;\n    //   toolOptions.feature.draggable = mergeOptions.draggable;\n    //   toolOptions.feature.interactive = false;\n    //   toolOptions.editable = mergeOptions.editable;\n    //   toolOptions.reable = mergeOptions.reable;\n    //   tool.start();\n    // }\n\n    var toolOptions = tool.options;\n    toolOptions.feature.interactive = false;\n    tool.start();\n    that.tool = tool;\n  };\n  /**\r\n   * 获取绘制工具\r\n   * @param tool \r\n   */\n\n\n  DrawLayer.prototype.get = function get(tool) {\n    switch (tool) {\n      case 'point':\n        return __WEBPACK_IMPORTED_MODULE_0__tools_PointTool__[\"a\" /* default */];\n      case 'distance':\n        return __WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__[\"b\" /* DistancePolylineTool */];\n      case 'distancePolygon':\n        return __WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__[\"a\" /* DistancePolygonTool */];\n      case 'polyline':\n        return __WEBPACK_IMPORTED_MODULE_1__tools_PolylineTool__[\"a\" /* default */];\n      case \"pen\":\n        return __WEBPACK_IMPORTED_MODULE_3__tools_PenTool__[\"a\" /* default */];\n      case \"circle\":\n        return __WEBPACK_IMPORTED_MODULE_7__tools_CircleTool__[\"a\" /* default */];\n      case 'ellipse':\n        return __WEBPACK_IMPORTED_MODULE_8__tools_EllipseTool__[\"a\" /* default */];\n      case \"rect\":\n        return __WEBPACK_IMPORTED_MODULE_5__tools_RectTool__[\"a\" /* default */];\n      case \"polygon\":\n        return __WEBPACK_IMPORTED_MODULE_6__tools_PolygonTool__[\"a\" /* default */];\n      case 'penfill':\n        return __WEBPACK_IMPORTED_MODULE_4__tools_PenFillTool__[\"a\" /* default */];\n      case 'militaryArrow':\n        return __WEBPACK_IMPORTED_MODULE_9__tools_MilitaryArrowTool__[\"a\" /* default */];\n      case 'text':\n        return __WEBPACK_IMPORTED_MODULE_10__tools_TextTool__[\"a\" /* default */];\n    }\n  };\n  /**\r\n   * \r\n   */\n\n\n  DrawLayer.prototype.cancel = function cancel() {\n    this.tool && this.tool.cancel();\n    this.tool = null;\n  };\n  /**\r\n   * 重置\r\n   */\n\n\n  DrawLayer.prototype.reset = function reset() {\n    this.cancel();\n    this.map.dragging.enable();\n    //  map.doubleClickZoom.enable();\n  };\n  /**\r\n   * 绘制结束\r\n   */\n\n\n  DrawLayer.prototype.onDrawEnd = function onDrawEnd(e) {\n    var _this2 = this;\n\n    // 重置前进内容\n    this.next.length = 0;\n    //\n    var tool = this.tool;\n\n    if (tool && tool.marker) {\n      // 推进历史\n      !this.history.includes(tool) && this.history.push(tool);\n      //\n      var _tool = tool,\n          options = _tool.options,\n          marker = _tool.marker;\n\n\n      marker.__data = tool.data; //余姚新会标绘\n\n      // 延迟交互\n      if (tool.options.tool !== 'distance' && tool.options.tool !== 'distancePolygon' && !options.reable) {\n        setTimeout(function () {\n          marker.setStyle({\n            interactive: true,\n            draggable: true\n          });\n          _this2._check(marker);\n          if (marker instanceof L.Text === false) _this2._bindText(marker, tool.options);\n        }, 100);\n      }\n      if (options.searchable) {\n        this.dmap.do('search-end', {\n          target: this,\n          event: e,\n          value: this.search(e)\n        });\n      }\n      //\n      options.onDrawEnd && options.onDrawEnd(e);\n      // 绘制模式\n      if (options.multi) {\n        // 重复绘制\n        tool.cancel();\n        tool = this.tool = tool.clone();\n        tool.start();\n      } else if (options.reable) {\n        // 重新绘制\n        tool.cancel();\n        this.tool = tool;\n        tool.start();\n      } else {\n        // 重置\n        this.reset();\n      }\n    } else {\n      this.reset();\n    }\n  };\n  /**\r\n   * 搜索\r\n   */\n\n\n  DrawLayer.prototype.search = function search(e) {\n    var marker = e.marker,\n        result = [];\n\n    if (!marker) {\n      throw 'search error';\n    }\n    var map = marker._map;\n\n    var latLngToLayerPoint = map.latLngToLayerPoint.bind(map);\n    if (marker instanceof Circle) {\n      var _radius = marker._radius;\n\n      var center = marker.getLatLng();\n      map.eachLayer(function (layer) {\n        //\n        if (layer instanceof Marker || layer instanceof __WEBPACK_IMPORTED_MODULE_11__feature_VectorMarker__[\"a\" /* default */]) {\n          if (latLngToLayerPoint(layer.getLatLng()).distanceTo(latLngToLayerPoint(center)) < _radius) {\n            result.push(layer);\n          }\n        } else if (layer instanceof Polyline || layer instanceof Polygon) {\n          // todo 面不太准确\n          var latlngs = layer.getLatLngs();\n          if (isArray(latlngs[0])) {\n            // todo \n            latlngs = latlngs[0];\n          }\n          for (var i = 0, len = latlngs.length; i < len; i++) {\n            if (latLngToLayerPoint(latlngs[i]).distanceTo(latLngToLayerPoint(center)) < _radius) {\n              result.push(layer);\n              break;\n            }\n          }\n        }\n      });\n    } else if (marker instanceof Polygon) {\n      var _rings = marker._rings;\n\n      map.eachLayer(function (layer) {\n        if (layer instanceof Marker || layer instanceof CircleMarker) {\n          if (Object(__WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__[\"a\" /* pointInPolygon */])(latLngToLayerPoint(layer.getLatLng()), _rings[0])) {\n            result.push(layer);\n          }\n        } else if (layer instanceof Polyline || layer instanceof Polygon) {\n          // todo 面不太准确\n          var latlngs = layer.getLatLngs();\n          if (isArray(latlngs[0])) {\n            //todo \n            latlngs = latlngs[0];\n          }\n          for (var i = 0, len = latlngs.length; i < len; i++) {\n            if (Object(__WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__[\"a\" /* pointInPolygon */])(latLngToLayerPoint(latlngs[i]), _rings[0])) {\n              result.push(layer);\n              break;\n            }\n          }\n        }\n      });\n    }\n    return result;\n  };\n\n  return DrawLayer;\n}(__WEBPACK_IMPORTED_MODULE_12__layer_FeatureLayer__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DrawLayer);\n\n/***/ }),\n\n/***/ 166:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DistancePolylineTool; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DistancePolygonTool; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__PolylineTool__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__PolygonTool__ = __webpack_require__(52);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n\n/**\r\n * 测距\r\n */\nvar DistancePolylineTool = function (_PolylineTool) {\n  _inherits(DistancePolylineTool, _PolylineTool);\n\n  function DistancePolylineTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, DistancePolylineTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _PolylineTool.call.apply(_PolylineTool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', weight: 2, showMeasurements: true }\n      /**\r\n       * \r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  DistancePolylineTool.prototype.onMouseMove = function onMouseMove(e) {\n    _PolylineTool.prototype.onMouseMove.call(this, e);\n    this.marker.updateMeasurements();\n  };\n\n  return DistancePolylineTool;\n}(__WEBPACK_IMPORTED_MODULE_0__PolylineTool__[\"a\" /* default */]);\n/**\r\n * 测面\r\n */\nvar DistancePolygonTool = function (_PolygonTool) {\n  _inherits(DistancePolygonTool, _PolygonTool);\n\n  function DistancePolygonTool() {\n    var _temp2, _this2, _ret2;\n\n    _classCallCheck(this, DistancePolygonTool);\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _ret2 = (_temp2 = (_this2 = _possibleConstructorReturn(this, _PolygonTool.call.apply(_PolygonTool, [this].concat(args))), _this2), _this2.options = { feature: { color: 'red', fillOpacity: .5, weight: 1, showMeasurements: true }\n      /**\r\n       * \r\n       */\n    }, _temp2), _possibleConstructorReturn(_this2, _ret2);\n  }\n\n  DistancePolygonTool.prototype.onMouseMove = function onMouseMove(e) {\n    _PolygonTool.prototype.onMouseMove.call(this, e);\n    this.marker.updateMeasurements();\n  };\n\n  return DistancePolygonTool;\n}(__WEBPACK_IMPORTED_MODULE_1__PolygonTool__[\"a\" /* default */]);\n\n/***/ }),\n\n/***/ 167:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\n\n//\nvar _L = L,\n    Polyline = _L.Polyline;\n/**\r\n * 铅笔工具\r\n */\n\nvar PenTool = function (_Tool) {\n  _inherits(PenTool, _Tool);\n\n  function PenTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PenTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red' }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PenTool.prototype.start = function start() {\n    this.map.once('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PenTool.prototype.cancel = function cancel() {\n    this.map.off('mousedown', this.onMouseDown, this);\n    this.map.off('mousemove', this.onMouseMove, this);\n  };\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\n\n\n  PenTool.prototype.onMouseDown = function onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        options = this.options,\n        map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer);\n      map.once('mouseup', this.onEnd, this);\n      map.on('mousemove', this.onMouseMove, this);\n    }\n  };\n  /**\r\n   * 绘制ing\r\n   * @param e \r\n   */\n\n\n  PenTool.prototype.onMouseMove = function onMouseMove(e) {\n    this.marker.addLatLng(e.latlng);\n  };\n\n  return PenTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PenTool);\n\n/***/ }),\n\n/***/ 168:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n//\n\nvar PenFillTool = function (_Tool) {\n  _inherits(PenFillTool, _Tool);\n\n  function PenFillTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PenFillTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', fillOpacity: .5, weight: 1 }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PenFillTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PenFillTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n  };\n  /**\r\n   * 绘制\r\n   */\n\n\n  PenFillTool.prototype._onMouseDown = function _onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        options = this.options,\n        map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      marker = this.marker = L.rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('mouseup', this.onEnd, this);\n      // map.off('mousedown', this.onMouseDown);\n    }\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  PenFillTool.prototype.onMouseMove = function onMouseMove(e) {\n    this.marker.addLatLng(e.latlng);\n  };\n\n  return PenFillTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PenFillTool);\n\n/***/ }),\n\n/***/ 169:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n//\nvar _L = L,\n    Rectangle = _L.Rectangle;\n/**\r\n * 矩形绘制工具\r\n */\n\nvar RectTool = function (_Tool) {\n  _inherits(RectTool, _Tool);\n\n  function RectTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, RectTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = {\n      feature: {\n        color: 'red',\n        fillOpacity: .5,\n        weight: 1\n      }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  RectTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.once('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  RectTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.sp = null;\n  };\n  /**\r\n   * 绘制\r\n   * @param e \r\n   */\n\n\n  RectTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var latlng = e.latlng;\n\n    this.clear(); //重复绘制，先移除旧图元\n    //\n    this.marker = new Rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer);\n    this.sp = latlng;\n    map.on('mousemove', this.onMouseMove, this);\n    map.once('mouseup', this.onEnd, this);\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  RectTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker;\n    var latlng = e.latlng;\n\n    marker.setBounds(L.latLngBounds(this.sp, latlng));\n    marker.redraw();\n  };\n\n  return RectTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (RectTool);\n\n/***/ }),\n\n/***/ 170:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\nvar _L = L,\n    Circle = _L.Circle;\n/**\r\n * \r\n */\n\nCircle.include({\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var _getLatLng = this.getLatLng(),\n        lat = _getLatLng.lat,\n        lng = _getLatLng.lng;\n\n    this.options.radius = this._mRadius;\n    return {\n      type: 'Feature',\n      properties: {},\n      geometry: { coordinates: [lng, lat], type: 'Circle' }\n    };\n  }\n});\n/**\r\n * \r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (Circle.extend({\n  /**\r\n   * 原L.Circle在非经纬度等间隔投影的情况下是椭圆\r\n   * 确保是圆形，用于标绘，但实际上是不推荐的，因为半径已经不算是实际的半径\r\n   */\n  _updateBounds: function _updateBounds() {\n    this._radius = this._radiusY;\n    Circle.prototype._updateBounds.call(this);\n  }\n}));\n\n/***/ }),\n\n/***/ 171:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CircleTool__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_Ellipse__ = __webpack_require__(20);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n\n/**\r\n * 椭圆绘制工具\r\n */\n\nvar EllipseTool = function (_CircleTool) {\n  _inherits(EllipseTool, _CircleTool);\n\n  function EllipseTool() {\n    _classCallCheck(this, EllipseTool);\n\n    return _possibleConstructorReturn(this, _CircleTool.apply(this, arguments));\n  }\n\n  /**\r\n   * \r\n   * @param e \r\n   */\n  EllipseTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var options = this.options;\n    var map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n\n    this.clear(); //重复绘制，先移除旧图元\n    //\n    this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_Ellipse__[\"a\" /* default */](latlng, 0, options.feature).addTo(layer);\n    map.on('mousemove', this.onMouseMove, this);\n    map.once('mouseup', this.onEnd, this);\n  };\n\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  EllipseTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker;\n\n    var latlng = e.latlng;\n    var center = marker.getLatLng();\n    var latlng1 = latlng.clone();\n    var latlng2 = latlng.clone();\n    latlng1.lat = center.lat;\n    latlng2.lng = center.lng;\n    var r = latlng1.distanceTo(center);\n    var ry = latlng2.distanceTo(center);\n    //\n    marker.setRadius(r);\n    marker.setRadiusY(ry);\n    marker.redraw();\n  };\n\n  return EllipseTool;\n}(__WEBPACK_IMPORTED_MODULE_0__CircleTool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EllipseTool);\n\n/***/ }),\n\n/***/ 172:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_MilitaryArrow__ = __webpack_require__(21);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n//\nvar _L = L,\n    LatLng = _L.LatLng;\n/**\r\n * 军标箭头\r\n */\n\nvar MilitaryArrowTool = function (_Tool) {\n  _inherits(MilitaryArrowTool, _Tool);\n\n  function MilitaryArrowTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, MilitaryArrowTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { fillColor: 'red', weight: 1, fillOpacity: .5, color: '#333' }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  MilitaryArrowTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  MilitaryArrowTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.mp = null;\n  };\n  /**\r\n   * 绘制\r\n   */\n\n\n  MilitaryArrowTool.prototype._onMouseDown = function _onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var feature = options.feature;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      feature.draggable = false;\n      // feature.interactive = false;\n      marker = this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_MilitaryArrow__[\"a\" /* default */]([latlng], feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('dblclick', this.onEnd, this);\n    } else {\n      this.mp = null;\n    }\n    this.lp = e.layerPoint;\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  MilitaryArrowTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker,\n        mp = this.mp,\n        latlng = e.latlng,\n        layerPoint = e.layerPoint,\n        latlngs = marker.getLatLngs();\n\n    if (!mp) {\n      var lp = this.lp;\n\n      marker.addLatLng(latlng);\n      this.mp = latlng;\n    } else {\n      mp.lat = latlng.lat;\n      mp.lng = latlng.lng;\n      // marker.getBounds().extend(mp)\n      marker.redraw();\n    }\n  };\n\n  return MilitaryArrowTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (MilitaryArrowTool);\n\n/***/ }),\n\n/***/ 173:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__PointTool__ = __webpack_require__(50);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\n\n\n//\n/**\r\n * 点图元绘制工具\r\n */\n\nvar TextTool = function (_PointTool) {\n  _inherits(TextTool, _PointTool);\n\n  function TextTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, TextTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _PointTool.call.apply(_PointTool, [this].concat(args))), _this), _this.options = { feature: {}\n      /**\r\n       * 绘制-start\r\n       * @param e \r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  TextTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var latlng = e.latlng;\n    var options = this.options,\n        layer = this.layer;\n    //\n\n    this.marker = L.text(latlng, options.text, options.feature).addTo(layer);\n    this.onEnd();\n  };\n\n  return TextTool;\n}(__WEBPACK_IMPORTED_MODULE_0__PointTool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextTool);\n\n/***/ }),\n\n/***/ 174:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pointInPolygon; });\n/* unused harmony export distance */\n/* unused harmony export toRotate */\n/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.10\r\n */\n/**\r\n * 点在多边形\r\n */\nvar pointInPolygon = function pointInPolygon(p, arr) {\n  var nCross = 0;\n  if (arr.length > 0) {\n    for (var i = 0; i < arr.length; i++) {\n      var p0 = p,\n          p1 = arr[i],\n          p2 = arr[(i + 1) % arr.length];\n      // 求解 y=p.y 与 p1p2 的交点\n      if (p1.y == p2.y || p0.y < (p1.y <= p2.y ? p1.y : p2.y) || p0.y >= (p1.y >= p2.y ? p1.y : p2.y)) // p1p2 与 y=p0.y平行,交点在p1p2延长线上,交点在p1p2延长线上 \n        continue;\n      if ((p0.y - p1.y) * (p2.x - p1.x) / (p2.y - p1.y) + p1.x > p0.x) nCross++; //交点的X坐标大于p0的x坐标，只统计单边交点 \t\t\t\n    }\n  }\n  // 单边交点为偶数，点在多边形之外 --- \n  return nCross % 2 == 1;\n};\n/**\r\n* \r\n* @param s start point\r\n* @param p end point\r\n*/\nvar distance = function distance(s, p) {\n  return Math.sqrt((p[0] - s[0]) * (p[0] - s[0]) + (p[1] - s[1]) * (p[1] - s[1]));\n};\n/**\r\n * \r\n * @param p \r\n * @param angle \r\n */\nvar toRotate = function toRotate(p, angle) {\n  angle = Math.atan2(p.y, p.x) + angle;\n  var r = Math.sqrt(p.x * p.x + p.y * p.y); //半径\n  return {\n    x: Math.cos(angle) * r,\n    y: Math.sin(angle) * r\n  };\n};\n\n/***/ }),\n\n/***/ 175:\n/***/ (function(module, exports) {\n\n/**\n * @see https://github.com/ProminentEdge/leaflet-measure-path\n */\n!function () {\n\n  L.Marker.Measurement = L.Layer.extend({\n    options: {\n      pane: 'markerPane'\n    },\n\n    initialize: function initialize(latlng, measurement, title, rotation, options) {\n      L.setOptions(this, options);\n\n      this._latlng = latlng;\n      this._measurement = measurement;\n      this._title = title;\n      this._rotation = rotation;\n    },\n\n    addTo: function addTo(map) {\n      map.addLayer(this);\n      return this;\n    },\n\n    onAdd: function onAdd(map) {\n      this._map = map;\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      var el = this._element = L.DomUtil.create('div', 'leaflet-zoom-animated leaflet-measure-path-measurement', pane);\n      var inner = L.DomUtil.create('div', '', el);\n      inner.title = this._title;\n      inner.innerHTML = this._measurement;\n\n      map.on('zoomanim', this._animateZoom, this);\n\n      this._setPosition();\n    },\n\n    onRemove: function onRemove(map) {\n      map.off('zoomanim', this._animateZoom, this);\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      pane.removeChild(this._element);\n      this._map = null;\n    },\n\n    _setPosition: function _setPosition() {\n      L.DomUtil.setPosition(this._element, this._map.latLngToLayerPoint(this._latlng));\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    },\n\n    _animateZoom: function _animateZoom(opt) {\n      var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\n      L.DomUtil.setPosition(this._element, pos);\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    }\n  });\n\n  L.marker.measurement = function (latLng, measurement, title, rotation, options) {\n    return new L.Marker.Measurement(latLng, measurement, title, rotation, options);\n  };\n\n  var formatDistance = function formatDistance(d) {\n    var unit, feet;\n\n    if (this._measurementOptions.imperial) {\n      feet = d / 0.3048;\n      if (feet > 3000) {\n        d = d / 1609.344;\n        unit = 'mi';\n      } else {\n        d = feet;\n        unit = 'ft';\n      }\n    } else {\n      if (d > 1000) {\n        d = d / 1000;\n        unit = 'km';\n      } else {\n        unit = 'm';\n      }\n    }\n\n    if (d < 100) {\n      return d.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(d) + ' ' + unit;\n    }\n  };\n\n  var formatArea = function formatArea(a) {\n    var unit, sqfeet;\n\n    if (this._measurementOptions.imperial) {\n      if (a > 404.685642) {\n        a = a / 4046.85642;\n        unit = 'ac';\n      } else {\n        a = a / 0.09290304;\n        unit = 'ft²';\n      }\n    } else {\n      if (a > 1000000) {\n        a = a / 1000000;\n        unit = 'km²';\n      } else {\n        unit = 'm²';\n      }\n    }\n\n    if (a < 100) {\n      return a.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(a) + ' ' + unit;\n    }\n  };\n\n  var RADIUS = 6378137;\n  // ringArea function copied from geojson-area\n  // (https://github.com/mapbox/geojson-area)\n  // This function is distributed under a separate license,\n  // see LICENSE.md.\n  var ringArea = function ringArea(coords) {\n    var rad = function rad(_) {\n      return _ * Math.PI / 180;\n    };\n    var p1,\n        p2,\n        p3,\n        lowerIndex,\n        middleIndex,\n        upperIndex,\n        area = 0,\n        coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n      for (var i = 0; i < coordsLength; i++) {\n        if (i === coordsLength - 2) {\n          // i = N-2\n          lowerIndex = coordsLength - 2;\n          middleIndex = coordsLength - 1;\n          upperIndex = 0;\n        } else if (i === coordsLength - 1) {\n          // i = N-1\n          lowerIndex = coordsLength - 1;\n          middleIndex = 0;\n          upperIndex = 1;\n        } else {\n          // i = 0 to N-3\n          lowerIndex = i;\n          middleIndex = i + 1;\n          upperIndex = i + 2;\n        }\n        p1 = coords[lowerIndex];\n        p2 = coords[middleIndex];\n        p3 = coords[upperIndex];\n        area += (rad(p3.lng) - rad(p1.lng)) * Math.sin(rad(p2.lat));\n      }\n\n      area = area * RADIUS * RADIUS / 2;\n    }\n\n    return Math.abs(area);\n  };\n\n  var circleArea = function circleArea(d) {\n    var rho = d / RADIUS;\n    return 2 * Math.PI * RADIUS * RADIUS * (1 - Math.cos(rho));\n  };\n\n  var override = function override(method, fn, hookAfter) {\n    if (!hookAfter) {\n      return function () {\n        method.apply(this, arguments);\n        return fn.apply(this, arguments);\n      };\n    } else {\n      return function () {\n        fn.apply(this, arguments);\n        return method.apply(this, arguments);\n      };\n    }\n  };\n\n  L.Polyline.include({\n    showMeasurements: function showMeasurements(options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        minPixelDistance: 30,\n        showDistances: true,\n        showArea: true,\n        lang: {\n          totalLength: 'Total length',\n          totalArea: 'Total area',\n          segmentLength: 'Segment length'\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function hideMeasurements() {\n      this._map.off('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Polyline.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Polyline.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLngs: override(L.Polyline.prototype.setLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    spliceLatLngs: override(L.Polyline.prototype.spliceLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    formatDistance: formatDistance,\n    formatArea: formatArea,\n\n    updateMeasurements: function updateMeasurements() {\n      if (!this._measurementLayer) return this;\n\n      var latLngs = this.getLatLngs(),\n          isPolygon = this instanceof L.Polygon,\n          options = this._measurementOptions,\n          totalDist = 0,\n          formatter,\n          ll1,\n          ll2,\n          p1,\n          p2,\n          pixelDist,\n          dist;\n\n      if (latLngs && latLngs.length && L.Util.isArray(latLngs[0])) {\n        // Outer ring is stored as an array in the first element,\n        // use that instead.\n        latLngs = latLngs[0];\n      }\n\n      this._measurementLayer.clearLayers();\n\n      if (this._measurementOptions.showDistances && latLngs.length > 1) {\n        formatter = this._measurementOptions.formatDistance || L.bind(this.formatDistance, this);\n\n        for (var i = 1, len = latLngs.length; isPolygon && i <= len || i < len; i++) {\n          ll1 = latLngs[i - 1];\n          ll2 = latLngs[i % len];\n          dist = ll1.distanceTo(ll2);\n          totalDist += dist;\n\n          p1 = this._map.latLngToLayerPoint(ll1);\n          p2 = this._map.latLngToLayerPoint(ll2);\n\n          pixelDist = p1.distanceTo(p2);\n\n          if (pixelDist >= options.minPixelDistance) {\n            L.marker.measurement(this._map.layerPointToLatLng([(p1.x + p2.x) / 2, (p1.y + p2.y) / 2]), formatter(dist), options.lang.segmentLength, this._getRotation(ll1, ll2), options).addTo(this._measurementLayer);\n          }\n        }\n\n        // Show total length for polylines\n        if (!isPolygon) {\n          L.marker.measurement(ll2, formatter(totalDist), options.lang.totalLength, 0, options).addTo(this._measurementLayer);\n        }\n      }\n\n      if (isPolygon && options.showArea && latLngs.length > 2) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = ringArea(latLngs);\n        L.marker.measurement(this.getBounds().getCenter(), formatter(area), options.lang.totalArea, 0, options).addTo(this._measurementLayer);\n      }\n\n      return this;\n    },\n\n    _getRotation: function _getRotation(ll1, ll2) {\n      var p1 = this._map.project(ll1),\n          p2 = this._map.project(ll2);\n\n      return Math.atan((p2.y - p1.y) / (p2.x - p1.x));\n    }\n  });\n\n  L.Polyline.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n\n  L.Circle.include({\n    showMeasurements: function showMeasurements(options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        showArea: true,\n        lang: {\n          totalArea: 'Total area'\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function hideMeasurements() {\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Circle.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Circle.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLng: override(L.Circle.prototype.setLatLng, function () {\n      this.updateMeasurements();\n    }),\n\n    setRadius: override(L.Circle.prototype.setRadius, function () {\n      this.updateMeasurements();\n    }),\n\n    formatArea: formatArea,\n\n    updateMeasurements: function updateMeasurements() {\n      if (!this._measurementLayer) return;\n\n      var latLng = this.getLatLng(),\n          options = this._measurementOptions,\n          formatter = options.formatArea || L.bind(this.formatArea, this);\n\n      this._measurementLayer.clearLayers();\n\n      if (options.showArea) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = circleArea(this.getRadius());\n        L.marker.measurement(latLng, formatter(area), options.lang.totalArea, 0, options).addTo(this._measurementLayer);\n      }\n    }\n  });\n\n  L.Circle.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n}();\n\n/***/ }),\n\n/***/ 176:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(177);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = __webpack_require__(5).default\nvar update = add(\"10279068\", content, true, {});\n\n/***/ }),\n\n/***/ 177:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".leaflet-measure-path-measurement{position:absolute;font-size:10px;color:#000;text-shadow:-1px 0 0 #fff,-1px -1px 0 #fff,0 -1px 0 #fff,1px -1px 0 #fff,1px 0 0 #fff,1px 1px 0 #fff,0 1px 0 #fff,-1px 1px 0 #fff;white-space:nowrap;transform-origin:0;pointer-events:none}.leaflet-measure-path-measurement>div{position:relative;margin-top:-25%;left:-50%}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_Loader__ = __webpack_require__(12);\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\nvar _L = L,\n    CircleMarker = _L.CircleMarker;\n\n\n\n/**\r\n * 矢量图元\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (L.VectorMarker = L.VectorMarker || CircleMarker.extend({\n  /**\r\n   * \r\n   */\n  options: {\n    // 闪烁,常用于水雨情预警\n    // glow: false,\n    // 线条粗细\n    weight: 1,\n    // 颜色\n    color: '#000',\n    // 是否绘制线条\n    stroke: true,\n    // 是否填充\n    fill: true,\n    // 圆的半径，等腰三角形的底边长\n    radius: 5,\n    // 弧度单位 Math.random() * 2 * Math.PI 三角形角度 \n    angle: 0,\n    // 移入上调层级\n    riseOnHover: true\n  },\n  initialize: function initialize(latlng, options) {\n    CircleMarker.prototype.initialize.call(this, latlng, options);\n    this._radiusY = this.options.radiusY;\n  },\n  // _updateBounds: function () {\n  //   var r = this._radius,\n  //     r2 = this._radiusY || r,\n  //     w = this._clickTolerance() ,\n  //     p = [r + w, r2 + w];\n  //   this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\n  // },\n  // _empty: function () {\n  //   return this._radius && !this._renderer._bounds.intersects(this._pxBounds);\n  // },\n  // \n  // _containsPoint: function (p) {\n  //   return p.distanceTo(this._point) <= this._radius + this._clickTolerance();\n  // },\n\n  _clickTolerance: function _clickTolerance() {\n    return CircleMarker.prototype._clickTolerance.call(this) + 1;\n  },\n  /**\r\n   * @override\r\n   */\n  _project: function _project() {\n    this._point = this._map.latLngToLayerPoint(this._latlng);\n    var options = this.options;\n    var offset = options.offset,\n        icon = options.icon;\n    // 图元整体偏移\n\n    if (offset) {\n      this._point = this._point.add(offset);\n    }\n    // 图元锚点偏移\n    if (icon && icon.iconAnchor) {\n      this._point = this._point.subtract(icon.iconAnchor);\n    }\n    this._updateBounds();\n  },\n\n  /**\r\n   * @override\r\n   */\n  beforeAdd: function beforeAdd(map) {\n    var _this = this;\n\n    var options = this.options;\n\n    CircleMarker.prototype.beforeAdd.call(this, map);\n    // 确保 renderer is canvas,且canvas是唯一的。否则图层相互覆盖影响;\n    if (!map.options.preferCanvas && !options.renderer) {\n      options.renderer = map.__canvas = map.__canvas || L.canvas();\n    }\n    // 用于旋转\n    this.on('transformed', function (e) {\n      options.angle = e.rotation;\n      _this.redraw();\n    });\n  },\n\n  /**\r\n   * @override\r\n   * todo 优化性能，预执行\r\n   */\n  _updatePath: function _updatePath() {\n    var that = this;\n    var options = that.options,\n        _renderer = that._renderer;\n    var src = options.src;\n\n    src = src || 'circle';\n    switch (src) {\n      case 'triangle':\n        return _renderer._updateTriangle(that);\n      case 'rect':\n        if (!options.radiusY) {\n          that._radius = that._radiusY = 8;\n        }\n        return _renderer._updateRect(that);\n      case 'circle':\n        return _renderer._updateCircle(that);\n      case 'line':\n        //旋转句柄,用于编辑旋转\n        return _renderer._updateLine(that);\n      case 'balloon':\n        //\n        return _renderer._updateBalloon(that);\n      default:\n        if (that._loader) {\n          _renderer._updateIcon(that);\n        } else {\n          // todo\n          if (src && src.indexOf('/') !== 0 && !src.includes('http')) {\n            src = options.src = T + src;\n          }!that.loader && (that.loader = Object(__WEBPACK_IMPORTED_MODULE_0__utils_Loader__[\"a\" /* default */])(src)).then(function (img) {\n            that._loader = img;\n            that._radius = img.width / 2;\n            that._radiusY = img.height / 2;\n            that.redraw();\n          });\n        }\n        break;\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ 20:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\nvar _L = L,\n    Circle = _L.Circle;\n/**\r\n * \r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Circle.extend({\n  /**\r\n   * \r\n   */\n  initialize: function initialize(latlng, options, legacyOptions) {\n    Circle.prototype.initialize.call(this, latlng, options, legacyOptions);\n    this._mRadiusY = this.options.radiusY;\n  },\n  /**\r\n   * \r\n   */\n  _project: function _project() {\n    var _latlng = this._latlng,\n        map = this._map,\n        _mRadius = this._mRadius,\n        _mRadiusY = this._mRadiusY;\n\n    _mRadiusY = _mRadiusY || _mRadius;\n    // let { crs } = map.options;\n    var crs = L.CRS.EPSG3857; // 暂时，因为在其他坐标投影中暂时有问题。\n    var _point = this._point = map.latLngToLayerPoint(_latlng);\n    //\n    var latlng2 = crs.unproject(crs.project(_latlng).subtract([_mRadius, 0]));\n    var latlng3 = crs.unproject(crs.project(_latlng).subtract([_mRadiusY, 0]));\n    //\n    this._radius = _point.x - map.latLngToLayerPoint(latlng2).x;\n    this._radiusY = _point.x - map.latLngToLayerPoint(latlng3).x;\n    this._updateBounds();\n    //\n  },\n  /**\r\n   * \r\n   */\n  setRadiusY: function setRadiusY(radiusY) {\n    this._mRadiusY = radiusY;\n    return this.redraw();\n  },\n  /**\r\n   * \r\n   */\n  getRadiusY: function getRadiusY() {\n    return this._mRadiusY;\n  },\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var _getLatLng = this.getLatLng(),\n        lat = _getLatLng.lat,\n        lng = _getLatLng.lng;\n\n    this.options.radius = this._mRadius;\n    this.options.radiusY = this._mRadiusY;\n    return {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [lng, lat],\n        type: 'Ellipse'\n      }\n    };\n  }\n}));\n\n/**\r\n * @see https://github.com/jdfergason/Leaflet.Ellipse\r\n */\n\n// L.Canvas.include ({\n//   _updateEllipse: function (layer) {\n//       if (layer._empty()) { return; }\n\n//       var p = layer._point,\n//           ctx = this._ctx,\n//           r = layer._radiusX,\n//           s = (layer._radiusY || r) / r;\n\n//       ctx.save();\n\n//       ctx.translate(p.x, p.y);\n//       if (layer._tilt !== 0) {\n//           ctx.rotate( layer._tilt );\n//       }\n//       if (s !== 1) {\n//           ctx.scale(1, s);\n//       }\n\n//       ctx.beginPath();\n//       ctx.arc(0, 0, r, 0, Math.PI * 2);\n//       ctx.restore();\n\n//       this._fillStroke(ctx, layer);\n//   },\n// });\n\n// export default L.Path.extend({\n\n//   options: {\n//       fill: true,\n//       startAngle: 0,\n//       endAngle: 359.9\n//   },\n\n//   initialize: function (latlng, radii, tilt, options) {\n\n//       L.setOptions(this, options);\n//       this._latlng = L.latLng(latlng);\n\n//       if (tilt) {\n//           this._tiltDeg = tilt;\n//       } else {\n//           this._tiltDeg = 0;\n//       }\n\n//       if (radii) {\n//           this._mRadiusX = radii[0];\n//           this._mRadiusY = radii[1];\n//       }\n//   },\n\n//   setRadius: function (radii) {\n//       this._mRadiusX = radii[0];\n//       this._mRadiusY = radii[1];\n//       return this.redraw();\n//   },\n\n//   getRadius: function () {\n//       return new L.point(this._mRadiusX, this._mRadiusY);\n//   },\n\n//   setTilt: function (tilt) {\n//       this._tiltDeg = tilt;\n//       return this.redraw();\n//   },\n\n//   getBounds: function () {\n//       // TODO respect tilt (bounds are too big)\n//       var lngRadius = this._getLngRadius(),\n//           latRadius = this._getLatRadius(),\n//           latlng = this._latlng;\n\n//       return new L.LatLngBounds(\n//           [latlng.lat - latRadius, latlng.lng - lngRadius],\n//           [latlng.lat + latRadius, latlng.lng + lngRadius]);\n//   },\n\n//   // @method setLatLng(latLng: LatLng): this\n//   // Sets the position of a circle marker to a new location.\n//   setLatLng: function (latlng) {\n//       this._latlng = L.latLng(latlng);\n//       this.redraw();\n//       return this.fire('move', {latlng: this._latlng});\n//   },\n\n//   // @method getLatLng(): LatLng\n//   // Returns the current geographical position of the circle marker\n//   getLatLng: function () {\n//       return this._latlng;\n//   },\n\n//   setStyle: L.Path.prototype.setStyle,\n\n//   _project: function () {\n//       var lngRadius = this._getLngRadius(),\n//           latRadius = this._getLatRadius(),\n//           latlng = this._latlng,\n//           pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]),\n//           pointBelow = this._map.latLngToLayerPoint([latlng.lat - latRadius, latlng.lng]);\n\n//       this._point = this._map.latLngToLayerPoint(latlng);\n//       this._radiusX = Math.max(this._point.x - pointLeft.x, 1);\n//       this._radiusY = Math.max(pointBelow.y - this._point.y, 1);\n//       this._tilt = Math.PI * this._tiltDeg / 180;\n//       this._endPointParams = this._centerPointToEndPoint();\n//       this._updateBounds();\n//   },\n\n//   _updateBounds: function () {\n//       // http://math.stackexchange.com/questions/91132/how-to-get-the-limits-of-rotated-ellipse\n//       var sin = Math.sin(this._tilt);\n//       var cos = Math.cos(this._tilt);\n//       var sinSquare = sin * sin;\n//       var cosSquare = cos * cos;\n//       var aSquare = this._radiusX * this._radiusX;\n//       var bSquare = this._radiusY * this._radiusY;\n//       var halfWidth = Math.sqrt(aSquare*cosSquare+bSquare*sinSquare);\n//       var halfHeight = Math.sqrt(aSquare*sinSquare+bSquare*cosSquare);\n//       var w = this._clickTolerance();\n//       var p = [halfWidth + w, halfHeight + w];\n//       this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\n//   },\n\n//   _update: function () {\n//       if (this._map) {\n//           this._updatePath();\n//       }\n//   },\n\n//   _updatePath: function () {\n//       this._renderer._updateEllipse(this);\n//   },\n\n//   _getLatRadius: function () {\n//       return (this._mRadiusY / 40075017) * 360;\n//   },\n\n//   _getLngRadius: function () {\n//       return ((this._mRadiusX / 40075017) * 360) / Math.cos((Math.PI / 180) * this._latlng.lat);\n//   },\n\n//   _centerPointToEndPoint: function () {\n//       // Convert between center point parameterization of an ellipse\n//       // too SVG's end-point and sweep parameters.  This is an\n//       // adaptation of the perl code found here:\n//       // http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Paths\n//       var c = this._point,\n//           rx = this._radiusX,\n//           ry = this._radiusY,\n//           theta2 = (this.options.startAngle + this.options.endAngle) * (Math.PI / 180),\n//           theta1 = this.options.startAngle * (Math.PI / 180),\n//           delta = this.options.endAngle,\n//           phi = this._tiltDeg * (Math.PI / 180);\n\n//       // Determine start and end-point coordinates\n//       var x0 = c.x + Math.cos(phi) * rx * Math.cos(theta1) +\n//           Math.sin(-phi) * ry * Math.sin(theta1);\n//       var y0 = c.y + Math.sin(phi) * rx * Math.cos(theta1) +\n//           Math.cos(phi) * ry * Math.sin(theta1);\n\n//       var x1 = c.x + Math.cos(phi) * rx * Math.cos(theta2) +\n//           Math.sin(-phi) * ry * Math.sin(theta2);\n//       var y1 = c.y + Math.sin(phi) * rx * Math.cos(theta2) +\n//           Math.cos(phi) * ry * Math.sin(theta2);\n\n//       var largeArc = (delta > 180) ? 1 : 0;\n//       var sweep = (delta > 0) ? 1 : 0;\n\n//       return {'x0': x0, 'y0': y0, 'tilt': phi, 'largeArc': largeArc,\n//           'sweep': sweep, 'x1': x1, 'y1': y1};\n//   },\n\n//   _empty: function () {\n//       return this._radiusX && this._radiusY && !this._renderer._bounds.intersects(this._pxBounds);\n//   },\n\n//   _containsPoint : function (p) {\n//       // http://stackoverflow.com/questions/7946187/point-and-ellipse-rotated-position-test-algorithm\n//       var sin = Math.sin(this._tilt);\n//       var cos = Math.cos(this._tilt);\n//       var dx = p.x - this._point.x;\n//       var dy = p.y - this._point.y;\n//       var sumA = cos * dx + sin * dy;\n//       var sumB = sin * dx - cos * dy;\n//       return sumA * sumA / (this._radiusX * this._radiusX)  + sumB * sumB / (this._radiusY * this._radiusY) <= 1;\n//   }\n// });\n\n/***/ }),\n\n/***/ 21:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_Bezier__ = __webpack_require__(36);\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017-6-15\r\n */\n\nvar _L = L,\n    Polyline = _L.Polyline,\n    Polygon = _L.Polygon,\n    toPoint = _L.point;\nvar _Polyline$prototype = Polyline.prototype,\n    _projectLatlngs2 = _Polyline$prototype._projectLatlngs,\n    _toGeoJSON = _Polyline$prototype.toGeoJSON;\n/**\r\n * 军标箭头\r\n * \r\n *  在transofrom控件拖拽旋转中会报错\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (L.MilitaryArrow = L.MilitaryArrow || Polyline.extend({\n  /**\r\n   * @param options\r\n   */\n  options: {\n    fill: true\n    // noClip: true // 已重写 clipPoints\n  },\n  /**\r\n   * @override\r\n   */\n  _projectLatlngs: function _projectLatlngs(latlngs, _rings, projectedBounds) {\n    _projectLatlngs2.call(this, latlngs, _rings, projectedBounds);\n    var temp = this._rings;\n    temp = temp[0].map(function (p) {\n      return [p.x, p.y];\n    });\n    temp = Object(__WEBPACK_IMPORTED_MODULE_0__utils_Bezier__[\"a\" /* coattail */])(temp, 0.005, this.options);\n\n    var _rings_temp = this._rings_temp = [[]],\n        result = _rings_temp[0];\n\n    for (var i = 0, l = temp.length; i < l; i++) {\n      result[i] = toPoint(temp[i][0], temp[i][1]);\n      projectedBounds.extend(result[i]);\n    }\n  },\n\n  /**\r\n   * 重写\r\n   */\n  _clipPoints: function _clipPoints() {\n    this._parts = this._rings_temp;\n  },\n\n  /**\r\n   * \r\n   */\n  _containsPoint: function _containsPoint(p) {\n    return Polygon.prototype._containsPoint.call(this, p, true);\n  },\n\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var json = _toGeoJSON.call(this);\n    json.geometry.type = 'MilitaryArrow';\n    return json;\n  }\n}));\n\n/***/ }),\n\n/***/ 22:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = listToStyles;\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nfunction listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ }),\n\n/***/ 29:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_LonLats__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__polyfill_Popup__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__feature_VectorMarker__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__feature_Typhoon__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__feature_Ellipse__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__feature_Text__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__feature_Text___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__feature_Text__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__feature_Heat__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__feature_Heat___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__feature_Heat__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feature_Balloon__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feature_Balloon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__feature_Balloon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__feature_River__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__feature_MilitaryArrow__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_overlapping_marker_spiderfier_leaflet_build_oms__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_overlapping_marker_spiderfier_leaflet_build_oms___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_overlapping_marker_spiderfier_leaflet_build_oms__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2016-11-4\r\n */\n\n\n\n\n\n\n\n\n\n\n\n// import { AntPath, antPath } from 'leaflet-ant-path';\n//\nvar _T = T,\n    isFunction = _T.isFunction,\n    isArray = _T.isArray,\n    fmt = _T.fmt,\n    $assign = _T.assign;\nvar _L = L,\n    toGroup = _L.featureGroup,\n    toMarker = _L.marker,\n    toPolyline = _L.polyline,\n    toPolygon = _L.polygon,\n    toCircle = _L.circle,\n    toIcon = _L.icon,\n    toDivIcon = _L.divIcon,\n    toImageOverlay = _L.imageOverlay;\n\nvar toArray = function toArray(data) {\n  return isArray(data) ? data : [data];\n};\nvar toOptions = function toOptions(options, data) {\n  return isFunction(options) ? options(data) : options || {};\n};\n/**\r\n * 要素管理的通用图层\r\n */\n\nvar FeatureLayer = function (_T$Class) {\n  _inherits(FeatureLayer, _T$Class);\n\n  // 样式，图层配置\n  /**\r\n   * \r\n   * @param {*} options \r\n   */\n  function FeatureLayer(options) {\n    _classCallCheck(this, FeatureLayer);\n\n    var _this = _possibleConstructorReturn(this, _T$Class.call(this));\n\n    _this.initHook();\n    // 台风模块需要设置预报机构\n    _this.config(options);\n    return _this;\n  }\n  /**\r\n   * \r\n   */\n  // 预留，提供给菜单，用于绑定检索\n\n\n  FeatureLayer.prototype.initHook = function initHook() {\n    var _this2 = this;\n\n    var that = this;\n    that._source = [];\n    ['addPoints', 'addPolylines', 'addPolygons', 'addTyphoon', 'addAlarmLines'].forEach(function (name) {\n      _this2.addFnHook(name, {\n        precall: function precall() {\n          var _this3 = this;\n\n          var data = {\n            fn: name,\n            args: arguments\n          };\n          that._source.push(data);\n          T.defer(function () {\n            _this3.do('feature-add', data);\n          });\n        }\n      });\n    });\n    this.addFnHook('clear', {\n      precall: function precall() {\n        that._source.length = 0;\n        T.defer(function () {\n          that.do('feature-clear');\n        });\n      }\n    });\n  };\n  /**\r\n   * 连接，复制\r\n   * @param {*} layer \r\n   */\n\n\n  FeatureLayer.prototype.connect = function connect(layer) {\n    var options = this.options,\n        _source = this._source;\n\n    layer.options = options;\n    _source.forEach(function (item) {\n      layer[item.fn].apply(layer, item.args);\n    });\n    //\n    this.on(\"feature-add\", function (e) {\n      layer[e.fn].apply(layer, e.args);\n    }).on('feature-clear', function () {\n      layer.clear();\n    });\n  };\n  /**\r\n   * 配置\r\n   * @param options \r\n   */\n\n\n  FeatureLayer.prototype.config = function config(options) {\n    this.options = options;\n    this.layer = toGroup();\n  };\n  /**\r\n   * 判断图元是否存在\r\n   * @param {*} marker \r\n   */\n\n\n  FeatureLayer.prototype.has = function has(marker) {\n    return this.layer.hasLayer(marker);\n  };\n  /**\r\n   * 获取所有图层\r\n   */\n\n\n  FeatureLayer.prototype.getMarkers = function getMarkers() {\n    return this.layer.getLayers();\n  };\n  /**\r\n   * 添加图元\r\n   * @param {*} feature \r\n   */\n\n\n  FeatureLayer.prototype._add = function _add(feature) {\n    this.layer.addLayer(feature);\n  };\n  /**\r\n   * 添加图元，并绑定 tooltip、popup、text\r\n   * @param feature \r\n   */\n\n\n  FeatureLayer.prototype.add = function add(feature, options, data) {\n    if (feature) {\n      feature.__data = data;\n      this._add(feature);\n      this._bindToolTip(feature, options, data);\n      this._bindPopup(feature, options, data);\n      this._bindText(feature, options, data);\n      //\n    }\n  };\n  /**\r\n   * 添加点图元\r\n   * @param data [{coordinates:[lon,lat] or [{lon,lat}] or [{lat,lng}]\r\n   * @param style\r\n   */\n\n\n  FeatureLayer.prototype.addPoints = function addPoints(data, options) {\n    var _this4 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var feature = _this4.createPoint(item, featureOptions);\n      _this4.add(feature, featureOptions, item);\n      return feature;\n    });\n  };\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addClusterPoints = function addClusterPoints(data, options) {\n    var _this5 = this;\n\n    var group = L.markerClusterGroup(options && options.cluster);\n    var layer = this.layer,\n        _bindToolTip = this._bindToolTip,\n        _bindPopup = this._bindPopup;\n\n    layer.addLayer(group);\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this5.createPoint(item, featureOptions);\n      if (marker) {\n        marker.__data = item;\n        _bindToolTip(marker, featureOptions, item);\n        _bindPopup(marker, featureOptions, item);\n        group.addLayer(marker);\n      }\n      return marker;\n    });\n  };\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addClusterPoints2 = function addClusterPoints2(data, options) {\n    var group = this.oms = this.oms || new L.OverlappingMarkerSpiderfier(this.map);\n    var markers = this.addPoints(data, options);\n    markers.forEach(function (marker) {\n      group.addMarker(marker);\n    });\n  };\n  /**\r\n   * 添加线图元\r\n   * @param {*} data\r\n   * @param {*} options\r\n   */\n\n\n  FeatureLayer.prototype.addPolylines = function addPolylines(data, options) {\n    var _this6 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this6.createPolyLine(item, featureOptions);\n      _this6.add(marker, featureOptions, item);\n      marker.bringToBack(); //暂时底部 \n      return marker;\n    });\n  };\n  /**\r\n   * 添加多边形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addPolygons = function addPolygons(data, options) {\n    var _this7 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this7.createPolygon(item, featureOptions);\n      _this7.add(marker, featureOptions, item);\n      marker.bringToBack(); //暂时底部\n      return marker;\n    });\n  };\n  /**\r\n   * 添加圆形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   *  \r\n   */\n\n\n  FeatureLayer.prototype.addCircles = function addCircles(data, options) {\n    var _this8 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this8.createCircle(item, featureOptions);\n      _this8.add(marker, featureOptions, item);\n      marker.bringToBack(); // 暂时底部\n    });\n  };\n  /**\r\n   * 添加椭圆\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addEllipses = function addEllipses(data, options) {\n    var _this9 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this9.createEllipse(item, featureOptions);\n      _this9.add(marker, featureOptions, item);\n      marker.bringToBack(); // 暂时底部\n    });\n  };\n  /**\r\n   * 添加文本图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addTexts = function addTexts(data, options) {\n    var _this10 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = L.text(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(item.coordinates || item), item.text || item.properties.text, featureOptions.feature || featureOptions);\n      marker.__data = item;\n      _this10.layer.addLayer(marker);\n    });\n  };\n  /**\r\n   * 添加河流\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addRivers = function addRivers(data, options) {\n    var _this11 = this;\n\n    return toArray(data).map(function (item) {\n      var properties = item.properties,\n          coordinates = item.coordinates;\n\n      var featureOptions = properties || toOptions(options, properties || item);\n      var feature = featureOptions.feature;\n\n\n      var deep = coordinates[0] && isArray(coordinates[0][0]) ? 2 : 1;\n      var marker = new __WEBPACK_IMPORTED_MODULE_8__feature_River__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n      _this11.layer.addLayer(marker);\n    });\n  };\n  /**\r\n   * 添加图片图元(雷达图、云图)\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addImage = function addImage(data, options) {\n    var marker = toImageOverlay(options.url, Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates, 1), options);\n    this.layer.addLayer(marker);\n    return marker;\n  };\n  /**\r\n   * 添加军标箭头\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addMilitaryArrows = function addMilitaryArrows(data, options) {\n    var _this12 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var feature = featureOptions.feature;\n      var coordinates = item.coordinates,\n          deep = 1;\n      if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\n        deep = 2;\n      }\n      var marker = new __WEBPACK_IMPORTED_MODULE_9__feature_MilitaryArrow__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n      _this12.add(marker, featureOptions, item);\n      marker.bringToBack(); //暂时底部 \n      return marker;\n    });\n  };\n  /**\r\n   * 添加台风 \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addTyphoon = function addTyphoon(data, options) {\n    var typhoons = this.typhoons || (this.typhoons = {});\n    var feature = typhoons[data.tfbh];\n    var featureOptions = toOptions(options || this.options);\n    if (!feature) {\n      feature = typhoons[data.tfbh] = this.createTyphoon(data, featureOptions);\n      feature.addTo(this);\n    } else {\n      // 刷新\n      feature.update(data);\n    }\n    return feature;\n  };\n  /**\r\n   * 台风警戒线 \r\n   * @deprecated 慎用，可能被废弃\r\n   * @param data {\r\n   *  g24: [[105, 0], [113, 4.5], [119, 11], [119, 18], [127, 22], [127, 34]],\r\n   *  s24: { color: '#0000FF', opacity: 1, weight: 1, dashArray: '10,3', interactive: false },\r\n   *  g48: [[105, 0], [120, 0], [132, 15], [132, 34]],\r\n   *  s48: { color: '#FFFF00', opacity: 1, weight: 1, dashArray: '10,3', interactive: false } \r\n   * }\r\n   */\n\n\n  FeatureLayer.prototype.addAlarmLines = function addAlarmLines(data) {\n    if (!data) return;\n    var layer = this.layer;\n\n    var createPolyline = function createPolyline(coor, options) {\n      return toPolyline(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor, 1), options);\n    };\n    var m48 = createPolyline(data.g48, data.s48);\n    var m24 = createPolyline(data.g24, data.s24);\n    layer.addLayer(m48).addLayer(m24);\n  };\n  /**\r\n   * 添加热力图\r\n   * @param data\r\n   * @param options\r\n   */\n\n\n  FeatureLayer.prototype.addHeat = function addHeat(data, options) {\n    options = toOptions(options);\n    var marker = L.heat(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data, 1), options.feature);\n    return this.add(marker, options, data), marker;\n  };\n  /**\r\n   * todo:\r\n   * 1、支持4326投影\r\n   * @param data\r\n   * @param options \r\n   */\n\n\n  FeatureLayer.prototype.addVelocity = function addVelocity(data, options) {\n    var _this13 = this;\n\n    return new Promise(function (resolve) {\n      T.require(['dmap/leaflet/plugins/velocityLayer'], function (_ref) {\n        var createLayer = _ref.default;\n\n        var marker = createLayer(data, options);\n        _this13._add(marker);\n        resolve(marker);\n      });\n    });\n  };\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addWindy = function addWindy(data, options) {\n    var _this14 = this;\n\n    return new Promise(function (resolve) {\n      T.require(['dmap/leaflet/plugins/windyLayer'], function (_ref2) {\n        var createWindyLayer = _ref2.default;\n\n        options = T.assign({\n          tempOverlay: true\n        }, options);\n        //\n        var windfarm = _this14.windfarm;\n\n        if (windfarm && windfarm.options.tempOverlay === options.tempOverlay) {\n          windfarm.loadWindy(data);\n        } else {\n          windfarm && windfarm.removeFrom(_this14.layer);\n          windfarm = _this14.windfarm = createWindyLayer(options);\n          _this14._add(windfarm);\n          windfarm.loadWindy(data);\n        }\n        resolve(windfarm);\n      });\n    });\n  };\n  /**\r\n   * 添加 shp 图层\r\n   */\n\n\n  FeatureLayer.prototype.addShp = function addShp(url, options) {\n    var layer = L.shapefile(url, options);\n    this._add(layer);\n    return layer;\n  };\n  /**\r\n   * @see https://github.com/Flexberry/Leaflet-WFST\r\n   * @see https://github.com/azgs/azgs-leaflet\r\n   */\n\n\n  FeatureLayer.prototype.addWFS = function addWFS(url, options) {\n    var _this15 = this;\n\n    T.require(['dmap/leaflet/plugins/wfst'], function (_ref3) {\n      var wfst = _ref3.default;\n\n      options.url = url;\n      new L.WFST(options, new L.Format.GeoJSON({\n        crs: L.CRS.EPSG4326\n      })).addTo(_this15.map).once('load', function () {\n        this.map.fitBounds(wfst);\n      });\n    });\n  };\n  /**\r\n   * 添加 geojson 图层  \r\n   * @param {*} geojson \r\n   * @see https://leafletjs.com/reference-1.3.0.html#geojson\r\n   */\n\n\n  FeatureLayer.prototype.addGeoJSON = function addGeoJSON(geojson, options) {\n    var _this16 = this;\n\n    var geometry = geojson.type === 'Feature' ? geojson.geometry : geojson;\n    var coords = geometry ? geometry.coordinates : null;\n    var type = geometry.type;\n    if (!coords && !geometry) {\n      return null;\n    }\n    options = isFunction(options) ? options : $assign({}, options, geometry.properties);\n    switch (type) {\n      case 'MultiPoint':\n        geojson = coords.map(function (coordinates) {\n          return {\n            coordinates: coordinates,\n            properties: geometry.properties\n          };\n        });\n      case 'Point':\n        return this.addPoints(geojson, options);\n      case 'LineString':\n      case 'MultiLineString':\n        // { coordinates: lonlats(coords, type === 'LineString' ? 0 : 1) }\n        return this.addPolylines(geometry, options);\n      case 'Polygon':\n      case 'MultiPolygon':\n        // { coordinates: lonlats(coords, type === 'Polygon' ? 1 : 2) }\n        return this.addPolygons(geometry, options);\n      case 'GeometryCollection':\n        return geometry.geometries.map(function (data) {\n          return _this16.addGeoJSON(data, options);\n        });\n      // 拓展 geojson 的类型\n      case 'Circle':\n        return this.addCircles(geometry, options);\n      case 'Ellipse':\n        return this.addEllipses(geometry, options);\n      case 'Text':\n        return this.addTexts(geometry, options);\n      case 'MilitaryArrow':\n        //军标箭头\n        return this.addMilitaryArrows(geometry, options);\n    }\n  };\n  /**\r\n   * 批量移除台风\r\n   * @param {*} ids\r\n   */\n\n\n  FeatureLayer.prototype.removeTyphoons = function removeTyphoons(ids) {\n    var typhoons = this.typhoons;\n\n    if (typhoons) {\n      ids = ids || Object.keys(typhoons);\n      T.each(ids, function (id) {\n        var typhoon = typhoons[id];\n        if (typhoon) {\n          typhoon.remove();\n          delete typhoons[id];\n        }\n      });\n    }\n  };\n  /**\r\n   * 获取台风对象\r\n   * @param {*} id\r\n   */\n\n\n  FeatureLayer.prototype.getTyphoon = function getTyphoon(id) {\n    var typhoons = this.typhoons;\n\n    return id === void 0 ? typhoons : typhoons && typhoons[id];\n  };\n  /**\r\n   * 创建台风对象\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createTyphoon = function createTyphoon(data, options) {\n    return new __WEBPACK_IMPORTED_MODULE_3__feature_Typhoon__[\"a\" /* default */](data, options);\n  };\n  /**\r\n   * 点图元工厂\r\n   * @param {*} data\r\n   * @param {*} options {feature:{icon,symbol,glowOptions,flowOptions}}\r\n   */\n\n\n  FeatureLayer.prototype.createPoint = function createPoint(data, options) {\n    var feature = options.feature;\n\n    var _ref4 = feature || {},\n        tag = _ref4.tag,\n        src = _ref4.src;\n    //\n\n\n    var latlng = Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates || data);\n    if (latlng) {\n      if (tag) {\n        switch (tag) {\n          case 'img':\n            var anchor = feature.offset;\n            if (anchor) {\n              anchor = [-anchor[0], -anchor[1]];\n            }\n            feature.icon = toIcon($assign({\n              iconUrl: src,\n              iconAnchor: anchor\n              // iconSize: [38, 95],\n              // popupAnchor: [-3, -76],\n              // shadowUrl: 'shadow.png',\n              // shadowSize: [68, 95],\n              // shadowAnchor: [22, 94]\n            }, feature.icon));\n            break;\n          case 'div':\n            feature.icon = toDivIcon($assign({\n              iconAnchor: anchor\n            }, feature.icon));\n            break;\n        }\n        return toMarker(latlng, feature);\n      }\n      return new __WEBPACK_IMPORTED_MODULE_2__feature_VectorMarker__[\"a\" /* default */](latlng, feature);\n    }\n  };\n  /**\r\n   * 线图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createPolyLine = function createPolyLine(data, options) {\n    var feature = options.feature;\n    var coordinates = data.coordinates,\n        deep = 1;\n    //todo\n    if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\n      deep = 2;\n    }\n    return toPolyline(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n  };\n\n  /**\r\n   * 多边形图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createPolygon = function createPolygon(data, options) {\n    var feature = options.feature;\n    var coordinates = data.coordinates;\n\n    var deep = coordinates && coordinates[0] && isArray(coordinates[0][0]) ? 2 : 1;\n    // 数据错误，容错下，标绘\n    if (!isArray(coordinates[0])) {\n      coordinates = [coordinates];\n    }\n    return toPolygon(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n  };\n  /**\r\n   * 创建圆形图元\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createCircle = function createCircle(data, options) {\n    return toCircle(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates), options.feature);\n  };\n  /**\r\n   * 创建椭圆图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createEllipse = function createEllipse(data, options) {\n    return new __WEBPACK_IMPORTED_MODULE_4__feature_Ellipse__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates), options.feature);\n  };\n  /**\r\n   * 绑定 tooltip ，浮出层，一般用于显示站名\r\n   * @param marker \r\n   * @param options \r\n   * @param data \r\n   */\n\n\n  FeatureLayer.prototype._bindToolTip = function _bindToolTip(marker, options, data) {\n    if (options = options.tooltip) {\n      var _options = options,\n          text = _options.text;\n\n      var tooltip = data && typeof text == 'string' ? fmt(text, data.properties || data) : text;\n      //\n      if (tooltip) {\n        // options.interactive = true;\n        marker.bindTooltip(tooltip, options);\n      }\n    }\n  };\n  /**\r\n   * 绑定 popup 弹出层，一般用于显示报图\r\n   * @param marker \r\n   * @param options \r\n   */\n\n\n  FeatureLayer.prototype._bindPopup = function _bindPopup(marker, options) {\n    options = options.popup;\n    if (options) {\n      var popup = new __WEBPACK_IMPORTED_MODULE_1__polyfill_Popup__[\"a\" /* default */](options).setContent(options.text);\n      marker.bindPopup(popup, options);\n      // marker.bindPopup(options.text, options);\n    }\n  };\n  /**\r\n   * 绑定静态文本，一般用于面和线上的文本显示\r\n   * @param {*} feature\r\n   * @param {*} options\r\n   */\n\n\n  FeatureLayer.prototype._bindText = function _bindText(feature, options) {\n    options = options.text;\n    if (options) {\n      feature.bindText(options.text, options);\n    }\n  };\n  /**\r\n   * @deprecated 慎用，这个方法可能会被弃用\r\n   */\n\n\n  FeatureLayer.prototype.updateTooltips = function updateTooltips() {\n    this.map && this.map.eachLayer(function (layer) {\n      var tooltip = layer.getTooltip();\n      tooltip && tooltip.isOpen && tooltip.update();\n    });\n  };\n  /**\r\n   * 隐藏标注，常用于水雨情设置模块\r\n   * @param hide\r\n   */\n\n\n  FeatureLayer.prototype.hideTooltip = function hideTooltip(hide) {\n    if (hide === void 0) hide = true;\n    this.layer.eachLayer(function (layer) {\n      var tooltip = layer.getTooltip();\n      if (tooltip) {\n        layer.hideTooltip(hide);\n      }\n    });\n  };\n  /**\r\n   * 清除\r\n   */\n\n\n  FeatureLayer.prototype.clear = function clear() {\n    this.layer.clearLayers();\n    this.typhoons = null;\n    return this;\n  };\n  /**\r\n   * 挂起\r\n   */\n\n\n  FeatureLayer.prototype.suspend = function suspend() {\n    var map = this.map,\n        layer = this.layer;\n\n    map && map.removeLayer(layer);\n    this.suspended = true;\n  };\n  /**\r\n   * 重启\r\n   */\n\n\n  FeatureLayer.prototype.resume = function resume() {\n    var map = this.map,\n        layer = this.layer;\n\n    map && map.addLayer(layer);\n  };\n  /**\r\n   * 添加\r\n   * @param dmap \r\n   */\n\n\n  FeatureLayer.prototype.addTo = function addTo(dmap) {\n    //\n    this.dmap = dmap;\n    this.map = dmap.map;\n    //\n    dmap.addLayer(this);\n    return this;\n  };\n  /**\r\n   * 移除\r\n   */\n\n\n  FeatureLayer.prototype.remove = function remove() {\n    this.dmap.removeLayer(this.layer);\n    this.dmap = null;\n    this.map = null;\n    return this;\n  };\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\n\n\n  FeatureLayer.prototype.on = function on(types, fn, ctx) {\n    return this.layer.on(types, fn, ctx);\n  };\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\n\n\n  FeatureLayer.prototype.once = function once(types, fn, ctx) {\n    return this.layer.once(types, fn, ctx);\n  };\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx  \r\n   */\n\n\n  FeatureLayer.prototype.off = function off(types, fn, ctx) {\n    return this.layer.off(types, fn, ctx);\n  };\n  /**\r\n   * \r\n   * @param {*} types \r\n   * @param {*} e \r\n   */\n\n\n  FeatureLayer.prototype.do = function _do(types, e) {\n    return this.layer.fire(types, e);\n  };\n  /**\r\n   * 导出 GeoJson\r\n   * @param precision\r\n   */\n\n\n  FeatureLayer.prototype.toGeoJSON = function toGeoJSON(precision) {\n    var layer = this.layer;\n\n    var jsons = [];\n    layer.eachLayer(function (layer) {\n      if (layer.toGeoJSON) {\n        var json = layer.toGeoJSON(precision);\n        var geometry = json.geometry,\n            properties = json.properties;\n        var data = layer.__data,\n            options = layer.options;\n\n        var tooltip = layer.getTooltip();\n        var text = layer.getText();\n        //\n        geometry.properties = $assign(properties, geometry.properties, data && data.properties, {\n          feature: options,\n          tooltip: tooltip && tooltip.options,\n          text: text && text.options\n        });\n        geometry.properties.feature.className = ''; //暂时设置为空\n        jsons.push(geometry);\n      }\n    });\n    //\n    return {\n      geometries: jsons,\n      type: 'GeometryCollection'\n    };\n    //\n  };\n\n  return FeatureLayer;\n}(T.Class);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FeatureLayer);\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n/**\r\n *  @param {boolean} restart 重新启动\r\n */\nvar Tool = function () {\n  function Tool(owner, options) {\n    _classCallCheck(this, Tool);\n\n    this.owner = owner;\n    this.dmap = owner.dmap;\n    this.map = owner.map;\n    this.layer = owner.layer;\n    this.data = options.data; //包含layerid，用于标绘的测站类型id标识\n  }\n  /**\r\n   * \r\n   */\n\n\n  Tool.prototype.initMouseDownHandler = function initMouseDownHandler() {\n    var _this = this;\n\n    this.onMouseDown = this.onMouseDown || function (e) {\n      if (e.originalEvent.button == 0) {\n        _this._onMouseDown(e);\n      }\n    };\n  };\n  /**\r\n   * \r\n   * @param options \r\n   */\n\n\n  Tool.prototype.setOptions = function setOptions(options) {\n    this.options = T.assign(this.options || {}, options);\n  };\n  /**\r\n   * \r\n   */\n\n\n  Tool.prototype.reback = function reback() {\n    var marker = this.marker,\n        layer = this.layer,\n        history = this.history;\n\n    if (marker) {\n      if (marker._defaultShape) {\n        //线/面\n        var latlngs = marker._defaultShape();\n        var latlng = latlngs.pop();\n        if (latlng) {\n          history.push(latlng);\n          marker.setLatLngs(latlngs);\n        } else {\n          marker.removeFrom(layer);\n          return true;\n        }\n      } else {\n        marker.removeFrom(layer);\n        return true;\n      }\n    }\n  };\n  /**\r\n   * \r\n   */\n\n\n  Tool.prototype.restore = function restore() {\n    var marker = this.marker,\n        layer = this.layer,\n        history = this.history;\n\n    if (marker) {\n      marker.addTo(layer);\n      //\n      if (marker._defaultShape && history.length > 0) {\n        //线/面\n        var latlngs = marker._defaultShape();\n        var latlng = history.pop();\n        latlngs.push(latlng);\n        marker.setLatLngs(latlngs);\n      } else {\n        return true;\n      }\n    }\n  };\n  /**\r\n   * 绘制结束\r\n   * @param e \r\n   */\n\n\n  Tool.prototype.onEnd = function onEnd(e) {\n    //\n    this.history = [];\n    //\n    this.dmap.do('draw-end', {\n      target: this,\n      marker: this.marker\n    });\n  };\n  /**\r\n   * 清除图元，用于重置工具，重复绘制，或者取消绘制\r\n   */\n\n\n  Tool.prototype.clear = function clear() {\n    var marker = this.marker;\n\n    marker && marker.remove();\n  };\n  /**\r\n   * 重置\r\n   */\n\n\n  Tool.prototype.reset = function reset() {\n    if (this.restart) {\n      this.clear();\n      this.restart = false;\n      this.marker = null;\n    }\n  };\n  /**\r\n   * \r\n   */\n\n\n  Tool.prototype.cancel = function cancel() {};\n  /**\r\n   * 复制工具\r\n   */\n\n\n  Tool.prototype.clone = function clone() {\n    var tool = new this.constructor(this.owner, this.options);\n    tool.options = this.options;\n    return tool;\n  };\n\n  return Tool;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Tool);\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_LonLats__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_Quadrant__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__polyfill_Popup__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__VectorMarker__ = __webpack_require__(2);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @author gyb(mocheer)\r\n * @since 2016.11.4\r\n * 台风图元\r\n */\n\n\n\n\nvar _L = L,\n    toMarker = _L.marker,\n    toCanvas = _L.canvas,\n    toPolyline = _L.polyline,\n    toCircle = _L.circle,\n    circleMarker = _L.circleMarker,\n    toDivIcon = _L.divIcon,\n    toTooltip = _L.tooltip,\n    toFeatureGroup = _L.featureGroup,\n    toLatLng = _L.latLng;\nvar _T = T,\n    $assign = _T.assign;\n\n// svg[Attributes]{\n//   stroke - linejoin: round;\n//   stroke - linecap: round;\n//   pointer - events: none;\n//   stroke: rgb(0, 150, 255);\n//   stroke - opacity: 0.8;\n//   stroke - width: 3;\n//   fill: none;\n// }\n\n/**\r\n * 台风图元\r\n * @class Typhoon\r\n * todo: 用 FeatureGroup 重构\r\n */\n\nvar Typhoon = function () {\n  //\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} style \r\n   */\n\n  /**\r\n   * 配置信息\r\n   */\n  function Typhoon(data, options) {\n    _classCallCheck(this, Typhoon);\n\n    this.options = {\n      // 自动播放\n      autoPlay: true,\n      // 是否绘制台风路径\n      hasLsljLater: true,\n      // 确保台风在视野范围内\n      inView: true,\n      // 当inview=true且keepZoom=true,确保视野范围的时候不缩放地图\n      keepZoom: true,\n      // 点击是否根据路径点重新绘制台风\n      click2drawOnTime: true,\n      // 是否对路径点进行碰撞检测、抽稀\n      hitForPoint: true,\n      // 历史路径\n      ls: {\n        color: '#0096FF',\n        weight: 3,\n        opacity: .8,\n        interactive: false\n      },\n      // 历史路径-灰色\n      lsyb: {\n        color: '#666666',\n        weight: 2,\n        opacity: .8,\n        interactive: false\n      },\n      // 预报机构,预报路径点\n      org: {\n        weight: 1,\n        dashArray: '10,3',\n        interactive: false\n      },\n      orgs: [{\n        label: \"中国\",\n        th: \"CN\",\n        color: \"#FF4050\"\n      }, {\n        label: \"韩国\",\n        th: \"KR\",\n        color: \"#000000\"\n      }, {\n        label: \"美国\",\n        th: \"US\",\n        color: \"#4099EE\"\n      }, {\n        label: \"中国台湾\",\n        th: \"TW\",\n        color: \"#FFA040\"\n      }, {\n        label: \"日本\",\n        th: \"JP\",\n        color: \"#43FF4B\"\n      }, {\n        label: \"中国香港\",\n        th: \"HK\",\n        color: \"#FF40F5\"\n      }],\n      // 台风等级\n      grade: {\n        color: '#000',\n        radius: 4,\n        fillColor: '#FFF',\n        weight: 1,\n        fillOpacity: 1,\n        src: 'circle'\n      },\n      grades: [{\n        F1: 0,\n        F2: 0.2\n      }, {\n        F1: 0.3,\n        F2: 1.5\n      }, {\n        F1: 1.6,\n        F2: 3.3\n      }, {\n        F1: 3.4,\n        F2: 5.4\n      }, {\n        F1: 5.5,\n        F2: 7.9\n      }, {\n        F1: 8,\n        F2: 10.7\n      }, {\n        F1: 10.8,\n        F2: 13.8,\n        fillColor: '#00FF03',\n        GRADENAME: '热带低压'\n      }, {\n        F1: 13.95,\n        F2: 17.15,\n        fillColor: '#00FF03',\n        GRADENAME: '热带低压'\n      }, {\n        F1: 17.2,\n        F2: 20.7,\n        fillColor: '#0062FE',\n        GRADENAME: '热带风暴'\n      }, {\n        F1: 20.8,\n        F2: 24.4,\n        fillColor: '#0062FE',\n        GRADENAME: '热带风暴'\n      }, {\n        F1: 24.5,\n        F2: 28.4,\n        fillColor: '#FDFA00',\n        GRADENAME: '强热带风暴'\n      }, {\n        F1: 28.5,\n        F2: 32.6,\n        fillColor: '#FDFA00',\n        GRADENAME: '强热带风暴'\n      }, {\n        F1: 32.7,\n        F2: 36.9,\n        fillColor: '#FDAC03',\n        GRADENAME: '台风'\n      }, {\n        F1: 37,\n        F2: 41.4,\n        fillColor: '#FDAC03',\n        GRADENAME: '台风'\n      }, {\n        F1: 41.5,\n        F2: 46.1,\n        fillColor: '#F072F6',\n        GRADENAME: '强台风'\n      }, {\n        F1: 46.2,\n        F2: 50.9,\n        fillColor: '#F072F6',\n        GRADENAME: '强台风'\n      }, {\n        F1: 51,\n        F2: 56,\n        fillColor: '#FD0002',\n        GRADENAME: '超强台风'\n      }, {\n        F1: 56.1,\n        F2: 161.2,\n        fillColor: '#FD0002',\n        GRADENAME: '超强台风'\n      }],\n      // 台风风圈\n      c7: {\n        fillColor: '#79C0AE',\n        fillOpacity: 0.5,\n        color: '#49BA6E',\n        weight: 1\n      },\n      c10: {\n        fillColor: '#FFFF00',\n        fillOpacity: 0.2,\n        color: '#FFFF00',\n        weight: 1\n      },\n      c12: {\n        fillColor: '#FF0000',\n        fillOpacity: 0.3,\n        color: '#FF0000',\n        weight: 1\n      },\n      // 台风登陆地\n      land: {\n        src: T + 'assets/common/dmap/markers/flag.png'\n        // 台风风眼\n        // hurricane: {iconUrl: T + \"assets/common/dmap/markers/typhoonIco.gif\",iconSize: [32, 32]}\n        // \n      }\n      // \n    };\n    this.group = toFeatureGroup();\n\n    this.data = T.action(data);\n    options = $assign(this.options, options);\n    options.grades = options.grades.map(function (val) {\n      return $assign({}, options.grade, val);\n    });\n    //\n    this._points = [];\n  }\n  /**\r\n   * 动态改变预报机构集合。\r\n   * @param {*} options \r\n   */\n\n\n  Typhoon.prototype.setOptions = function setOptions(options) {\n    $assign(this.options, options);\n    this.update();\n  };\n  /**\r\n   * 更新重绘\r\n   */\n\n\n  Typhoon.prototype.update = function update(data) {\n    if (data && data !== this.data) {\n      //最新台风实时数据刷新\n      this.data = T.action(data);\n      this.ci = data.points.length - 1;\n    }\n    if (this.complete) {\n      this.draw(this.ci);\n    }\n  };\n  /**\r\n   * 创建路径点 \r\n   * @param coor\r\n   * @param options\r\n   * @param data\r\n   */\n\n\n  Typhoon.prototype.createPoint = function createPoint(coor, options, data) {\n    var marker = circleMarker(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor), options);\n    data._source = this.data;\n    marker.__data = data;\n    // 创建弹出层\n    options = this.options.popup;\n    options && marker.bindPopup(new __WEBPACK_IMPORTED_MODULE_2__polyfill_Popup__[\"a\" /* default */](options), options);\n    return marker;\n  };\n  /**\r\n   * 创建登录地\r\n   */\n\n\n  Typhoon.prototype.createLand = function createLand(coor, options) {\n    return new __WEBPACK_IMPORTED_MODULE_3__VectorMarker__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor), options);\n  };\n  /**\r\n   * 创建路径线\r\n   * @param coor\r\n   * @param options\r\n   */\n\n\n  Typhoon.prototype.createPolyline = function createPolyline(coor, options) {\n    return toPolyline(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor, 1), options);\n  };\n  /**\r\n   * 创建风圈\r\n   * @param center\r\n   * @param radius\r\n   * @param options\r\n   */\n\n\n  Typhoon.prototype.createCicle = function createCicle(center, radius, options) {\n    return radius && toCircle(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(center), radius * 1000, options);\n  };\n  /**\r\n   * 绘制四象风圈\r\n   * { ne, nw, sw, se}-> [ne, nw, sw, se]\r\n   * @param center\r\n   * @param radius\r\n   * @param style\r\n   */\n\n\n  Typhoon.prototype.createQuadrant = function createQuadrant(center, radius, style) {\n    if (!radius) return;\n    var ne = radius.ne,\n        nw = radius.nw,\n        sw = radius.sw,\n        se = radius.se;\n\n    if (!ne || !nw || !sw || !se) {\n      return;\n    }\n    this.renderer = this.renderer || toCanvas({\n      style: {\n        zIndex: 40\n      }\n    });\n    return new __WEBPACK_IMPORTED_MODULE_1__feature_Quadrant__[\"a\" /* default */]([center[1], center[0]], $assign({}, style, {\n      renderer: this.renderer,\n      radius: [ne * 1000, nw * 1000, sw * 1000, se * 1000]\n    }));\n  };\n  /**\r\n   * 绘制飓风动画\r\n   * @param center\r\n   * @param options\r\n   */\n\n\n  Typhoon.prototype.createHurricane = function createHurricane(center, options, grade) {\n    var colorIndex = parseInt((grade - 6) / 2) + 1;\n    return options ? toMarker(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(center), {\n      icon: toDivIcon(options)\n    }) : new __WEBPACK_IMPORTED_MODULE_3__VectorMarker__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(center), {\n      src: T + ('assets/common/dmap/typhoon/hurricane' + (colorIndex > 0 ? colorIndex : 0) + '.png'),\n      rotate: true\n    });\n  };\n  /**\r\n   * draw\r\n   * {points}\r\n   * {radius7,radius10,radius12,radius7_quad,radius10_quad,radius12_quad}-> {r7,r10,r12,r7_q,r10_q,r12_q}\r\n   * {lng,lat} -> {lon,lat}\r\n   * {power,strong} 台风等级,台风等级对应名称\r\n   * {sets,points} 预报机构，预报路径\r\n   * @param time\r\n   * @property _points 缓存当前历史路径绘制的点图元\r\n   */\n\n\n  Typhoon.prototype.draw = function draw(time) {\n    var _this = this;\n\n    var that = this;\n    var options = that.options,\n        data = that.data,\n        group = that.group,\n        lsp = that.lsp,\n        createPolyline = that.createPolyline,\n        createCicle = that.createCicle,\n        _points = that._points;\n    var autoPlay = options.autoPlay,\n        ls = options.ls,\n        lsyb = options.lsyb,\n        grades = options.grades,\n        c7 = options.c7,\n        c10 = options.c10,\n        c12 = options.c12,\n        org = options.org,\n        orgs = options.orgs,\n        hurricane = options.hurricane,\n        hasLsljLater = options.hasLsljLater,\n        hitForPoint = options.hitForPoint;\n\n    var createPoint = that.createPoint.bind(that);\n    var createLand = that.createLand.bind(that);\n    var createQuadrant = that.createQuadrant.bind(that);\n    var handleEvent = that.handleEvent.bind(that);\n    var points = data.points,\n        land = data.land;\n\n    var ci = this.getTimeIndex(points, time); //当前台风时间点，默认为台风消亡时间点\n    var len = points.length;\n    var addLayer = function addLayer(value, index, array) {\n      if (!value || array === lsp && index > ci && autoPlay) return;\n      group.addLayer(value);\n    };\n    var getDistance = function getDistance(p1, p2) {\n      return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n    };\n    if (!that.tempLayer) {\n      that.tempLayer = toFeatureGroup();\n      group.addLayer(that.tempLayer);\n    }\n    var tempLayer = that.tempLayer;\n\n    var addTempLayer = function addTempLayer(value, index, array) {\n      if (!value || array === lsp && index > ci && autoPlay) return;\n      tempLayer.addLayer(value);\n    };\n    //\n    var drawing = function drawing(i, prev) {\n      // 清除，点不能清除，因可能在播放过程显示Popup\n      tempLayer.clearLayers();\n      if (!i || i < prev) {\n        group.clearLayers();\n        group.addLayer(tempLayer);\n      }\n      // 声明\n      var lslj = void 0; // 历史路径\n      var lslj_yb = void 0; // 历史路径-灰色\n      var yblj = []; // 预报路径\n      var tffq = []; // 台风风圈\n      var landPoints = []; // 台风登陆地\n      // \n      var item = points[i];\n      //\n      var lslj_prev = points.slice(0, i + 1);\n      var lslj_after = points.slice(i);\n      var coor = [item.lng, item.lat];\n      // 绘制\"当前\"历史路径\n      if (lslj_prev.length > 1) {\n        lslj = createPolyline(lslj_prev, ls);\n      }\n      // 绘制\"未来\"历史路径-灰色\n      if (!autoPlay && hasLsljLater && lslj_after.length > 1) {\n        lslj_yb = createPolyline(lslj_after, lsyb);\n        lslj_prev = lslj_prev.concat(lslj_after.slice(1));\n      }\n      //\n      lsp.length = lslj_prev.length;\n      // 遍历历史路径点\n      lslj_prev.forEach(function (item, i) {\n        // 抽稀\n        if (hitForPoint) {\n          // 获取当前路径点的像素坐标\n          var point = item._point = _this.map.latLngToLayerPoint(toLatLng(item));\n          // 获取上个路径点的像素坐标\n          var point_prev = function (i) {\n            while (i--) {\n              if (lsp[i]) return lslj_prev[i]._point;\n            }\n          }(i);\n          if (i > 0 && getDistance(point, point_prev) < 8) {\n            lsp[i] = null;\n            return;\n          }\n        }\n        // \n        var marker = lsp[i] = _points[i] = _points[i] || createPoint([item.lng, item.lat], grades[item.power || 0], item).on('click mouseover mouseout', handleEvent);\n        if (i === 0 && !marker.getTooltip()) {\n          var tooltip = toTooltip(T.merge({\n            zoom: 1,\n            direction: 'right',\n            offset: [5, 0]\n          }, _this.options.tooltip), marker).setContent(data.tfbh + data.name);\n          marker.bindTooltip(tooltip);\n        }\n      });\n      // 登录地\n      landPoints = options.land && (land || []).map(function (data) {\n        var tm = T.clock(data.land_time);\n        var ctm = T.clock(item.time);\n        if (tm.date < ctm.date) {\n          var marker = createLand(data, options.land);\n          return marker;\n        }\n      });\n\n      // 绘制风圈和预报路径\n      if (autoPlay || i === ci) {\n        //\n        var radius7_quad = item.radius7_quad,\n            radius10_quad = item.radius10_quad,\n            radius12_quad = item.radius12_quad,\n            forecast = item.forecast;\n        // 绘制飓风动画和风圈\n\n        var h = that.createHurricane(coor, hurricane, item.power);\n        var r7 = createQuadrant(coor, radius7_quad, c7) || createCicle(coor, item.radius7, c7);\n        var r10 = createQuadrant(coor, radius10_quad, c10) || createCicle(coor, item.radius10, c10);\n        var r12 = createQuadrant(coor, radius12_quad, c12) || createCicle(coor, item.radius12, c12);\n        tffq.push(r7, r10, r12, h);\n        // 绘制预报路径：回溯 \n        if (!autoPlay || i === len - 1) {\n          var _points2 = [];\n          orgs.forEach(function (data) {\n            var sets = data.label; //预报机构名称\n            var index = i;\n            var item = void 0;\n            var point = void 0;\n            var search = {\n              sets: sets\n            };\n            while (!item && index >= 0) {\n              point = points[index--];\n              forecast = point.forecast;\n              item = forecast && T.find(forecast, search);\n            }\n            if (item) {\n              var _item = item,\n                  _sets = _item.sets,\n                  _points3 = _item.points;\n\n              var style = $assign({}, org, T.find(orgs, {\n                label: _sets\n              }));\n              yblj.push(createPolyline([point].concat(_points3), style));\n              //\n              _points3.forEach(function (item) {\n                item.sets = _sets; // 用于显示信息窗\n                // 抽稀\n                var point = item._point = _this.map.latLngToLayerPoint(toLatLng(item));\n                if (hitForPoint) {\n                  for (var j = 0, _len = _points2.length; j < _len; j++) {\n                    if (getDistance(point, _points2[j]) < 8) {\n                      return;\n                    }\n                  }\n                }\n                _points2.push(point);\n                //\n                yblj.push(createPoint(item, grades[item.power || 0], item).on('click mouseover mouseout', handleEvent));\n                //\n              });\n            }\n          });\n        }\n      }\n      //\n      tffq.forEach(addTempLayer);\n      yblj.forEach(addTempLayer);\n      addTempLayer(lslj);\n      addTempLayer(lslj_yb);\n      lsp.forEach(addLayer);\n      landPoints.forEach(addTempLayer);\n      tempLayer.bringToBack();\n    };\n\n    if (autoPlay) {\n      var i = 0;\n      var playing = function playing() {\n        //init 防止播放过程中就被移除\n        if (_this.init) {\n          if (i < len && that.layer) {\n            drawing(i, i - 1);\n            setTimeout(playing, 30);\n            i++;\n          } else if (that.layer) {\n            T.do('typhoon-playend', {\n              tf: data,\n              attr: points[i - 1]\n            });\n            options.autoPlay = false;\n            that.complete = true;\n          }\n          // \n          if (i === len && options.inView && !_this.layer.suspended) {\n            _this.map && options.keepZoom ? _this.map.setView(points[i - 1]) : _this.map.fitBounds(toPolyline([[30, 105], [10, 125]].concat(points)).getBounds());\n          }\n        }\n      };\n      playing();\n    } else {\n      drawing(ci, that.ci);\n      T.do('typhoon-playend', {\n        tf: data,\n        attr: points[ci]\n      });\n      that.complete = true;\n    }\n    that.ci = ci;\n  };\n\n  /**\r\n   * 获取台风播放时间点\r\n   * @param data \r\n   * @param time \r\n   */\n\n\n  Typhoon.prototype.getTimeIndex = function getTimeIndex(data, time) {\n    if (time !== void 0) {\n      return +time;\n    }\n    return data.length - 1;\n  };\n  /**\r\n   * 设置台风播放时间点\r\n   * @param time\r\n   */\n\n\n  Typhoon.prototype.setTimeIndex = function setTimeIndex(time) {\n    if (this.ci !== time) {\n      if (this.complete) {\n        // 用于二三维一体化，同步台风历史路径\n        this.data.do('setTimeIndex', time);\n        this.draw(time);\n      }\n    }\n  };\n  /**\r\n   * \r\n   * @param layer \r\n   */\n\n\n  Typhoon.prototype.addTo = function addTo(layer) {\n    var _this2 = this;\n\n    var that = this;\n    if (layer.map) {\n      that.map = layer.map.on('zoomend', function () {\n        that.init && that.update();\n      });\n      that.layer = layer;\n      layer._add(this.group);\n      if (!that.init) {\n        that.init = true;\n        that.lsp = [];\n        that.draw();\n      }\n    } else {\n      // 未加载到地图上 \n      layer.layer.on('add', function () {\n        _this2.addTo(layer);\n      });\n    }\n  };\n  /**\r\n   * 移除\r\n   */\n\n\n  Typhoon.prototype.remove = function remove() {\n    this.init = false;\n    // 不能直接用 remove，当上层layer被挂起移除的时候无法删除。\n    // 所以这里用 removeFrom\n    this.layer && this.group.removeFrom(this.layer.layer);\n  };\n  /**\r\n   * 台风路径点点击/移入事件\r\n   * @param e\r\n   */\n\n\n  Typhoon.prototype.handleEvent = function handleEvent(e) {\n    var data = this.data,\n        lsp = this.lsp,\n        complete = this.complete,\n        _overTarget = this._overTarget,\n        options = this.options;\n    var target = e.target,\n        type = e.type;\n\n    var i = lsp.indexOf(target);\n    if (!complete) {\n      return;\n    }\n    var event = void 0;\n    switch (type) {\n      case 'click':\n        event = {\n          data: data,\n          dataProvider: data.points,\n          selItem: data.points[i],\n          event: e\n        };\n        if (lsp[i]) {\n          options.click2drawOnTime && this.setTimeIndex(i);\n          target.openPopup();\n          target.setRadius(7);\n          T.do('typhoon-lslj-click', event);\n          //台风播放控件\n        } else {\n          target.openPopup();\n          T.do('typhoon-yblj-click', event);\n        }\n        break;\n      case 'mouseover':\n        event = {\n          tf: data,\n          attr: target.__data || data.points[i],\n          event: e\n        };\n        if (lsp[i]) {\n          if (_overTarget != target) {\n            target.setRadius(7);\n            this._overTarget = target;\n          }\n          T.do('typhoon-lslj-over', event);\n        } else {\n          T.do('typhoon-yblj-over', event);\n        }\n        break;\n      case 'mouseout':\n        if (_overTarget) {\n          _overTarget.setRadius(4);\n          this._overTarget = null;\n        }\n        T.do('typhoon-lslj-out', event);\n        break;\n    }\n  };\n\n  return Typhoon;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Typhoon);\n\n/***/ }),\n\n/***/ 31:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.10.22\r\n */\nvar _L = L,\n    Circle = _L.Circle,\n    CircleMarker = _L.CircleMarker;\n/**\r\n * 台风四象限风圈\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Circle.extend({\n  /**\r\n   * 初始化\r\n   */\n  initialize: function initialize(latlng, options) {\n    CircleMarker.prototype.initialize.call(this, latlng, options);\n    this._mRadius = this.options.radius;\n  },\n\n  /**\r\n   * \r\n   */\n  _project: function _project() {\n    var _latlng = this._latlng,\n        map = this._map,\n        options = this.options,\n        _mRadius = this._mRadius;\n    // let crs = L.CRS.EPSG3857;//map.options.crs;\n\n    var ne = _mRadius[0],\n        nw = _mRadius[1],\n        se = _mRadius[2],\n        sw = _mRadius[3]; //东北，西北，东南，西南 四象限的半径，单位米\n\n    var crs = map.options.crs;\n    var Earth = L.CRS.Earth;\n    var lat = _latlng.lat,\n        lng = _latlng.lng;\n\n    if (crs.distance === Earth.distance) {\n      var getR = function getR(r) {\n        var d = Math.PI / 180;\n        var latR = r / Earth.R / d;\n        var top = map.project([lat + latR, lng]);\n        var bottom = map.project([lat - latR, lng]);\n        var p = top.add(bottom).divideBy(2);\n        // let lat2 = map.unproject(p).lat;\n        // let lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /\n        //   (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;\n\n        // if (isNaN(lngR) || lngR === 0) {\n        //   lngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425\n        // }\n        point = point || p.subtract(map.getPixelOrigin());\n        // this._radius = isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\n        // this._radiusY = p.y - top.y;\n        // return isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\n        return p.y - top.y;\n      };\n\n      var point = void 0;\n\n      ne = getR(ne);\n      nw = getR(nw);\n      se = getR(se);\n      sw = getR(sw);\n      this._point = point;\n      //\n      this._radius = [sw, //西南\n      se, //东南\n      nw, //西北\n      ne //东北\n      ];\n    } else {\n      var xy = crs.project(_latlng);\n      ne = [crs.unproject(xy.add([ne, 0])), crs.unproject(xy.add([0, -ne]))];\n      nw = [crs.unproject(xy.add([-nw, 0])), crs.unproject(xy.add([0, -nw]))];\n      se = [crs.unproject(xy.add([se, 0])), crs.unproject(xy.add([0, se]))];\n      sw = [crs.unproject(xy.add([-sw, 0])), crs.unproject(xy.add([0, sw]))];\n      //中心点\n      var _point2 = this._point = map.latLngToLayerPoint(_latlng);\n      var x = _point2.x;\n      //各象限半径 - 顺时针\n\n      this._radius = [x - map.latLngToLayerPoint(sw[0]).x, //西南\n      map.latLngToLayerPoint(se[0]).x - x, //东南\n      x - map.latLngToLayerPoint(nw[0]).x, //西北\n      map.latLngToLayerPoint(ne[0]).x - x //东北\n      ];\n    }\n    this._updateBounds();\n  },\n\n  /**\r\n   * 绘制风圈\r\n   */\n  _updatePath: function _updatePath() {\n    this._renderer._updateCircular(this);\n  },\n\n  /**\r\n   * 修改边界\r\n   */\n  _updateBounds: function _updateBounds() {\n    var _point = this._point,\n        _radius = this._radius;\n\n    var w = this._clickTolerance();\n    var ne = _radius[0],\n        nw = _radius[1],\n        se = _radius[2],\n        sw = _radius[3];\n\n    var maxR = Math.max(ne, nw, se, sw);\n    var p = [maxR + w, maxR + w];\n    this._pxBounds = new L.Bounds(_point.subtract(p), _point.add(p));\n  }\n}));\n\n/***/ }),\n\n/***/ 32:\n/***/ (function(module, exports) {\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2018-3-23\r\n * @see https://github.com/yakitoritabetai/Leaflet.LabelTextCollision\r\n * @see https://github.com/XC-Zhang/leaflet-text\r\n */\nvar _L = L,\n    Layer = _L.Layer;\n/** \r\n * \r\n */\n\nLayer.include({\n  /**\r\n   * \r\n   */\n  getText: function getText() {\n    return this._text;\n  },\n\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\n  bindText: function bindText(content, options) {\n    //\n    if (this._text instanceof L.Text) {\n      this._text.setContent(content);\n    } else {\n      var _latlng = this._latlng;\n      // 绑定文本和图标，比如说危险区内部的警告图标，或者河流上的文本标注\n\n      this._text = content ? L.text(_latlng, content, options) : new L.VectorMarker(_latlng, options);\n    }\n    //\n    this._initTextInteractions();\n    //\n    if (this._map && this._map.hasLayer(this)) {\n      this.openText();\n    }\n    return this;\n  },\n\n  /**\r\n   * \r\n   * @param \r\n   */\n  _initTextInteractions: function _initTextInteractions() {\n    this.on({\n      remove: this._closeText,\n      move: this._moveText\n    });\n  },\n  /**\r\n   * \r\n   * @param {*} layer \r\n   * @param {*} latlng \r\n   */\n  openText: function openText(layer, latlng) {\n    if (!(layer instanceof Layer)) {\n      latlng = layer;\n      layer = this;\n    }\n    if (!latlng) {\n      latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();\n    }\n    var _map = this._map,\n        _text = this._text;\n\n    if (_map) {\n      _text._source = layer;\n      _text.setLatLng(latlng);\n      if (!_map.hasLayer(_text)) {\n        _map.addLayer(_text);\n      }\n    }\n  },\n\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\n  unbindText: function unbindText(map) {\n    var _text = this._text;\n\n    if (_text) {\n      map.removeLayer(_text);\n      this._text = null;\n    }\n  },\n\n  /**\r\n   * \r\n   */\n  _closeText: function _closeText() {\n    var _map = this._map,\n        _text = this._text;\n\n    if (_map && _text && _map.hasLayer(_text)) {\n      _map.removeLayer(_text);\n    }\n  },\n\n  /**\r\n   * \r\n   */\n  _moveText: function _moveText(e) {\n    this._text.setLatLng(e.latlng);\n  }\n});\n/**\r\n * \r\n */\nL.Canvas.include({\n  /**\r\n   * 获取文本宽度\r\n   */\n  _getTextWidth: function _getTextWidth(layer) {\n    this._ctx.font = layer.options.font;\n    return this._ctx.measureText(layer._text).width;\n  },\n\n  /**\r\n   * \r\n   */\n  _updateText: function _updateText(layer) {\n    if (!this._drawing || layer._empty()) {\n      return;\n    }\n\n    var p = layer._point;\n    var ctx = this._ctx;\n    var options = layer.options;\n\n    if (!options.fill) {\n      return;\n    }\n\n    if (options.offset) {\n      p = p.add(options.offset);\n    }\n    // \n    ctx.font = options.font;\n    ctx.translate(p.x, p.y);\n    ctx.rotate(options.rotation);\n    ctx.fillStyle = options.color;\n    ctx.textAlign = options.textAlign;\n    ctx.fillText(layer._text, 0, 0);\n    ctx.rotate(-options.rotation);\n    ctx.translate(-p.x, -p.y);\n  }\n});\n\n/**\r\n * \r\n */\nL.Text = L.Path.extend({\n  options: {\n    color: 'blue',\n    fill: true,\n    fillOpacity: 1.0,\n    rotation: 0.0,\n    stroke: false,\n    textAlign: 'center',\n    font: \"14px arial\"\n  },\n  /**\r\n   * \r\n   */\n  initialize: function initialize(latlng, text, options) {\n    L.setOptions(this, options);\n    this._latlng = L.latLng(latlng);\n    this._text = String(text || options.text);\n  },\n  /**\r\n   * \r\n   * @param {*} text \r\n   */\n  setContent: function setContent(text) {\n    this._text = String(text);\n    this._update();\n  },\n  setLatLng: function setLatLng(latlng) {\n    this._latlng = L.latLng(latlng);\n    this._update();\n  },\n  getLatLng: function getLatLng() {\n    return this._latlng;\n  },\n  _project: function _project() {\n    this._point = this._map.latLngToLayerPoint(this._latlng);\n    this._updateBounds();\n  },\n  _updateBounds: function _updateBounds() {\n    var w = this._renderer._getTextWidth(this);\n    var p = [w / 2, w / 2];\n    this._pxBounds = L.bounds(this._point.subtract(p), this._point.add(p));\n  },\n  _update: function _update() {\n    if (this._map) {\n      this._updatePath();\n    }\n  },\n  _updatePath: function _updatePath() {\n    this._renderer._updateText(this);\n  },\n  _empty: function _empty() {\n    return !this._renderer._bounds.intersects(this._pxBounds);\n  },\n\n\n  _containsPoint: function _containsPoint(p) {\n    return false;\n  },\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var _getLatLng = this.getLatLng(),\n        lat = _getLatLng.lat,\n        lng = _getLatLng.lng;\n\n    this.options.text = this._text;\n\n    return {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        coordinates: [lng, lat],\n        type: 'Text'\n      }\n    };\n  }\n});\n\nL.text = function (latlng, text, options) {\n  return new L.Text(latlng, text, options);\n};\n\n/***/ }),\n\n/***/ 33:\n/***/ (function(module, exports) {\n\n/**\r\n * @see https://github.com/mourner/simpleheat\r\n * @see https://github.com/Leaflet/Leaflet.heat\r\n */\nL.Heat = L.Layer.extend({\n  // options: {\n  //     minOpacity: 0.05,\n  //     maxZoom: 18,\n  //     radius: 25,\n  //     blur: 15,\n  //     max: 1.0\n  //     gradient: {\n  //        0.4: 'blue',\n  //        0.6: 'cyan',\n  //        0.7: 'lime',\n  //        0.8: 'yellow',\n  //        1.0: 'red'\n  //     }\n  // },\n  /**\r\n   * \r\n   * @param {*} latlngs \r\n   * @param {*} options \r\n   */\n  initialize: function initialize(latlngs, options) {\n    this._latlngs = latlngs;\n    L.setOptions(this, options);\n  },\n  setLatLngs: function setLatLngs(latlngs) {\n    this._latlngs = latlngs;\n    return this.redraw();\n  },\n  addLatLng: function addLatLng(latlng) {\n    this._latlngs.push(latlng);\n    return this.redraw();\n  },\n  setOptions: function setOptions(options) {\n    L.setOptions(this, options);\n    if (this._heat) {\n      this._updateOptions();\n    }\n    return this.redraw();\n  },\n  redraw: function redraw() {\n    if (this._heat && !this._frame && this._map && !this._map._animating) {\n      this._frame = L.Util.requestAnimFrame(this._redraw, this);\n    }\n    return this;\n  },\n  onAdd: function onAdd(map) {\n    this._map = map;\n\n    if (!this._canvas) {\n      this._initCanvas();\n    }\n\n    if (this.options.pane) {\n      this.getPane().appendChild(this._canvas);\n    } else {\n      map._panes.overlayPane.appendChild(this._canvas);\n    }\n\n    map.on('moveend', this._reset, this);\n\n    if (map.options.zoomAnimation && L.Browser.any3d) {\n      map.on('zoomanim', this._animateZoom, this);\n    }\n\n    this._reset();\n  },\n  onRemove: function onRemove(map) {\n    if (this.options.pane) {\n      this.getPane().removeChild(this._canvas);\n    } else {\n      map.getPanes().overlayPane.removeChild(this._canvas);\n    }\n\n    map.off('moveend', this._reset, this);\n\n    if (map.options.zoomAnimation) {\n      map.off('zoomanim', this._animateZoom, this);\n    }\n  },\n  addTo: function addTo(map) {\n    map.addLayer(this);\n    return this;\n  },\n  _initCanvas: function _initCanvas() {\n    var canvas = this._canvas = T.canvas('leaflet-heatmap-layer leaflet-layer');\n\n    var originProp = L.DomUtil.testProp(['transformOrigin', 'WebkitTransformOrigin', 'msTransformOrigin']);\n    canvas.style[originProp] = '50% 50%';\n\n    var size = this._map.getSize();\n    canvas.width = size.x;\n    canvas.height = size.y;\n\n    var animated = this._map.options.zoomAnimation && L.Browser.any3d;\n    L.DomUtil.addClass(canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\n\n    this._heat = simpleheat(canvas);\n    this._updateOptions();\n  },\n  _updateOptions: function _updateOptions() {\n    this._heat.radius(this.options.radius || this._heat.defaultRadius, this.options.blur);\n\n    if (this.options.gradient) {\n      this._heat.gradient(this.options.gradient);\n    }\n    if (this.options.max) {\n      this._heat.max(this.options.max);\n    }\n  },\n  _reset: function _reset() {\n    var topLeft = this._map.containerPointToLayerPoint([0, 0]);\n    L.DomUtil.setPosition(this._canvas, topLeft);\n\n    var size = this._map.getSize();\n\n    if (this._heat._width !== size.x) {\n      this._canvas.width = this._heat._width = size.x;\n    }\n    if (this._heat._height !== size.y) {\n      this._canvas.height = this._heat._height = size.y;\n    }\n\n    this._redraw();\n  },\n  _redraw: function _redraw() {\n    if (!this._map) {\n      return;\n    }\n    var data = [],\n        r = this._heat._r,\n        size = this._map.getSize(),\n        bounds = new L.Bounds(L.point([-r, -r]), size.add([r, r])),\n        max = this.options.max === undefined ? 1 : this.options.max,\n        maxZoom = this.options.maxZoom === undefined ? this._map.getMaxZoom() : this.options.maxZoom,\n        v = 1 / Math.pow(2, Math.max(0, Math.min(maxZoom - this._map.getZoom(), 12))),\n        cellSize = r / 2,\n        grid = [],\n        panePos = this._map._getMapPanePos(),\n        offsetX = panePos.x % cellSize,\n        offsetY = panePos.y % cellSize,\n        i,\n        len,\n        p,\n        cell,\n        x,\n        y,\n        j,\n        len2,\n        k;\n\n    // console.time('process');\n    for (i = 0, len = this._latlngs.length; i < len; i++) {\n      p = this._map.latLngToContainerPoint(this._latlngs[i]);\n      if (bounds.contains(p)) {\n        x = Math.floor((p.x - offsetX) / cellSize) + 2;\n        y = Math.floor((p.y - offsetY) / cellSize) + 2;\n\n        var alt = this._latlngs[i].alt || 1;\n        k = alt * v;\n\n        grid[y] = grid[y] || [];\n        cell = grid[y][x];\n\n        if (!cell) {\n          grid[y][x] = [p.x, p.y, k];\n        } else {\n          cell[0] = (cell[0] * cell[2] + p.x * k) / (cell[2] + k); // x\n          cell[1] = (cell[1] * cell[2] + p.y * k) / (cell[2] + k); // y\n          cell[2] += k; // cumulated intensity value\n        }\n      }\n    }\n\n    for (i = 0, len = grid.length; i < len; i++) {\n      if (grid[i]) {\n        for (j = 0, len2 = grid[i].length; j < len2; j++) {\n          cell = grid[i][j];\n          if (cell) {\n            data.push([Math.round(cell[0]), Math.round(cell[1]), Math.min(cell[2], max)]);\n          }\n        }\n      }\n    }\n    // console.timeEnd('process');\n\n    // console.time('draw ' + data.length);\n    this._heat.data(data).draw(this.options.minOpacity);\n    // console.timeEnd('draw ' + data.length);\n\n    this._frame = null;\n  },\n  _animateZoom: function _animateZoom(e) {\n    var scale = this._map.getZoomScale(e.zoom),\n        offset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\n\n    if (L.DomUtil.setTransform) {\n      L.DomUtil.setTransform(this._canvas, offset, scale);\n    } else {\n      this._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\n    }\n  }\n});\n\nL.heat = function (latlngs, options) {\n  return new L.Heat(latlngs, options);\n};\n\nfunction simpleheat(canvas) {\n  if (!(this instanceof simpleheat)) return new simpleheat(canvas);\n\n  this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\n\n  this._ctx = canvas.getContext('2d');\n  this._width = canvas.width;\n  this._height = canvas.height;\n\n  this._max = 1;\n  this._data = [];\n}\n\nsimpleheat.prototype = {\n\n  defaultRadius: 25,\n  /**\r\n   * \r\n   */\n  defaultGradient: {\n    0.4: 'blue',\n    0.6: 'cyan',\n    0.7: 'lime',\n    0.8: 'yellow',\n    1.0: 'red'\n  },\n\n  data: function data(_data) {\n    this._data = _data;\n    return this;\n  },\n  max: function max(_max) {\n    this._max = _max;\n    return this;\n  },\n  add: function add(point) {\n    this._data.push(point);\n    return this;\n  },\n  clear: function clear() {\n    this._data = [];\n    return this;\n  },\n  radius: function radius(r, blur) {\n    blur = blur === undefined ? 15 : blur;\n\n    // create a grayscale blurred circle image that we'll use for drawing points\n    var circle = this._circle = T.canvas(),\n        ctx = circle.getContext('2d'),\n        r2 = this._r = r + blur;\n\n    circle.width = circle.height = r2 * 2;\n\n    ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\n    ctx.shadowBlur = blur;\n    ctx.shadowColor = 'black';\n\n    ctx.beginPath();\n    ctx.arc(-r2, -r2, r, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n\n    return this;\n  },\n  resize: function resize() {\n    this._width = this._canvas.width;\n    this._height = this._canvas.height;\n  },\n  gradient: function gradient(grad) {\n    // create a 256x1 gradient that we'll use to turn a grayscale heatmap into a colored one\n    var canvas = T.canvas(),\n        ctx = canvas.getContext('2d'),\n        gradient = ctx.createLinearGradient(0, 0, 0, 256);\n\n    canvas.width = 1;\n    canvas.height = 256;\n\n    for (var i in grad) {\n      gradient.addColorStop(+i, grad[i]);\n    }\n\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, 1, 256);\n\n    this._grad = ctx.getImageData(0, 0, 1, 256).data;\n\n    return this;\n  },\n  draw: function draw(minOpacity) {\n    if (!this._circle) this.radius(this.defaultRadius);\n    if (!this._grad) this.gradient(this.defaultGradient);\n\n    var ctx = this._ctx;\n\n    ctx.clearRect(0, 0, this._width, this._height);\n\n    // draw a grayscale heatmap by putting a blurred circle at each data point\n    for (var i = 0, len = this._data.length, p; i < len; i++) {\n      p = this._data[i];\n      ctx.globalAlpha = Math.min(Math.max(p[2] / this._max, minOpacity === undefined ? 0.05 : minOpacity), 1);\n      ctx.drawImage(this._circle, p[0] - this._r, p[1] - this._r);\n    }\n\n    // colorize the heatmap, using opacity value of each pixel to get the right color from our gradient\n    var colored = ctx.getImageData(0, 0, this._width, this._height);\n    this._colorize(colored.data, this._grad);\n    ctx.putImageData(colored, 0, 0);\n\n    return this;\n  },\n  _colorize: function _colorize(pixels, gradient) {\n    for (var i = 0, len = pixels.length, j; i < len; i += 4) {\n      j = pixels[i + 3] * 4; // get gradient color from opacity value\n\n      if (j) {\n        pixels[i] = gradient[j];\n        pixels[i + 1] = gradient[j + 1];\n        pixels[i + 2] = gradient[j + 2];\n      }\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 34:\n/***/ (function(module, exports) {\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2019-1-17\r\n */\nvar KAPPA = 4 * (Math.sqrt(2) - 1) / 3;\nvar WIDTH_FACTOR = 0.0333;\nvar HEIGHT_FACTOR = 0.4;\n/**\r\n * \r\n */\nL.Canvas.include({\n    /**\r\n     * \r\n     */\n    _updateBalloon: function _updateBalloon(layer) {\n        if (!this._drawing || layer._empty()) {\n            return;\n        }\n        //\n        var p = layer._point;\n        var ctx = this._ctx;\n        var options = layer.options;\n        //\n        var x = p.x,\n            y = p.y;\n        var radius = options.radius,\n            color = options.color,\n            offset = options.offset,\n            label = options.label;\n\n        radius -= 3;\n        //\n        if (!offset) {\n            offset = [0, -32];\n        }\n        x += offset[0];\n        y += offset[1];\n\n        var handleLength = KAPPA * radius * .6;\n\n        var widthDiff = radius * WIDTH_FACTOR;\n        var heightDiff = radius * HEIGHT_FACTOR;\n\n        var balloonBottomY = y + radius + heightDiff;\n\n        // 开始绘制\n        ctx.beginPath();\n\n        // Top Left Curve\n        var topLeftCurveStartX = x - radius;\n        var topLeftCurveStartY = y;\n\n        var topLeftCurveEndX = x;\n        var topLeftCurveEndY = y - radius;\n\n        ctx.moveTo(topLeftCurveStartX, topLeftCurveStartY);\n        ctx.bezierCurveTo(topLeftCurveStartX, topLeftCurveStartY - handleLength - widthDiff, topLeftCurveEndX - handleLength, topLeftCurveEndY, topLeftCurveEndX, topLeftCurveEndY);\n\n        // Top Right Curve\n        var topRightCurveStartX = x;\n        var topRightCurveStartY = y - radius;\n\n        var topRightCurveEndX = x + radius;\n        var topRightCurveEndY = y;\n\n        ctx.bezierCurveTo(topRightCurveStartX + handleLength + widthDiff, topRightCurveStartY, topRightCurveEndX, topRightCurveEndY - handleLength, topRightCurveEndX, topRightCurveEndY);\n\n        // Bottom Right Curve\n        var bottomRightCurveStartX = x + radius;\n        var bottomRightCurveStartY = y;\n\n        var bottomRightCurveEndX = x;\n        var bottomRightCurveEndY = balloonBottomY;\n\n        ctx.bezierCurveTo(bottomRightCurveStartX, bottomRightCurveStartY + handleLength, bottomRightCurveEndX + handleLength, bottomRightCurveEndY, bottomRightCurveEndX, bottomRightCurveEndY);\n\n        // Bottom Left Curve\n        var bottomLeftCurveStartX = x;\n        var bottomLeftCurveStartY = balloonBottomY;\n\n        var bottomLeftCurveEndX = x - radius;\n        var bottomLeftCurveEndY = y;\n\n        ctx.bezierCurveTo(bottomLeftCurveStartX - handleLength, bottomLeftCurveStartY, bottomLeftCurveEndX, bottomLeftCurveEndY + handleLength, bottomLeftCurveEndX, bottomLeftCurveEndY);\n\n        ctx.fillStyle = color;\n        ctx.fill();\n\n        //\n        ctx.beginPath();\n        ctx.strokeStyle = color;\n        ctx.moveTo(x, balloonBottomY);\n        ctx.lineTo(x, balloonBottomY + 3);\n        ctx.stroke();\n        //\n        if (label) {\n            ctx.beginPath();\n            ctx.font = '14px arial';\n            ctx.fillStyle = 'white';\n            ctx.textAlign = 'center';\n            ctx.fillText(label, x, y + 5);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @see https://github.com/ggolikov/Leaflet.River\r\n */\nvar _L = L,\n    FeatureGroup = _L.FeatureGroup,\n    setOptions = _L.setOptions,\n    toPolyline = _L.polyline;\n\nvar FeatureGroupPrototype = FeatureGroup.prototype;\n/**\r\n * 性能太差，有待优化\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (FeatureGroup.extend({\n  options: {\n    color: 'blue',\n    minWidth: 1,\n    maxWidth: 10,\n    ratio: null\n  },\n\n  initialize: function initialize(latLngs, options) {\n    FeatureGroupPrototype.initialize.call(this, [], options);\n    this._latLngs = latLngs;\n\n    setOptions(this, options);\n    this._buildLines(latLngs);\n  },\n  onAdd: function onAdd(map) {\n    FeatureGroupPrototype.onAdd.call(this, map);\n    this._getLength(map);\n    this.setStyle();\n  },\n  _buildLines: function _buildLines(latLngs) {\n    for (var i = 0; i < latLngs.length - 1; i++) {\n      var line = toPolyline([latLngs[i], latLngs[i + 1]]);\n      this.addLayer(line);\n    }\n  },\n  _getLength: function _getLength(map) {\n    var latLngs = this._latLngs,\n        totalLength = 0;\n\n    for (var i = 0; i < latLngs.length - 1; i++) {\n      totalLength += map.latLngToLayerPoint(latLngs[i]).distanceTo(map.latLngToLayerPoint(latLngs[i + 1]));\n    }\n\n    return this._length = totalLength;\n  },\n\n\n  /**\r\n   * \r\n   */\n  setStyle: function setStyle(style) {\n    var opt = this.options = L.extend(this.options, style),\n        totalLength = this._length,\n        map = this._map,\n        layers = this._layers,\n        length = 0,\n        layer,\n        latLngs;\n\n    for (var key in layers) {\n      layer = layers[key];\n      latLngs = layer.getLatLngs();\n      length += map.latLngToLayerPoint(latLngs[0]).distanceTo(map.latLngToLayerPoint(latLngs[1]));\n      layer.setStyle(L.extend({}, opt, {\n        weight: opt.ratio ? length / opt.ratio : opt.minWidth + (opt.maxWidth - opt.minWidth) * (length / totalLength)\n      }));\n    }\n  },\n  setMinWidth: function setMinWidth(width) {\n    this.setStyle({\n      minWidth: width\n    });\n  },\n  setMaxWidth: function setMaxWidth(width) {\n    this.setStyle({\n      maxWidth: width\n    });\n  },\n  getMinWidth: function getMinWidth() {\n    return this.options.minWidth;\n  },\n  getMaxWidth: function getMaxWidth() {\n    return this.options.maxWidth;\n  },\n  useLength: function useLength(ratio) {\n    setOptions(this, {\n      ratio: ratio\n    });\n    return this;\n  },\n  convertToPolyline: function convertToPolyline(options) {\n    return toPolyline(this._latLngs, options);\n  }\n}));\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export bezier */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return coattail; });\n/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.11\r\n */\n// import {distance} from './Util'\n/**\r\n * n次贝塞尔曲线\r\n * @param arr [[x,y],[x,y]]\r\n */\nvar bezier = function bezier(arr, step) {\n  var points = [arr[0]]; //第一个点\n  var l = arr.length;\n  for (var i = step; i < 1; i += step) {\n    points.push(PBezier(arr, l, i));\n  }\n  points.push(arr[l - 1]);\n  return points;\n};\n/** \r\n * 燕尾、军标箭头\r\n * @param arr\r\n * @param step\r\n * @param options\r\n */\nvar coattail = function coattail(arr, step, options) {\n  var _T$assign = T.assign({\n    r: 36, //箭头两边长度\n    ra: 0.2, //张开弧度系数\n    ma: 16 //最大宽度\n  }, options),\n      r = _T$assign.r,\n      ra = _T$assign.ra,\n      ma = _T$assign.ma;\n\n  var PI = Math.PI;\n  //\n\n  var points = [arr[0]]; // 第一个点\n  var l = arr.length; //\n  var p0 = arr[0]; // 上个点\n  var num = Math.ceil(1 / step + 1) * 2; // 贝塞尔曲线上的点数\n  var ci = 1,\n      p = void 0;\n  if (l < 2) return arr;\n  // 贝塞尔\n  for (var i = step; i < 1; i += step, ci++) {\n    p = PBezier(arr, l, i); //当前点\n    var _r = ma - i * 9; //半径\n    var _radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]) - Math.PI / 2;\n    var offsetX = _r * Math.cos(_radians);\n    var offsetY = _r * Math.sin(_radians);\n    points[ci] = [p[0] + offsetX, p[1] + offsetY];\n    points[num - ci] = [p[0] - offsetX, p[1] - offsetY];\n    p0 = p;\n  }\n  // 箭头\n  p = arr[l - 1];\n  var radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]);\n  p = [p0[0] + (ma + 2) * Math.cos(radians), p0[1] + (ma + 2) * Math.sin(radians)];\n  points[ci++] = [p[0] + r * Math.cos(PI * (1 + ra) + radians), p[1] + r * Math.sin(PI * (1 + ra) + radians)];\n  points[ci++] = p;\n  points[ci] = [p[0] + r * Math.cos(PI * (1 - ra) + radians), p[1] + r * Math.sin(PI * (1 - ra) + radians)];\n  // 最后一个点 \n  points.push(arr[0]);\n  return points;\n};\n//\nvar PBezier = function PBezier(arr, l, t) {\n  var px = 0,\n      py = 0,\n      n = l - 1; //n次\n  for (var i = 0, b; i < l; i++) {\n    b = BEZ(n, i, t);\n    px += arr[i][0] * b;\n    py += arr[i][1] * b;\n  }\n  return [px, py];\n};\n//基函数\nvar BEZ = function BEZ(n, k, t) {\n  return C(n, k) * Math.pow(t, k) * Math.pow(1 - t, n - k);\n};\n//组合排序\nvar C = function C(n, k) {\n  return Factorial(n) / (Factorial(k) * Factorial(n - k));\n};\n//阶乘\nvar Factorial = function Factorial(i) {\n  var n = 1;\n  for (var j = 1; j <= i; j++) {\n    n *= j;\n  }\n  return n;\n};\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, exports) {\n\n(function () {\n  'use strict';\n\n  /** @preserve OverlappingMarkerSpiderfier\n  https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet\n  Copyright (c) 2011 - 2012 George MacKerron\n  Released under the MIT licence: http://opensource.org/licenses/mit-license\n  Note: The Leaflet maps API must be included *before* this code\n   */\n  var hasProp = {}.hasOwnProperty,\n    slice = [].slice;\n\n  (function () {\n\n    if (this['L'] == null) {\n      return;\n    }\n    return this['OverlappingMarkerSpiderfier'] = L.OverlappingMarkerSpiderfier = (function () {\n      var p, twoPi;\n\n      p = _Class.prototype;\n\n      p['VERSION'] = '0.2.6';\n\n      twoPi = Math.PI * 2;\n\n      p['keepSpiderfied'] = false;\n\n      p['nearbyDistance'] = 20;\n\n      p['circleSpiralSwitchover'] = 9;\n\n      p['circleFootSeparation'] = 25;\n\n      p['circleStartAngle'] = twoPi / 12;\n\n      p['spiralFootSeparation'] = 28;\n\n      p['spiralLengthStart'] = 11;\n\n      p['spiralLengthFactor'] = 5;\n\n      p['legWeight'] = 1.5;\n\n      p['legColors'] = {\n        'usual': '#222',\n        'highlighted': '#f00'\n      };\n\n      function _Class(map, opts) {\n        var e, j, k, len, ref, v;\n        this.map = map;\n        if (opts == null) {\n          opts = {};\n        }\n        for (k in opts) {\n          if (!hasProp.call(opts, k)) continue;\n          v = opts[k];\n          this[k] = v;\n        }\n        this.initMarkerArrays();\n        this.listeners = {};\n        ref = ['click', 'zoomend'];\n        for (j = 0, len = ref.length; j < len; j++) {\n          e = ref[j];\n          this.map.addEventListener(e, (function (_this) {\n            return function () {\n              return _this['unspiderfy']();\n            };\n          })(this));\n        }\n      }\n\n      p.initMarkerArrays = function () {\n        this.markers = [];\n        return this.markerListeners = [];\n      };\n\n      p['addMarker'] = function (marker) {\n        var markerListener;\n        if (marker['_oms'] != null) {\n          return this;\n        }\n        marker['_oms'] = true;\n        markerListener = (function (_this) {\n          return function () {\n            return _this.spiderListener(marker);\n          };\n        })(this);\n        marker.addEventListener('click', markerListener);\n        this.markerListeners.push(markerListener);\n        this.markers.push(marker);\n        return this;\n      };\n\n      p['getMarkers'] = function () {\n        return this.markers.slice(0);\n      };\n\n      p['removeMarker'] = function (marker) {\n        var i, markerListener;\n        if (marker['_omsData'] != null) {\n          this['unspiderfy']();\n        }\n        i = this.arrIndexOf(this.markers, marker);\n        if (i < 0) {\n          return this;\n        }\n        markerListener = this.markerListeners.splice(i, 1)[0];\n        marker.removeEventListener('click', markerListener);\n        delete marker['_oms'];\n        this.markers.splice(i, 1);\n        return this;\n      };\n\n      p['clearMarkers'] = function () {\n        var i, j, len, marker, markerListener, ref;\n        this['unspiderfy']();\n        ref = this.markers;\n        for (i = j = 0, len = ref.length; j < len; i = ++j) {\n          marker = ref[i];\n          markerListener = this.markerListeners[i];\n          marker.removeEventListener('click', markerListener);\n          delete marker['_oms'];\n        }\n        this.initMarkerArrays();\n        return this;\n      };\n\n      p['addListener'] = function (event, func) {\n        var base;\n        ((base = this.listeners)[event] != null ? base[event] : base[event] = []).push(func);\n        return this;\n      };\n\n      p['removeListener'] = function (event, func) {\n        var i;\n        i = this.arrIndexOf(this.listeners[event], func);\n        if (!(i < 0)) {\n          this.listeners[event].splice(i, 1);\n        }\n        return this;\n      };\n\n      p['clearListeners'] = function (event) {\n        this.listeners[event] = [];\n        return this;\n      };\n\n      p.trigger = function () {\n        var args, event, func, j, len, ref, ref1, results;\n        event = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n        ref1 = (ref = this.listeners[event]) != null ? ref : [];\n        results = [];\n        for (j = 0, len = ref1.length; j < len; j++) {\n          func = ref1[j];\n          results.push(func.apply(null, args));\n        }\n        return results;\n      };\n\n      p.generatePtsCircle = function (count, centerPt) {\n        var angle, angleStep, circumference, i, j, legLength, ref, results;\n        circumference = this['circleFootSeparation'] * (2 + count);\n        legLength = circumference / twoPi;\n        angleStep = twoPi / count;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle = this['circleStartAngle'] + i * angleStep;\n          results.push(new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle)));\n        }\n        return results;\n      };\n\n      p.generatePtsSpiral = function (count, centerPt) {\n        var angle, i, j, legLength, pt, ref, results;\n        legLength = this['spiralLengthStart'];\n        angle = 0;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle += this['spiralFootSeparation'] / legLength + i * 0.0005;\n          pt = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle));\n          legLength += twoPi * this['spiralLengthFactor'] / angle;\n          results.push(pt);\n        }\n        return results;\n      };\n\n      p.spiderListener = function (marker) {\n        var j, len, m, mPt, markerPt, markerSpiderfied, nearbyMarkerData, nonNearbyMarkers, pxSq, ref;\n        markerSpiderfied = marker['_omsData'] != null;\n        if (!(markerSpiderfied && this['keepSpiderfied'])) {\n          this['unspiderfy']();\n        }\n        if (markerSpiderfied) {\n          return this.trigger('click', marker);\n        } else {\n          nearbyMarkerData = [];\n          nonNearbyMarkers = [];\n          pxSq = this['nearbyDistance'] * this['nearbyDistance'];\n          markerPt = this.map.latLngToLayerPoint(marker.getLatLng());\n          ref = this.markers;\n          for (j = 0, len = ref.length; j < len; j++) {\n            m = ref[j];\n            if (!this.map.hasLayer(m)) {\n              continue;\n            }\n            mPt = this.map.latLngToLayerPoint(m.getLatLng());\n            if (this.ptDistanceSq(mPt, markerPt) < pxSq) {\n              nearbyMarkerData.push({\n                marker: m,\n                markerPt: mPt\n              });\n            } else {\n              nonNearbyMarkers.push(m);\n            }\n          }\n          if (nearbyMarkerData.length === 1) {\n            return this.trigger('click', marker);\n          } else {\n            return this.spiderfy(nearbyMarkerData, nonNearbyMarkers);\n          }\n        }\n      };\n\n      p.makeHighlightListeners = function (marker) {\n        return {\n          highlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['highlighted']\n              });\n            };\n          })(this),\n          unhighlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['usual']\n              });\n            };\n          })(this)\n        };\n      };\n\n      p.spiderfy = function (markerData, nonNearbyMarkers) {\n        var bodyPt, footLl, footPt, footPts, leg, marker, md, mhl, nearestMarkerDatum, numFeet, spiderfiedMarkers;\n        this.spiderfying = true;\n        numFeet = markerData.length;\n        bodyPt = this.ptAverage((function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = markerData.length; j < len; j++) {\n            md = markerData[j];\n            results.push(md.markerPt);\n          }\n          return results;\n        })());\n        footPts = numFeet >= this['circleSpiralSwitchover'] ? this.generatePtsSpiral(numFeet, bodyPt).reverse() : this.generatePtsCircle(numFeet, bodyPt);\n        spiderfiedMarkers = (function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = footPts.length; j < len; j++) {\n            footPt = footPts[j];\n            footLl = this.map.layerPointToLatLng(footPt);\n            nearestMarkerDatum = this.minExtract(markerData, (function (_this) {\n              return function (md) {\n                return _this.ptDistanceSq(md.markerPt, footPt);\n              };\n            })(this));\n            marker = nearestMarkerDatum.marker;\n            leg = new L.Polyline([marker.getLatLng(), footLl], {\n              color: this['legColors']['usual'],\n              weight: this['legWeight'],\n              clickable: false\n            });\n            this.map.addLayer(leg);\n            marker['_omsData'] = {\n              usualPosition: marker.getLatLng(),\n              leg: leg\n            };\n            if (this['legColors']['highlighted'] !== this['legColors']['usual']) {\n              mhl = this.makeHighlightListeners(marker);\n              marker['_omsData'].highlightListeners = mhl;\n              marker.addEventListener('mouseover', mhl.highlight);\n              marker.addEventListener('mouseout', mhl.unhighlight);\n            }\n            marker.setLatLng(footLl);\n            marker.setZIndexOffset(1000000);\n            results.push(marker);\n          }\n          return results;\n        }).call(this);\n        delete this.spiderfying;\n        this.spiderfied = true;\n        return this.trigger('spiderfy', spiderfiedMarkers, nonNearbyMarkers);\n      };\n\n      p['unspiderfy'] = function (markerNotToMove) {\n        var j, len, marker, mhl, nonNearbyMarkers, ref, unspiderfiedMarkers;\n        if (markerNotToMove == null) {\n          markerNotToMove = null;\n        }\n        if (this.spiderfied == null) {\n          return this;\n        }\n        this.unspiderfying = true;\n        unspiderfiedMarkers = [];\n        nonNearbyMarkers = [];\n        ref = this.markers;\n        for (j = 0, len = ref.length; j < len; j++) {\n          marker = ref[j];\n          if (marker['_omsData'] != null) {\n            this.map.removeLayer(marker['_omsData'].leg);\n            if (marker !== markerNotToMove) {\n              marker.setLatLng(marker['_omsData'].usualPosition);\n            }\n            marker.setZIndexOffset(0);\n            mhl = marker['_omsData'].highlightListeners;\n            if (mhl != null) {\n              marker.removeEventListener('mouseover', mhl.highlight);\n              marker.removeEventListener('mouseout', mhl.unhighlight);\n            }\n            delete marker['_omsData'];\n            unspiderfiedMarkers.push(marker);\n          } else {\n            nonNearbyMarkers.push(marker);\n          }\n        }\n        delete this.unspiderfying;\n        delete this.spiderfied;\n        this.trigger('unspiderfy', unspiderfiedMarkers, nonNearbyMarkers);\n        return this;\n      };\n\n      p.ptDistanceSq = function (pt1, pt2) {\n        var dx, dy;\n        dx = pt1.x - pt2.x;\n        dy = pt1.y - pt2.y;\n        return dx * dx + dy * dy;\n      };\n\n      p.ptAverage = function (pts) {\n        var j, len, numPts, pt, sumX, sumY;\n        sumX = sumY = 0;\n        for (j = 0, len = pts.length; j < len; j++) {\n          pt = pts[j];\n          sumX += pt.x;\n          sumY += pt.y;\n        }\n        numPts = pts.length;\n        return new L.Point(sumX / numPts, sumY / numPts);\n      };\n\n      p.minExtract = function (set, func) {\n        var bestIndex, bestVal, index, item, j, len, val;\n        for (index = j = 0, len = set.length; j < len; index = ++j) {\n          item = set[index];\n          val = func(item);\n          if ((typeof bestIndex === \"undefined\" || bestIndex === null) || val < bestVal) {\n            bestVal = val;\n            bestIndex = index;\n          }\n        }\n        return set.splice(bestIndex, 1)[0];\n      };\n\n      p.arrIndexOf = function (arr, obj) {\n        var i, j, len, o;\n        if (arr.indexOf != null) {\n          return arr.indexOf(obj);\n        }\n        for (i = j = 0, len = arr.length; j < len; i = ++j) {\n          o = arr[i];\n          if (o === obj) {\n            return i;\n          }\n        }\n        return -1;\n      };\n\n      return _Class;\n\n    })();\n  }).call(window);\n\n}());\n\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"default\"] = addStylesClient;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__listToStyles__ = __webpack_require__(22);\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\n\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nfunction addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = Object(__WEBPACK_IMPORTED_MODULE_0__listToStyles__[\"a\" /* default */])(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = Object(__WEBPACK_IMPORTED_MODULE_0__listToStyles__[\"a\" /* default */])(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_VectorMarker__ = __webpack_require__(2);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\n\n\n//\n/**\r\n * 点图元绘制工具\r\n */\n\nvar PointTool = function (_Tool) {\n  _inherits(PointTool, _Tool);\n\n  function PointTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PointTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { src: 'circle', color: '#000', radius: 5, fillColor: '#FFF', weight: 1, fillOpacity: 1 }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PointTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    //\n    // this.map.once('mousedown', this.onMouseDown);\n    // this.map.once('mouseup', this.onEnd);\n    //\n    this.map.on('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PointTool.prototype.cancel = function cancel() {\n    this.map.off('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\n\n\n  PointTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var latlng = e.latlng;\n    var options = this.options,\n        layer = this.layer,\n        marker = this.marker;\n\n\n    if (marker) {\n      marker.setLatLng(latlng);\n    } else {\n      this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_VectorMarker__[\"a\" /* default */](latlng, options.feature).addTo(layer);\n    }\n    this.onEnd();\n  };\n\n  return PointTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PointTool);\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n//\nvar _L = L,\n    Polyline = _L.Polyline;\n/**\r\n * 线绘制工具\r\n */\n\nvar PolylineTool = function (_Tool) {\n  _inherits(PolylineTool, _Tool);\n\n  function PolylineTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PolylineTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', weight: 2 }\n\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PolylineTool.prototype.start = function start() {\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PolylineTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.mp = null;\n  };\n  /**\r\n   * 绘制\r\n   */\n\n\n  PolylineTool.prototype.onMouseDown = function onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('dblclick', this.onEnd, this);\n    } else {\n      this.mp = null;\n    }\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  PolylineTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker,\n        mp = this.mp;\n    var latlng = e.latlng;\n\n    if (!mp) {\n      //\n      marker.addLatLng(latlng);\n      this.mp = latlng;\n    } else {\n      mp.lat = latlng.lat;\n      mp.lng = latlng.lng;\n      marker.getBounds().extend(mp);\n      marker.redraw();\n    }\n  };\n\n  return PolylineTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PolylineTool);\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\n\n//\nvar _L = L,\n    Polygon = _L.Polygon;\n/**\r\n * 多边形绘制工具\r\n */\n\nvar PolygonTool = function (_Tool) {\n  _inherits(PolygonTool, _Tool);\n\n  function PolygonTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PolygonTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', fillOpacity: .5, weight: 1 }\n      /**\r\n       * \r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  } // move point\n\n\n  PolygonTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    //\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * \r\n   */\n\n\n  PolygonTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.mp = null;\n  };\n  /**\r\n   * \r\n   */\n\n\n  PolygonTool.prototype._onMouseDown = function _onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var latlng = e.latlng;\n\n    if (!marker) {\n      marker = this.marker = new Polygon([latlng], options.feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('dblclick', this.onEnd, this);\n    }\n    this.mp = null;\n  };\n  /**\r\n   * \r\n   */\n\n\n  PolygonTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker,\n        mp = this.mp;\n    var latlng = e.latlng;\n\n    if (!mp) {\n      marker.addLatLng(latlng);\n      this.mp = latlng;\n    } else {\n      mp.lat = latlng.lat;\n      mp.lng = latlng.lng;\n      marker.getBounds().extend(mp);\n      marker.redraw();\n    }\n  };\n\n  return PolygonTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PolygonTool);\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_Circle__ = __webpack_require__(170);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n// let { Circle } = L;\n/**\r\n * 圆形绘制工具\r\n */\n\nvar CircleTool = function (_Tool) {\n  _inherits(CircleTool, _Tool);\n\n  function CircleTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, CircleTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', fillOpacity: .5, weight: 1 }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  CircleTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.once('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  CircleTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n  };\n  /**\r\n   * @param e \r\n   */\n\n\n  CircleTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var options = this.options;\n    var map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n\n    this.clear(); //重复绘制，先移除旧图元\n    //\n    this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_Circle__[\"a\" /* default */](latlng, options.feature).addTo(layer);\n    map.on('mousemove', this.onMouseMove, this);\n    map.once('mouseup', this.onEnd, this);\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  CircleTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker;\n\n    var latlng = e.latlng;\n    var center = marker.getLatLng();\n    var r = latlng.distanceTo(center);\n    marker.setRadius(r);\n    marker.redraw();\n  };\n\n  return CircleTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CircleTool);\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = lonlats;\n/**\r\n * @author gyb(mocheer)\r\n * @since 2017.5.20\r\n */\nvar _T = T,\n    isArray = _T.isArray;\nvar _L = L,\n    latLng = _L.latLng;\n/**\r\n * @param coords 支持的格式:\r\n * 一维：\r\n * {lat,lng}\r\n * {lon,lat}\r\n * [lon,lat]\r\n * 二维：\r\n * [[lon,lat],[lon,lat]...]\r\n * [{lon,lat},{lon,lat}...]\r\n * [{lat,lng},{lon,lng}...]\r\n * 多维：\r\n * ...\r\n */\n\nfunction lonlats(coords, deep) {\n  return deep-- && coords.map(function (item) {\n    return lonlats(item, deep);\n  }) || isArray(coords) && latLng(coords[1], coords[0]) || latLng(coords);\n}\n\n/***/ })\n\n/******/ })});;\n\n\n// WEBPACK FOOTER //\n// plugins/drawLayer.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/dmap/leaflet/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 165);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7b19f38a437100774b0e","/**\r\n * @author gyb(mocheer)\r\n * @email mocheer@foxmail.com\r\n * @since 2017.5.26\r\n */\r\nlet {\r\n  Layer,\r\n  Popup,\r\n  DomEvent\r\n} = L;\r\nlet {\r\n  div: $div\r\n} = T;\r\n//\r\n/**\r\n * 弹出层\r\n * @param {props,el}\r\n */\r\nexport default L.Popup2 = Popup.extend({\r\n  options: {\r\n    // 最大宽度,设置为 Infinity 居中\r\n    maxWidth: 0,\r\n    // // 最小宽度\r\n    minWidth: 0,\r\n    // 自动平移，拖动地图以便于popup的最佳显示\r\n    autoPan: false,\r\n    //\r\n    autoPosition: true,\r\n    //\r\n    // keepInView: false,\r\n    // 点击不关闭\r\n    closeButton: false,\r\n    //\r\n    // closeOnClick: false,\r\n    //\r\n    autoClose: false,\r\n    //\r\n    // autoPanPaddingTopLeft: L.point(0, 50)\r\n  },\r\n  // update() {\r\n  // \tPopup.prototype.update.call(this)\r\n  // },\r\n  _initLayout() {\r\n    let that = this;\r\n    let {\r\n      options,\r\n      branch\r\n    } = that;\r\n    let {\r\n      leaf\r\n    } = options;\r\n    if (leaf && !branch) {\r\n      // L.setOptions(that, { maxWidth: Infinity || 0, minWidth: leaf.minWidth || 0 });\r\n      //\r\n      let {\r\n        className\r\n      } = options;\r\n      let prefix = 'leaflet-popup';\r\n      let container = that._container = $div(prefix + ' ' + (className || '') + ' leaflet-zoom-animated');\r\n      let contentNode = that._contentNode = $div('', container); //挂载的对象\r\n      // 禁止滚轮和点击事件，用于拦截地图事件\r\n      DomEvent.disableScrollPropagation(container);\r\n      DomEvent.disableClickPropagation(container);\r\n      // \r\n      leaf.el = $div();\r\n      leaf.props = T.assign({}, leaf.props, {\r\n        owner: that, // 弹出层对象\r\n        marker: that._source, // 图元对象\r\n        data: that._source && that._source.__data // 图元数据\r\n      })\r\n      // __vue__\r\n      this.branch = T.render(leaf).then(vm => {\r\n        let el = vm.$el;\r\n        if (options.maxWidth) {\r\n          let style = container.style;\r\n          style.width = el.clientWidth + 'px';\r\n          style.height = el.clientHeight + 'px';\r\n        }\r\n        this.setContent(el);\r\n        return vm;\r\n      })\r\n    } else {\r\n      Popup.prototype._initLayout.call(that);\r\n    }\r\n  },\r\n  /**\r\n   * 向下翻转\r\n   */\r\n  _getAnchor() {\r\n    let point = Popup.prototype._getAnchor.call(this);\r\n    let {\r\n      _map: map,\r\n      _contentNode: container,\r\n      _source: marker,\r\n      options\r\n    } = this;\r\n    let leaf = container.firstChild;\r\n    // 点\r\n    // todo 面的弹出\r\n    if (options.autoPosition && options.leaf && leaf && marker && marker._latlng) {\r\n      let {\r\n        style\r\n      } = leaf;\r\n      style.left = style.top = '0px'; //todo，拖动位置还原\r\n      let contentHeight = leaf.clientHeight + 20; //20 marginBottom\r\n      let {\r\n        x,\r\n        y\r\n      } = map.latLngToContainerPoint(marker._latlng);\r\n      let size = map.getSize();\r\n      let dx = 16,\r\n        dy = 0;\r\n      //\r\n      if (container.clientHeight) {\r\n        // 上下边界\r\n        if (y - contentHeight < 0) {\r\n          dy = contentHeight;\r\n          if (y + dy > size.y) {\r\n            dy -= (y + dy - size.y)\r\n          }\r\n        }\r\n      } else {\r\n        // 上下边界\r\n        if (y + contentHeight > size.y) {\r\n          dy = -contentHeight;\r\n          if (y + dy < 0) {\r\n            dy -= y + dy\r\n          }\r\n        }\r\n      }\r\n      // 右边界\r\n      if (x + leaf.clientWidth > size.x) {\r\n        dx = -leaf.clientWidth - dx;\r\n      }\r\n      // \r\n      if (dx || dy) {\r\n        let {\r\n          x,\r\n          y\r\n        } = point;\r\n        point = [dx + x, dy + y]\r\n      }\r\n    }\r\n    return point;\r\n  }\r\n})\r\n\r\n/**\r\n * 默认初始化为Popup\r\n */\r\nLayer.include({\r\n  /**\r\n   * \r\n   * @param {*} content \r\n   * @param {*} options \r\n   */\r\n  bindPopup(content, options) {\r\n    if (content instanceof Popup) {\r\n      L.setOptions(content, options);\r\n      this._popup = content;\r\n      (content)._source = this;\r\n    } else {\r\n      if (!this._popup || options) {\r\n        this._popup = new Popup(options, this);\r\n      }\r\n      this._popup.setContent(content);\r\n    }\r\n\r\n    if (!this._popupHandlersAdded) {\r\n      let events = {\r\n        click: this._openPopup,\r\n        keypress: this._onKeyPress,\r\n        remove: this.closePopup,\r\n        move: this._movePopup\r\n      }\r\n      if (options && options.hover) events.mouseover = this._openPopup;\r\n      this.on(events)\r\n      this._popupHandlersAdded = true;\r\n    }\r\n    return this;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  unbindPopup() {\r\n    if (this._popup) {\r\n      this.off({\r\n        click: this._openPopup,\r\n        keypress: this._onKeyPress,\r\n        remove: this.closePopup,\r\n        move: this._movePopup\r\n      });\r\n      this._popupHandlersAdded = false;\r\n      this._popup = null;\r\n    }\r\n    return this;\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfill/Popup.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2018-8-3\r\n */\r\nlet imgs = {};\r\nexport default url => imgs[url] = imgs[url] || (function () {\r\n  let funcs = [];\r\n  let img = new Image();\r\n  let complete = false;\r\n  let loader = imgs[url] = {\r\n    then: func => {\r\n      complete ? func(img) : funcs.push(func);\r\n    }\r\n  };\r\n  img.src = url;\r\n  img.onload = () => {\r\n    complete = true;\r\n    while (funcs.length > 0) {\r\n      funcs.shift()(img)\r\n    }\r\n  }\r\n  return loader;\r\n})()\r\n\r\n\r\n/**\r\n * 弃用\r\n * ie下，基于 polyfill 的 promise 太影响性能。\r\n */\r\n// export default url => imgs[url] = imgs[url] || new Promise(reject => {\r\n//   let img = new Image();\r\n//   img.src = url;\r\n//   // 加载src资源时 complete 为true,即使图片尚未加载\r\n//   // img.addEventListener('load', e => {\r\n//   //   reject(img);\r\n//   // })\r\n//   img.onload = e => { reject(img) }\r\n// })\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Loader.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport PointTool from './tools/PointTool';\r\nimport PolylineTool from './tools/PolylineTool';\r\nimport {\r\n  DistancePolylineTool,\r\n  DistancePolygonTool\r\n} from './tools/DistanceTool';\r\nimport PenTool from './tools/PenTool';\r\nimport PenFillTool from './tools/PenFillTool';\r\nimport RectTool from './tools/RectTool';\r\nimport PolygonTool from './tools/PolygonTool';\r\nimport CircleTool from './tools/CircleTool';\r\nimport EllipseTool from './tools/EllipseTool';\r\nimport MilitaryArrowTool from './tools/MilitaryArrowTool';\r\nimport TextTool from \"./tools/TextTool\";\r\nimport VectorMarker from '@/feature/VectorMarker';\r\nimport FeatureLayer from \"@/layer/FeatureLayer\";\r\nimport {\r\n  pointInPolygon\r\n} from '@/utils/geoUtils';\r\n//\r\n// 涉及重写Polyline 的 onAdd 和 flow 有顺序执行的冲突\r\nimport '@/plugins/meature/leaflet-measure-path';\r\nimport '@/plugins/meature/leaflet-measure-path.css';\r\n//\r\nlet {\r\n  isArray\r\n} = T;\r\nlet {\r\n  Marker,\r\n  Polyline,\r\n  Polygon,\r\n  Circle,\r\n  CircleMarker\r\n} = L;\r\n/**\r\n * 标绘工具-管理器\r\n */\r\nexport default class DrawLayer extends FeatureLayer {\r\n  /**\r\n   * 用于回滚\r\n   */\r\n  history = []\r\n  /**\r\n   * 用于前进\r\n   */\r\n  next = []\r\n  /**\r\n   * 当前的绘制编辑对象\r\n   */\r\n  marker\r\n  /**\r\n   * 当前的绘制工具对象\r\n   */\r\n  tool\r\n  /**\r\n   * 当前的绘制工具类\r\n   */\r\n  Tool\r\n  /**\r\n   * \r\n   */\r\n  // options = { reable: false, editable: true, draggable: true }\r\n  /**\r\n   * \r\n   * @param dmap \r\n   */\r\n  addTo(dmap) {\r\n    dmap.on('draw-end', this.onDrawEnd.bind(this));\r\n    return super.addTo(dmap);\r\n  }\r\n  /**\r\n   * \r\n   * @param {*} marker \r\n   * @param {*} options \r\n   * @param {*} data \r\n   */\r\n  add(marker, options, data) {\r\n    //\r\n    if (options.tooltip) {\r\n      options.tooltip.draggable = true;\r\n    }\r\n\r\n    super.add(marker, options, data);\r\n    this._check(marker)\r\n    //\r\n  }\r\n  /**\r\n   * 确保 marker 可编辑拖拽\r\n   */\r\n  _check(marker) {\r\n    if (marker) {\r\n      // 设置为可编辑\r\n      marker.editEnable();\r\n      // 设置为可拖拽\r\n      if (marker.dragging) {\r\n        marker.dragging.enable();\r\n      } else {\r\n        marker.makeDraggable();\r\n        marker.dragging.enable();\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 改变地图工具\r\n   * @param options {tool,feature,tooltip,popup,onDrawEnd}\r\n   */\r\n  change(options) {\r\n    let that = this;\r\n    if (options) {\r\n      T.data.pan = false;\r\n      let {\r\n        dmap,\r\n        history,\r\n        next\r\n      } = that;\r\n      switch (options.tool) {\r\n        case 'pan':\r\n          that.reset();\r\n          dmap.cursor = \"-webkit-grab\"; //grab\r\n          T.data.pan = true;\r\n          break;\r\n        case 'clear': //不要break;\r\n          that.clear();\r\n        case 'pointer':\r\n          that.reset();\r\n          dmap.cursor = `default`;\r\n          break;\r\n        case 'go': // 前进\r\n          let todo = next[next.length - 1];\r\n          if (todo && todo.restore()) {\r\n            next.pop();\r\n          }!history.includes(todo) && history.push(todo);\r\n          that.reset();\r\n          break;\r\n        case 'back': // 回滚\r\n          let done = history[history.length - 1];\r\n          if (done && done.reback()) {\r\n            history.pop();\r\n          }!next.includes(done) && next.push(done);\r\n          that.reset();\r\n          break;\r\n        default:\r\n          that.start(options);\r\n          break;\r\n      }\r\n      dmap.do('tool-change', {\r\n        target: that,\r\n        options: options\r\n      });\r\n    }\r\n    return that;\r\n  }\r\n  /**\r\n   * 启动绘制\r\n   * @param options {tool:'',feature,tooltip,popup}\r\n   */\r\n  start(options) {\r\n    let that = this;\r\n    let {\r\n      map\r\n    } = that;\r\n    let type = options.tool;\r\n    that.cancel();\r\n    map.dragging.disable();\r\n    let Tool = that.get(type);\r\n    let tool = new Tool(that, options);\r\n    tool.setOptions(options)\r\n    // if (tool) {\r\n    //   let mergeOptions = T.assign({}, that.options, options);\r\n    //   let toolOptions = tool.options;\r\n    //   toolOptions.feature.draggable = mergeOptions.draggable;\r\n    //   toolOptions.feature.interactive = false;\r\n    //   toolOptions.editable = mergeOptions.editable;\r\n    //   toolOptions.reable = mergeOptions.reable;\r\n    //   tool.start();\r\n    // }\r\n\r\n    let toolOptions = tool.options;\r\n    toolOptions.feature.interactive = false;\r\n    tool.start();\r\n    that.tool = tool;\r\n\r\n\r\n  }\r\n  /**\r\n   * 获取绘制工具\r\n   * @param tool \r\n   */\r\n  get(tool) {\r\n    switch (tool) {\r\n      case 'point':\r\n        return PointTool;\r\n      case 'distance':\r\n        return DistancePolylineTool;\r\n      case 'distancePolygon':\r\n        return DistancePolygonTool;\r\n      case 'polyline':\r\n        return PolylineTool;\r\n      case \"pen\":\r\n        return PenTool;\r\n      case \"circle\":\r\n        return CircleTool;\r\n      case 'ellipse':\r\n        return EllipseTool;\r\n      case \"rect\":\r\n        return RectTool;\r\n      case \"polygon\":\r\n        return PolygonTool;\r\n      case 'penfill':\r\n        return PenFillTool;\r\n      case 'militaryArrow':\r\n        return MilitaryArrowTool;\r\n      case 'text':\r\n        return TextTool;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  cancel() {\r\n    this.tool && this.tool.cancel();\r\n    this.tool = null;\r\n  }\r\n  /**\r\n   * 重置\r\n   */\r\n  reset() {\r\n    this.cancel();\r\n    this.map.dragging.enable();\r\n    //  map.doubleClickZoom.enable();\r\n  }\r\n  /**\r\n   * 绘制结束\r\n   */\r\n  onDrawEnd(e) {\r\n    // 重置前进内容\r\n    this.next.length = 0;\r\n    //\r\n    let {\r\n      tool\r\n    } = this;\r\n    if (tool && tool.marker) {\r\n      // 推进历史\r\n      !this.history.includes(tool) && this.history.push(tool);\r\n      //\r\n      let {\r\n        options,\r\n        marker\r\n      } = tool;\r\n\r\n      marker.__data = tool.data; //余姚新会标绘\r\n\r\n      // 延迟交互\r\n      if (tool.options.tool !== 'distance' && tool.options.tool !== 'distancePolygon' && !options.reable) {\r\n        setTimeout(() => {\r\n          marker.setStyle({\r\n            interactive: true,\r\n            draggable: true\r\n          });\r\n          this._check(marker);\r\n          if ((marker instanceof L.Text) === false) this._bindText(marker, tool.options)\r\n        }, 100);\r\n      }\r\n      if (options.searchable) {\r\n        this.dmap.do('search-end', {\r\n          target: this,\r\n          event: e,\r\n          value: this.search(e)\r\n        });\r\n      }\r\n      //\r\n      options.onDrawEnd && options.onDrawEnd(e);\r\n      // 绘制模式\r\n      if (options.multi) {\r\n        // 重复绘制\r\n        tool.cancel();\r\n        tool = this.tool = tool.clone();\r\n        tool.start();\r\n      } else if (options.reable) {\r\n        // 重新绘制\r\n        tool.cancel();\r\n        this.tool = tool;\r\n        tool.start();\r\n      } else {\r\n        // 重置\r\n        this.reset();\r\n      }\r\n    } else {\r\n      this.reset();\r\n    }\r\n\r\n  }\r\n  /**\r\n   * 搜索\r\n   */\r\n  search(e) {\r\n    let {\r\n      marker\r\n    } = e,\r\n    result = [];\r\n    if (!marker) {\r\n      throw 'search error'\r\n    }\r\n    let {\r\n      _map: map\r\n    } = marker;\r\n    let latLngToLayerPoint = map.latLngToLayerPoint.bind(map);\r\n    if (marker instanceof Circle) {\r\n      let {\r\n        _radius\r\n      } = marker;\r\n      let center = marker.getLatLng();\r\n      map.eachLayer((layer) => {\r\n        //\r\n        if (layer instanceof Marker || layer instanceof VectorMarker) {\r\n          if (latLngToLayerPoint(layer.getLatLng()).distanceTo(latLngToLayerPoint(center)) < _radius) {\r\n            result.push(layer);\r\n          }\r\n        } else if (layer instanceof Polyline || layer instanceof Polygon) { // todo 面不太准确\r\n          let latlngs = layer.getLatLngs();\r\n          if (isArray(latlngs[0])) { // todo \r\n            latlngs = latlngs[0]\r\n          }\r\n          for (let i = 0, len = latlngs.length; i < len; i++) {\r\n            if (latLngToLayerPoint(latlngs[i]).distanceTo(latLngToLayerPoint(center)) < _radius) {\r\n              result.push(layer);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      })\r\n    } else if (marker instanceof Polygon) {\r\n      let {\r\n        _rings\r\n      } = marker;\r\n      map.eachLayer(layer => {\r\n        if (layer instanceof Marker || layer instanceof CircleMarker) {\r\n          if (pointInPolygon(latLngToLayerPoint(layer.getLatLng()), _rings[0])) {\r\n            result.push(layer);\r\n          }\r\n        } else if (layer instanceof Polyline || layer instanceof Polygon) { // todo 面不太准确\r\n          let latlngs = layer.getLatLngs();\r\n          if (isArray(latlngs[0])) { //todo \r\n            latlngs = latlngs[0]\r\n          }\r\n          for (let i = 0, len = latlngs.length; i < len; i++) {\r\n            if (pointInPolygon(latLngToLayerPoint(latlngs[i]), _rings[0])) {\r\n              result.push(layer);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/DrawLayer.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport PolylineTool from './PolylineTool'\r\nimport PolygonTool from \"./PolygonTool\";\r\n\r\n/**\r\n * 测距\r\n */\r\nexport class DistancePolylineTool extends PolylineTool {\r\n  options = { feature: { color: 'red', weight: 2, showMeasurements: true } }\r\n  /**\r\n   * \r\n   */\r\n  onMouseMove(e) {\r\n    super.onMouseMove(e);\r\n    this.marker.updateMeasurements();\r\n  }\r\n}\r\n/**\r\n * 测面\r\n */\r\nexport class DistancePolygonTool extends PolygonTool {\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1, showMeasurements: true } }\r\n  /**\r\n   * \r\n   */\r\n  onMouseMove(e) {\r\n    super.onMouseMove(e);\r\n    this.marker.updateMeasurements();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/DistanceTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet { Polyline } = L;\r\n/**\r\n * 铅笔工具\r\n */\r\nexport default class PenTool extends Tool {\r\n  marker\r\n  options = { feature: { color: 'red' } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.map.once('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    this.map.off('mousedown', this.onMouseDown, this);\r\n    this.map.off('mousemove', this.onMouseMove, this);\r\n  }\r\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\r\n  onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, options, map, layer } = this;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer)\r\n      map.once('mouseup', this.onEnd, this);\r\n      map.on('mousemove', this.onMouseMove, this);\r\n    }\r\n  }\r\n  /**\r\n   * 绘制ing\r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    this.marker.addLatLng(e.latlng)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PenTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\n//\r\nexport default class PenFillTool extends Tool {\r\n  marker\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1 } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n  }\r\n  /**\r\n   * 绘制\r\n   */\r\n  _onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, options, map, layer } = this;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      marker = this.marker = L.rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('mouseup', this.onEnd, this);\r\n      // map.off('mousedown', this.onMouseDown);\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    this.marker.addLatLng(e.latlng)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PenFillTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet {\r\n  Rectangle\r\n} = L;\r\n/**\r\n * 矩形绘制工具\r\n */\r\nexport default class RectTool extends Tool {\r\n  options = {\r\n    feature: {\r\n      color: 'red',\r\n      fillOpacity: .5,\r\n      weight: 1\r\n    }\r\n  }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let {\r\n      map\r\n    } = this;\r\n    map.once('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let {\r\n      map\r\n    } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.sp = null;\r\n  }\r\n  /**\r\n   * 绘制\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let {\r\n      map,\r\n      layer,\r\n      options\r\n    } = this;\r\n    let {\r\n      latlng\r\n    } = e;\r\n    this.clear(); //重复绘制，先移除旧图元\r\n    //\r\n    this.marker = new Rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer)\r\n    this.sp = latlng\r\n    map.on('mousemove', this.onMouseMove, this);\r\n    map.once('mouseup', this.onEnd, this);\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let {\r\n      marker\r\n    } = this;\r\n    let {\r\n      latlng\r\n    } = e;\r\n    marker.setBounds(L.latLngBounds(this.sp, latlng))\r\n    marker.redraw();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/RectTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\r\nlet { Circle } = L;\r\n/**\r\n * \r\n */\r\nCircle.include({\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let { lat, lng } = this.getLatLng();\r\n    this.options.radius = this._mRadius;\r\n    return {\r\n      type: 'Feature',\r\n      properties: {},\r\n      geometry: { coordinates: [lng, lat], type: 'Circle' }\r\n    }\r\n  }\r\n})\r\n/**\r\n * \r\n */\r\nexport default Circle.extend({\r\n  /**\r\n   * 原L.Circle在非经纬度等间隔投影的情况下是椭圆\r\n   * 确保是圆形，用于标绘，但实际上是不推荐的，因为半径已经不算是实际的半径\r\n   */\r\n  _updateBounds: function () {\r\n    this._radius = this._radiusY;\r\n    Circle.prototype._updateBounds.call(this);\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Circle.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport CircleTool from './CircleTool';\r\nimport Ellipse from '@/feature/Ellipse';\r\n\r\n/**\r\n * 椭圆绘制工具\r\n */\r\nexport default class EllipseTool extends CircleTool {\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { options } = this;\r\n    let { map, layer } = this;\r\n    let { latlng } = e;\r\n    this.clear();//重复绘制，先移除旧图元\r\n    //\r\n    this.marker = new Ellipse(latlng, 0, options.feature).addTo(layer);\r\n    map.on('mousemove', this.onMouseMove, this);\r\n    map.once('mouseup', this.onEnd, this);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker } = this;\r\n    let latlng = e.latlng;\r\n    let center = marker.getLatLng();\r\n    let latlng1 = latlng.clone();\r\n    let latlng2 = latlng.clone();\r\n    latlng1.lat = center.lat;\r\n    latlng2.lng = center.lng;\r\n    let r = latlng1.distanceTo(center);\r\n    let ry = latlng2.distanceTo(center);\r\n    //\r\n    marker.setRadius(r);\r\n    marker.setRadiusY(ry);\r\n    marker.redraw();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/EllipseTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\nimport MilitaryArrow from '@/feature/MilitaryArrow'\r\n//\r\nlet { LatLng } = L;\r\n/**\r\n * 军标箭头\r\n */\r\nexport default class MilitaryArrowTool extends Tool {\r\n  options = { feature: { fillColor: 'red', weight: 1, fillOpacity: .5, color: '#333' } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.mp = null;\r\n  }\r\n  /**\r\n   * 绘制\r\n   */\r\n  _onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, map, layer, options } = this;\r\n    let { feature } = options;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      feature.draggable = false;\r\n      // feature.interactive = false;\r\n      marker = this.marker = new MilitaryArrow([latlng], feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('dblclick', this.onEnd, this)\r\n    } else {\r\n      this.mp = null;\r\n    }\r\n    this.lp = e.layerPoint\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker, mp } = this,\r\n      { latlng, layerPoint } = e,\r\n      latlngs = marker.getLatLngs();\r\n    if (!mp) {\r\n      let { lp } = this;\r\n      marker.addLatLng(latlng);\r\n      this.mp = latlng;\r\n    } else {\r\n      mp.lat = latlng.lat;\r\n      mp.lng = latlng.lng;\r\n      // marker.getBounds().extend(mp)\r\n      marker.redraw();\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/MilitaryArrowTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\r\nimport PointTool from './PointTool'\r\n\r\n//\r\n/**\r\n * 点图元绘制工具\r\n */\r\nexport default class TextTool extends PointTool {\r\n  options = { feature: {} }\r\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { latlng } = e;\r\n    let { options, layer } = this;\r\n    //\r\n    this.marker = L.text(latlng, options.text, options.feature).addTo(layer)\r\n    this.onEnd();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/TextTool.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.10\r\n */\r\n/**\r\n * 点在多边形\r\n */\r\nexport var pointInPolygon = (p, arr) => {\r\n  let nCross = 0;\r\n  if (arr.length > 0) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      let p0 = p,\r\n        p1 = arr[i],\r\n        p2 = arr[(i + 1) % arr.length];\r\n      // 求解 y=p.y 与 p1p2 的交点\r\n      if (p1.y == p2.y || p0.y < (p1.y <= p2.y ? p1.y : p2.y) || p0.y >= (p1.y >= p2.y ? p1.y : p2.y)) // p1p2 与 y=p0.y平行,交点在p1p2延长线上,交点在p1p2延长线上 \r\n        continue;\r\n      if ((p0.y - p1.y) * (p2.x - p1.x) / (p2.y - p1.y) + p1.x > p0.x) nCross++; //交点的X坐标大于p0的x坐标，只统计单边交点 \t\t\t\r\n    }\r\n  }\r\n  // 单边交点为偶数，点在多边形之外 --- \r\n  return (nCross % 2 == 1);\r\n}\r\n/**\r\n* \r\n* @param s start point\r\n* @param p end point\r\n*/\r\nexport var distance = (s, p) => Math.sqrt((p[0] - s[0]) * (p[0] - s[0]) + ((p[1] - s[1]) * (p[1] - s[1])))\r\n/**\r\n * \r\n * @param p \r\n * @param angle \r\n */\r\nexport var toRotate = (p, angle) => {\r\n  angle = Math.atan2(p.y, p.x) + angle\r\n  let r = Math.sqrt(p.x * p.x + p.y * p.y)//半径\r\n  return {\r\n    x: Math.cos(angle) * r,\r\n    y: Math.sin(angle) * r\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/geoUtils.js","/**\n * @see https://github.com/ProminentEdge/leaflet-measure-path\n */\n!(function () {\n\n  L.Marker.Measurement = L.Layer.extend({\n    options: {\n      pane: 'markerPane'\n    },\n\n    initialize: function (latlng, measurement, title, rotation, options) {\n      L.setOptions(this, options);\n\n      this._latlng = latlng;\n      this._measurement = measurement;\n      this._title = title;\n      this._rotation = rotation;\n    },\n\n    addTo: function (map) {\n      map.addLayer(this);\n      return this;\n    },\n\n    onAdd: function (map) {\n      this._map = map;\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      var el = this._element = L.DomUtil.create('div', 'leaflet-zoom-animated leaflet-measure-path-measurement', pane);\n      var inner = L.DomUtil.create('div', '', el);\n      inner.title = this._title;\n      inner.innerHTML = this._measurement;\n\n      map.on('zoomanim', this._animateZoom, this);\n\n      this._setPosition();\n    },\n\n    onRemove: function (map) {\n      map.off('zoomanim', this._animateZoom, this);\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      pane.removeChild(this._element);\n      this._map = null;\n    },\n\n    _setPosition: function () {\n      L.DomUtil.setPosition(this._element, this._map.latLngToLayerPoint(this._latlng));\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    },\n\n    _animateZoom: function (opt) {\n      var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\n      L.DomUtil.setPosition(this._element, pos);\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    }\n  });\n\n  L.marker.measurement = function (latLng, measurement, title, rotation, options) {\n    return new L.Marker.Measurement(latLng, measurement, title, rotation, options);\n  };\n\n  var formatDistance = function (d) {\n    var unit,\n      feet;\n\n    if (this._measurementOptions.imperial) {\n      feet = d / 0.3048;\n      if (feet > 3000) {\n        d = d / 1609.344;\n        unit = 'mi';\n      } else {\n        d = feet;\n        unit = 'ft';\n      }\n    } else {\n      if (d > 1000) {\n        d = d / 1000;\n        unit = 'km';\n      } else {\n        unit = 'm';\n      }\n    }\n\n    if (d < 100) {\n      return d.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(d) + ' ' + unit;\n    }\n  }\n\n  var formatArea = function (a) {\n    var unit,\n      sqfeet;\n\n    if (this._measurementOptions.imperial) {\n      if (a > 404.685642) {\n        a = a / 4046.85642;\n        unit = 'ac';\n      } else {\n        a = a / 0.09290304;\n        unit = 'ft²';\n      }\n    } else {\n      if (a > 1000000) {\n        a = a / 1000000;\n        unit = 'km²';\n      } else {\n        unit = 'm²';\n      }\n    }\n\n    if (a < 100) {\n      return a.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(a) + ' ' + unit;\n    }\n  }\n\n  var RADIUS = 6378137;\n  // ringArea function copied from geojson-area\n  // (https://github.com/mapbox/geojson-area)\n  // This function is distributed under a separate license,\n  // see LICENSE.md.\n  var ringArea = function ringArea(coords) {\n    var rad = function rad(_) {\n      return _ * Math.PI / 180;\n    };\n    var p1, p2, p3, lowerIndex, middleIndex, upperIndex,\n      area = 0,\n      coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n      for (var i = 0; i < coordsLength; i++) {\n        if (i === coordsLength - 2) {// i = N-2\n          lowerIndex = coordsLength - 2;\n          middleIndex = coordsLength - 1;\n          upperIndex = 0;\n        } else if (i === coordsLength - 1) {// i = N-1\n          lowerIndex = coordsLength - 1;\n          middleIndex = 0;\n          upperIndex = 1;\n        } else { // i = 0 to N-3\n          lowerIndex = i;\n          middleIndex = i + 1;\n          upperIndex = i + 2;\n        }\n        p1 = coords[lowerIndex];\n        p2 = coords[middleIndex];\n        p3 = coords[upperIndex];\n        area += (rad(p3.lng) - rad(p1.lng)) * Math.sin(rad(p2.lat));\n      }\n\n      area = area * RADIUS * RADIUS / 2;\n    }\n\n    return Math.abs(area);\n  };\n\n  var circleArea = function circleArea(d) {\n    var rho = d / RADIUS;\n    return 2 * Math.PI * RADIUS * RADIUS * (1 - Math.cos(rho));\n  };\n\n  var override = function (method, fn, hookAfter) {\n    if (!hookAfter) {\n      return function () {\n        method.apply(this, arguments);\n        return fn.apply(this, arguments);\n      }\n    } else {\n      return function () {\n        fn.apply(this, arguments);\n        return method.apply(this, arguments);\n      }\n    }\n  };\n\n  L.Polyline.include({\n    showMeasurements: function (options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        minPixelDistance: 30,\n        showDistances: true,\n        showArea: true,\n        lang: {\n          totalLength: 'Total length',\n          totalArea: 'Total area',\n          segmentLength: 'Segment length'\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function () {\n      this._map.off('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Polyline.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Polyline.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLngs: override(L.Polyline.prototype.setLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    spliceLatLngs: override(L.Polyline.prototype.spliceLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    formatDistance: formatDistance,\n    formatArea: formatArea,\n\n    updateMeasurements: function () {\n      if (!this._measurementLayer) return this;\n\n      var latLngs = this.getLatLngs(),\n        isPolygon = this instanceof L.Polygon,\n        options = this._measurementOptions,\n        totalDist = 0,\n        formatter,\n        ll1,\n        ll2,\n        p1,\n        p2,\n        pixelDist,\n        dist;\n\n      if (latLngs && latLngs.length && L.Util.isArray(latLngs[0])) {\n        // Outer ring is stored as an array in the first element,\n        // use that instead.\n        latLngs = latLngs[0];\n      }\n\n      this._measurementLayer.clearLayers();\n\n      if (this._measurementOptions.showDistances && latLngs.length > 1) {\n        formatter = this._measurementOptions.formatDistance || L.bind(this.formatDistance, this);\n\n        for (var i = 1, len = latLngs.length; (isPolygon && i <= len) || i < len; i++) {\n          ll1 = latLngs[i - 1];\n          ll2 = latLngs[i % len];\n          dist = ll1.distanceTo(ll2);\n          totalDist += dist;\n\n          p1 = this._map.latLngToLayerPoint(ll1);\n          p2 = this._map.latLngToLayerPoint(ll2);\n\n          pixelDist = p1.distanceTo(p2);\n\n          if (pixelDist >= options.minPixelDistance) {\n            L.marker.measurement(\n              this._map.layerPointToLatLng([(p1.x + p2.x) / 2, (p1.y + p2.y) / 2]),\n              formatter(dist), options.lang.segmentLength, this._getRotation(ll1, ll2), options)\n              .addTo(this._measurementLayer);\n          }\n        }\n\n        // Show total length for polylines\n        if (!isPolygon) {\n          L.marker.measurement(ll2, formatter(totalDist), options.lang.totalLength, 0, options)\n            .addTo(this._measurementLayer);\n        }\n      }\n\n      if (isPolygon && options.showArea && latLngs.length > 2) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = ringArea(latLngs);\n        L.marker.measurement(this.getBounds().getCenter(),\n          formatter(area), options.lang.totalArea, 0, options)\n          .addTo(this._measurementLayer);\n      }\n\n      return this;\n    },\n\n    _getRotation: function (ll1, ll2) {\n      var p1 = this._map.project(ll1),\n        p2 = this._map.project(ll2);\n\n      return Math.atan((p2.y - p1.y) / (p2.x - p1.x));\n    }\n  });\n\n  L.Polyline.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n\n  L.Circle.include({\n    showMeasurements: function (options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        showArea: true,\n        lang: {\n          totalArea: 'Total area',\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function () {\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Circle.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Circle.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLng: override(L.Circle.prototype.setLatLng, function () {\n      this.updateMeasurements();\n    }),\n\n    setRadius: override(L.Circle.prototype.setRadius, function () {\n      this.updateMeasurements();\n    }),\n\n    formatArea: formatArea,\n\n    updateMeasurements: function () {\n      if (!this._measurementLayer) return;\n\n      var latLng = this.getLatLng(),\n        options = this._measurementOptions,\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n\n      this._measurementLayer.clearLayers();\n\n      if (options.showArea) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = circleArea(this.getRadius());\n        L.marker.measurement(latLng,\n          formatter(area), options.lang.totalArea, 0, options)\n          .addTo(this._measurementLayer);\n      }\n    }\n  })\n\n  L.Circle.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/meature/leaflet-measure-path.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./leaflet-measure-path.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"10279068\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/meature/leaflet-measure-path.css\n// module id = 176\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".leaflet-measure-path-measurement{position:absolute;font-size:10px;color:#000;text-shadow:-1px 0 0 #fff,-1px -1px 0 #fff,0 -1px 0 #fff,1px -1px 0 #fff,1px 0 0 #fff,1px 1px 0 #fff,0 1px 0 #fff,-1px 1px 0 #fff;white-space:nowrap;transform-origin:0;pointer-events:none}.leaflet-measure-path-measurement>div{position:relative;margin-top:-25%;left:-50%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./src/plugins/meature/leaflet-measure-path.css\n// module id = 177\n// module chunks = 1","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\r\nlet {\r\n  CircleMarker\r\n} = L;\r\n\r\nimport load from \"@/utils/Loader\";\r\n/**\r\n * 矢量图元\r\n */\r\nexport default L.VectorMarker = L.VectorMarker || CircleMarker.extend({\r\n  /**\r\n   * \r\n   */\r\n  options: {\r\n    // 闪烁,常用于水雨情预警\r\n    // glow: false,\r\n    // 线条粗细\r\n    weight: 1,\r\n    // 颜色\r\n    color: '#000',\r\n    // 是否绘制线条\r\n    stroke: true,\r\n    // 是否填充\r\n    fill: true,\r\n    // 圆的半径，等腰三角形的底边长\r\n    radius: 5,\r\n    // 弧度单位 Math.random() * 2 * Math.PI 三角形角度 \r\n    angle: 0,\r\n    // 移入上调层级\r\n    riseOnHover: true\r\n  },\r\n  initialize: function (latlng, options) {\r\n    CircleMarker.prototype.initialize.call(this, latlng, options);\r\n    this._radiusY = this.options.radiusY;\r\n  },\r\n  // _updateBounds: function () {\r\n  //   var r = this._radius,\r\n  //     r2 = this._radiusY || r,\r\n  //     w = this._clickTolerance() ,\r\n  //     p = [r + w, r2 + w];\r\n  //   this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\r\n  // },\r\n  // _empty: function () {\r\n  //   return this._radius && !this._renderer._bounds.intersects(this._pxBounds);\r\n  // },\r\n  // \r\n  // _containsPoint: function (p) {\r\n  //   return p.distanceTo(this._point) <= this._radius + this._clickTolerance();\r\n  // },\r\n\r\n  _clickTolerance: function () {\r\n    return CircleMarker.prototype._clickTolerance.call(this) + 1;\r\n  },\r\n  /**\r\n   * @override\r\n   */\r\n  _project() {\r\n    this._point = this._map.latLngToLayerPoint(this._latlng);\r\n    let {\r\n      options\r\n    } = this;\r\n    let {\r\n      offset,\r\n      icon\r\n    } = options;\r\n    // 图元整体偏移\r\n    if (offset) {\r\n      this._point = this._point.add(offset);\r\n    }\r\n    // 图元锚点偏移\r\n    if (icon && icon.iconAnchor) {\r\n      this._point = this._point.subtract(icon.iconAnchor);\r\n    }\r\n    this._updateBounds();\r\n  },\r\n  /**\r\n   * @override\r\n   */\r\n  beforeAdd(map) {\r\n    let {\r\n      options\r\n    } = this;\r\n    CircleMarker.prototype.beforeAdd.call(this, map);\r\n    // 确保 renderer is canvas,且canvas是唯一的。否则图层相互覆盖影响;\r\n    if (!map.options.preferCanvas && !options.renderer) {\r\n      options.renderer = map.__canvas = map.__canvas || L.canvas();\r\n    }\r\n    // 用于旋转\r\n    this.on('transformed', e => {\r\n      options.angle = e.rotation;\r\n      this.redraw();\r\n    })\r\n  },\r\n  /**\r\n   * @override\r\n   * todo 优化性能，预执行\r\n   */\r\n  _updatePath: function () {\r\n    let that = this;\r\n    let {\r\n      options,\r\n      _renderer\r\n    } = that;\r\n    let {\r\n      src\r\n    } = options;\r\n    src = src || 'circle';\r\n    switch (src) {\r\n      case 'triangle':\r\n        return _renderer._updateTriangle(that);\r\n      case 'rect':\r\n        if (!options.radiusY) {\r\n          that._radius = that._radiusY = 8;\r\n        }\r\n        return _renderer._updateRect(that);\r\n      case 'circle':\r\n        return _renderer._updateCircle(that);\r\n      case 'line': //旋转句柄,用于编辑旋转\r\n        return _renderer._updateLine(that);\r\n      case 'balloon': //\r\n        return _renderer._updateBalloon(that);\r\n      default:\r\n        if (that._loader) {\r\n          _renderer._updateIcon(that);\r\n        } else {\r\n          // todo\r\n          if (src && src.indexOf('/') !== 0 && !src.includes('http')) {\r\n            src = options.src = T + src;\r\n          }!that.loader && (that.loader = load(src)).then(img => {\r\n            that._loader = img;\r\n            that._radius = img.width / 2;\r\n            that._radiusY = img.height / 2;\r\n            that.redraw();\r\n          })\r\n        }\r\n        break;\r\n    }\r\n\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/VectorMarker.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\r\nlet {\r\n  Circle\r\n} = L;\r\n/**\r\n * \r\n */\r\nexport default Circle.extend({\r\n  /**\r\n   * \r\n   */\r\n  initialize: function (latlng, options, legacyOptions) {\r\n    Circle.prototype.initialize.call(this, latlng, options, legacyOptions);\r\n    this._mRadiusY = this.options.radiusY;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _project: function () {\r\n    let {\r\n      _latlng,\r\n      _map: map,\r\n      _mRadius,\r\n      _mRadiusY\r\n    } = this;\r\n    _mRadiusY = _mRadiusY || _mRadius;\r\n    // let { crs } = map.options;\r\n    let crs = L.CRS.EPSG3857; // 暂时，因为在其他坐标投影中暂时有问题。\r\n    let _point = this._point = map.latLngToLayerPoint(_latlng);\r\n    //\r\n    var latlng2 = crs.unproject(crs.project(_latlng).subtract([_mRadius, 0]));\r\n    var latlng3 = crs.unproject(crs.project(_latlng).subtract([_mRadiusY, 0]));\r\n    //\r\n    this._radius = _point.x - map.latLngToLayerPoint(latlng2).x;\r\n    this._radiusY = _point.x - map.latLngToLayerPoint(latlng3).x;\r\n    this._updateBounds();\r\n    //\r\n\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  setRadiusY: function (radiusY) {\r\n    this._mRadiusY = radiusY;\r\n    return this.redraw();\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  getRadiusY: function () {\r\n    return this._mRadiusY;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let {\r\n      lat,\r\n      lng\r\n    } = this.getLatLng();\r\n    this.options.radius = this._mRadius;\r\n    this.options.radiusY = this._mRadiusY;\r\n    return {\r\n      type: 'Feature',\r\n      properties: {},\r\n      geometry: {\r\n        coordinates: [lng, lat],\r\n        type: 'Ellipse'\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n/**\r\n * @see https://github.com/jdfergason/Leaflet.Ellipse\r\n */\r\n\r\n// L.Canvas.include ({\r\n//   _updateEllipse: function (layer) {\r\n//       if (layer._empty()) { return; }\r\n\r\n//       var p = layer._point,\r\n//           ctx = this._ctx,\r\n//           r = layer._radiusX,\r\n//           s = (layer._radiusY || r) / r;\r\n\r\n//       ctx.save();\r\n\r\n//       ctx.translate(p.x, p.y);\r\n//       if (layer._tilt !== 0) {\r\n//           ctx.rotate( layer._tilt );\r\n//       }\r\n//       if (s !== 1) {\r\n//           ctx.scale(1, s);\r\n//       }\r\n\r\n//       ctx.beginPath();\r\n//       ctx.arc(0, 0, r, 0, Math.PI * 2);\r\n//       ctx.restore();\r\n\r\n//       this._fillStroke(ctx, layer);\r\n//   },\r\n// });\r\n\r\n// export default L.Path.extend({\r\n\r\n//   options: {\r\n//       fill: true,\r\n//       startAngle: 0,\r\n//       endAngle: 359.9\r\n//   },\r\n\r\n//   initialize: function (latlng, radii, tilt, options) {\r\n\r\n//       L.setOptions(this, options);\r\n//       this._latlng = L.latLng(latlng);\r\n\r\n//       if (tilt) {\r\n//           this._tiltDeg = tilt;\r\n//       } else {\r\n//           this._tiltDeg = 0;\r\n//       }\r\n\r\n//       if (radii) {\r\n//           this._mRadiusX = radii[0];\r\n//           this._mRadiusY = radii[1];\r\n//       }\r\n//   },\r\n\r\n//   setRadius: function (radii) {\r\n//       this._mRadiusX = radii[0];\r\n//       this._mRadiusY = radii[1];\r\n//       return this.redraw();\r\n//   },\r\n\r\n//   getRadius: function () {\r\n//       return new L.point(this._mRadiusX, this._mRadiusY);\r\n//   },\r\n\r\n//   setTilt: function (tilt) {\r\n//       this._tiltDeg = tilt;\r\n//       return this.redraw();\r\n//   },\r\n\r\n//   getBounds: function () {\r\n//       // TODO respect tilt (bounds are too big)\r\n//       var lngRadius = this._getLngRadius(),\r\n//           latRadius = this._getLatRadius(),\r\n//           latlng = this._latlng;\r\n\r\n//       return new L.LatLngBounds(\r\n//           [latlng.lat - latRadius, latlng.lng - lngRadius],\r\n//           [latlng.lat + latRadius, latlng.lng + lngRadius]);\r\n//   },\r\n\r\n//   // @method setLatLng(latLng: LatLng): this\r\n//   // Sets the position of a circle marker to a new location.\r\n//   setLatLng: function (latlng) {\r\n//       this._latlng = L.latLng(latlng);\r\n//       this.redraw();\r\n//       return this.fire('move', {latlng: this._latlng});\r\n//   },\r\n\r\n//   // @method getLatLng(): LatLng\r\n//   // Returns the current geographical position of the circle marker\r\n//   getLatLng: function () {\r\n//       return this._latlng;\r\n//   },\r\n\r\n//   setStyle: L.Path.prototype.setStyle,\r\n\r\n//   _project: function () {\r\n//       var lngRadius = this._getLngRadius(),\r\n//           latRadius = this._getLatRadius(),\r\n//           latlng = this._latlng,\r\n//           pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]),\r\n//           pointBelow = this._map.latLngToLayerPoint([latlng.lat - latRadius, latlng.lng]);\r\n\r\n//       this._point = this._map.latLngToLayerPoint(latlng);\r\n//       this._radiusX = Math.max(this._point.x - pointLeft.x, 1);\r\n//       this._radiusY = Math.max(pointBelow.y - this._point.y, 1);\r\n//       this._tilt = Math.PI * this._tiltDeg / 180;\r\n//       this._endPointParams = this._centerPointToEndPoint();\r\n//       this._updateBounds();\r\n//   },\r\n\r\n//   _updateBounds: function () {\r\n//       // http://math.stackexchange.com/questions/91132/how-to-get-the-limits-of-rotated-ellipse\r\n//       var sin = Math.sin(this._tilt);\r\n//       var cos = Math.cos(this._tilt);\r\n//       var sinSquare = sin * sin;\r\n//       var cosSquare = cos * cos;\r\n//       var aSquare = this._radiusX * this._radiusX;\r\n//       var bSquare = this._radiusY * this._radiusY;\r\n//       var halfWidth = Math.sqrt(aSquare*cosSquare+bSquare*sinSquare);\r\n//       var halfHeight = Math.sqrt(aSquare*sinSquare+bSquare*cosSquare);\r\n//       var w = this._clickTolerance();\r\n//       var p = [halfWidth + w, halfHeight + w];\r\n//       this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\r\n//   },\r\n\r\n//   _update: function () {\r\n//       if (this._map) {\r\n//           this._updatePath();\r\n//       }\r\n//   },\r\n\r\n//   _updatePath: function () {\r\n//       this._renderer._updateEllipse(this);\r\n//   },\r\n\r\n//   _getLatRadius: function () {\r\n//       return (this._mRadiusY / 40075017) * 360;\r\n//   },\r\n\r\n//   _getLngRadius: function () {\r\n//       return ((this._mRadiusX / 40075017) * 360) / Math.cos((Math.PI / 180) * this._latlng.lat);\r\n//   },\r\n\r\n//   _centerPointToEndPoint: function () {\r\n//       // Convert between center point parameterization of an ellipse\r\n//       // too SVG's end-point and sweep parameters.  This is an\r\n//       // adaptation of the perl code found here:\r\n//       // http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Paths\r\n//       var c = this._point,\r\n//           rx = this._radiusX,\r\n//           ry = this._radiusY,\r\n//           theta2 = (this.options.startAngle + this.options.endAngle) * (Math.PI / 180),\r\n//           theta1 = this.options.startAngle * (Math.PI / 180),\r\n//           delta = this.options.endAngle,\r\n//           phi = this._tiltDeg * (Math.PI / 180);\r\n\r\n//       // Determine start and end-point coordinates\r\n//       var x0 = c.x + Math.cos(phi) * rx * Math.cos(theta1) +\r\n//           Math.sin(-phi) * ry * Math.sin(theta1);\r\n//       var y0 = c.y + Math.sin(phi) * rx * Math.cos(theta1) +\r\n//           Math.cos(phi) * ry * Math.sin(theta1);\r\n\r\n//       var x1 = c.x + Math.cos(phi) * rx * Math.cos(theta2) +\r\n//           Math.sin(-phi) * ry * Math.sin(theta2);\r\n//       var y1 = c.y + Math.sin(phi) * rx * Math.cos(theta2) +\r\n//           Math.cos(phi) * ry * Math.sin(theta2);\r\n\r\n//       var largeArc = (delta > 180) ? 1 : 0;\r\n//       var sweep = (delta > 0) ? 1 : 0;\r\n\r\n//       return {'x0': x0, 'y0': y0, 'tilt': phi, 'largeArc': largeArc,\r\n//           'sweep': sweep, 'x1': x1, 'y1': y1};\r\n//   },\r\n\r\n//   _empty: function () {\r\n//       return this._radiusX && this._radiusY && !this._renderer._bounds.intersects(this._pxBounds);\r\n//   },\r\n\r\n//   _containsPoint : function (p) {\r\n//       // http://stackoverflow.com/questions/7946187/point-and-ellipse-rotated-position-test-algorithm\r\n//       var sin = Math.sin(this._tilt);\r\n//       var cos = Math.cos(this._tilt);\r\n//       var dx = p.x - this._point.x;\r\n//       var dy = p.y - this._point.y;\r\n//       var sumA = cos * dx + sin * dy;\r\n//       var sumB = sin * dx - cos * dy;\r\n//       return sumA * sumA / (this._radiusX * this._radiusX)  + sumB * sumB / (this._radiusY * this._radiusY) <= 1;\r\n//   }\r\n// });\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Ellipse.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017-6-15\r\n */\r\nimport {\r\n  coattail\r\n} from '@/utils/Bezier';\r\nlet {\r\n  Polyline,\r\n  Polygon,\r\n  point: toPoint\r\n} = L;\r\nlet {\r\n  _projectLatlngs,\r\n  toGeoJSON\r\n} = Polyline.prototype\r\n/**\r\n * 军标箭头\r\n * \r\n *  在transofrom控件拖拽旋转中会报错\r\n */\r\nexport default L.MilitaryArrow = L.MilitaryArrow || Polyline.extend({\r\n  /**\r\n   * @param options\r\n   */\r\n  options: {\r\n    fill: true,\r\n    // noClip: true // 已重写 clipPoints\r\n  },\r\n  /**\r\n   * @override\r\n   */\r\n  _projectLatlngs(latlngs, _rings, projectedBounds) {\r\n    _projectLatlngs.call(this, latlngs, _rings, projectedBounds);\r\n    let temp = this._rings;\r\n    temp = temp[0].map(p => [p.x, p.y]);\r\n    temp = coattail(temp, 0.005, this.options);\r\n    let [result] = this._rings_temp = [\r\n      []\r\n    ];\r\n    for (let i = 0, l = temp.length; i < l; i++) {\r\n      result[i] = toPoint(temp[i][0], temp[i][1]);\r\n      projectedBounds.extend(result[i]);\r\n    }\r\n  },\r\n  /**\r\n   * 重写\r\n   */\r\n  _clipPoints() {\r\n    this._parts = this._rings_temp;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _containsPoint(p) {\r\n    return Polygon.prototype._containsPoint.call(this, p, true);\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let json = toGeoJSON.call(this);\r\n    json.geometry.type = 'MilitaryArrow'\r\n    return json;\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/MilitaryArrow.js","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/listToStyles.js\n// module id = 22\n// module chunks = 0 1","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2016-11-4\r\n */\r\nimport lonlats from '@/utils/LonLats';\r\nimport Popup from '@/polyfill/Popup';\r\nimport VectorMarker from '@/feature/VectorMarker';\r\nimport Typhoon from \"@/feature/Typhoon\";\r\nimport Ellipse from '@/feature/Ellipse';\r\nimport \"@/feature/Text\";\r\nimport '@/feature/Heat';\r\nimport '@/feature/Balloon';\r\nimport River from '@/feature/River';\r\nimport MilitaryArrow from '@/feature/MilitaryArrow';\r\nimport 'overlapping-marker-spiderfier-leaflet/build/oms';\r\n// import { AntPath, antPath } from 'leaflet-ant-path';\r\n//\r\nlet {\r\n  isFunction,\r\n  isArray,\r\n  fmt,\r\n  assign: $assign\r\n} = T;\r\nlet {\r\n  featureGroup: toGroup,\r\n  marker: toMarker,\r\n  polyline: toPolyline,\r\n  polygon: toPolygon,\r\n  circle: toCircle,\r\n  icon: toIcon,\r\n  divIcon: toDivIcon,\r\n  imageOverlay: toImageOverlay\r\n} = L;\r\nlet toArray = data => isArray(data) ? data : [data];\r\nlet toOptions = (options, data) => isFunction(options) ? options(data) : options || {};\r\n/**\r\n * 要素管理的通用图层\r\n */\r\nexport default class FeatureLayer extends T.Class {\r\n  dmap;\r\n  map;\r\n  info; // 预留，提供给菜单，用于绑定检索\r\n  options; // 样式，图层配置\r\n  /**\r\n   * \r\n   * @param {*} options \r\n   */\r\n  constructor(options) {\r\n    super();\r\n    this.initHook();\r\n    // 台风模块需要设置预报机构\r\n    this.config(options);\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  initHook() {\r\n    let that = this;\r\n    that._source = [];\r\n    ['addPoints', 'addPolylines', 'addPolygons', 'addTyphoon', 'addAlarmLines'].forEach(name => {\r\n      this.addFnHook(name, {\r\n        precall: function () {\r\n          let data = {\r\n            fn: name,\r\n            args: arguments\r\n          };\r\n          that._source.push(data)\r\n          T.defer(() => {\r\n            this.do('feature-add', data)\r\n          })\r\n        }\r\n      })\r\n    })\r\n    this.addFnHook('clear', {\r\n      precall: function () {\r\n        that._source.length = 0;\r\n        T.defer(() => {\r\n          that.do('feature-clear');\r\n        })\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * 连接，复制\r\n   * @param {*} layer \r\n   */\r\n  connect(layer) {\r\n    let {\r\n      options,\r\n      _source\r\n    } = this;\r\n    layer.options = options;\r\n    _source.forEach(item => {\r\n      layer[item.fn].apply(layer, item.args);\r\n    });\r\n    //\r\n    this.on(\"feature-add\", e => {\r\n      layer[e.fn].apply(layer, e.args);\r\n    }).on('feature-clear', () => {\r\n      layer.clear();\r\n    })\r\n  }\r\n  /**\r\n   * 配置\r\n   * @param options \r\n   */\r\n  config(options) {\r\n    this.options = options;\r\n    this.layer = toGroup();\r\n  }\r\n  /**\r\n   * 判断图元是否存在\r\n   * @param {*} marker \r\n   */\r\n  has(marker) {\r\n    return this.layer.hasLayer(marker)\r\n  }\r\n  /**\r\n   * 获取所有图层\r\n   */\r\n  getMarkers() {\r\n    return this.layer.getLayers();\r\n  }\r\n  /**\r\n   * 添加图元\r\n   * @param {*} feature \r\n   */\r\n  _add(feature) {\r\n    this.layer.addLayer(feature);\r\n  }\r\n  /**\r\n   * 添加图元，并绑定 tooltip、popup、text\r\n   * @param feature \r\n   */\r\n  add(feature, options, data) {\r\n    if (feature) {\r\n      feature.__data = data;\r\n      this._add(feature);\r\n      this._bindToolTip(feature, options, data);\r\n      this._bindPopup(feature, options, data);\r\n      this._bindText(feature, options, data);\r\n      //\r\n    }\r\n  }\r\n  /**\r\n   * 添加点图元\r\n   * @param data [{coordinates:[lon,lat] or [{lon,lat}] or [{lat,lng}]\r\n   * @param style\r\n   */\r\n  addPoints(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let feature = this.createPoint(item, featureOptions);\r\n      this.add(feature, featureOptions, item);\r\n      return feature;\r\n    });\r\n  }\r\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addClusterPoints(data, options) {\r\n    let group = L.markerClusterGroup(options && options.cluster);\r\n    let {\r\n      layer,\r\n      _bindToolTip,\r\n      _bindPopup\r\n    } = this;\r\n    layer.addLayer(group);\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createPoint(item, featureOptions);\r\n      if (marker) {\r\n        marker.__data = item;\r\n        _bindToolTip(marker, featureOptions, item);\r\n        _bindPopup(marker, featureOptions, item);\r\n        group.addLayer(marker);\r\n      }\r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addClusterPoints2(data, options) {\r\n    let group = this.oms = this.oms || new L.OverlappingMarkerSpiderfier(this.map);\r\n    let markers = this.addPoints(data, options)\r\n    markers.forEach(marker => {\r\n      group.addMarker(marker)\r\n    })\r\n  }\r\n  /**\r\n   * 添加线图元\r\n   * @param {*} data\r\n   * @param {*} options\r\n   */\r\n  addPolylines(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createPolyLine(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack(); //暂时底部 \r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加多边形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addPolygons(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createPolygon(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack(); //暂时底部\r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加圆形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   *  \r\n   */\r\n  addCircles(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createCircle(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack() // 暂时底部\r\n    });\r\n  }\r\n  /**\r\n   * 添加椭圆\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addEllipses(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createEllipse(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack() // 暂时底部\r\n    });\r\n  }\r\n  /**\r\n   * 添加文本图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addTexts(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = L.text(lonlats(item.coordinates || item), item.text || item.properties.text, featureOptions.feature || featureOptions);\r\n      marker.__data = item;\r\n      this.layer.addLayer(marker);\r\n    })\r\n  }\r\n  /**\r\n   * 添加河流\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addRivers(data, options) {\r\n    return toArray(data).map(item => {\r\n      let {\r\n        properties,\r\n        coordinates\r\n      } = item;\r\n      let featureOptions = properties || toOptions(options, properties || item);\r\n      let {\r\n        feature\r\n      } = featureOptions;\r\n\r\n      let deep = (coordinates[0] && isArray(coordinates[0][0])) ? 2 : 1;\r\n      let marker = new River(lonlats(coordinates, deep), feature);\r\n      this.layer.addLayer(marker);\r\n    })\r\n  }\r\n  /**\r\n   * 添加图片图元(雷达图、云图)\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addImage(data, options) {\r\n    let marker = toImageOverlay(options.url, lonlats(data.coordinates, 1), options);\r\n    this.layer.addLayer(marker);\r\n    return marker;\r\n  }\r\n  /**\r\n   * 添加军标箭头\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addMilitaryArrows(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let {\r\n        feature\r\n      } = featureOptions;\r\n      let {\r\n        coordinates\r\n      } = item, deep = 1;\r\n      if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\r\n        deep = 2;\r\n      }\r\n      let marker = new MilitaryArrow(lonlats(coordinates, deep), feature)\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack(); //暂时底部 \r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加台风 \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addTyphoon(data, options) {\r\n    let typhoons = this.typhoons || (this.typhoons = {});\r\n    let feature = typhoons[data.tfbh];\r\n    let featureOptions = toOptions(options || this.options);\r\n    if (!feature) {\r\n      feature = typhoons[data.tfbh] = this.createTyphoon(data, featureOptions)\r\n      feature.addTo(this);\r\n    } else { // 刷新\r\n      feature.update(data);\r\n    }\r\n    return feature;\r\n  }\r\n  /**\r\n   * 台风警戒线 \r\n   * @deprecated 慎用，可能被废弃\r\n   * @param data {\r\n   *  g24: [[105, 0], [113, 4.5], [119, 11], [119, 18], [127, 22], [127, 34]],\r\n   *  s24: { color: '#0000FF', opacity: 1, weight: 1, dashArray: '10,3', interactive: false },\r\n   *  g48: [[105, 0], [120, 0], [132, 15], [132, 34]],\r\n   *  s48: { color: '#FFFF00', opacity: 1, weight: 1, dashArray: '10,3', interactive: false } \r\n   * }\r\n   */\r\n  addAlarmLines(data) {\r\n    if (!data) return;\r\n    let {\r\n      layer\r\n    } = this;\r\n    let createPolyline = (coor, options) => toPolyline(lonlats(coor, 1), options)\r\n    let m48 = createPolyline(data.g48, data.s48);\r\n    let m24 = createPolyline(data.g24, data.s24);\r\n    layer.addLayer(m48).addLayer(m24);\r\n  }\r\n  /**\r\n   * 添加热力图\r\n   * @param data\r\n   * @param options\r\n   */\r\n  addHeat(data, options) {\r\n    options = toOptions(options);\r\n    let marker = L.heat(lonlats(data, 1), options.feature);\r\n    return this.add(marker, options, data), marker;\r\n  }\r\n  /**\r\n   * todo:\r\n   * 1、支持4326投影\r\n   * @param data\r\n   * @param options \r\n   */\r\n  addVelocity(data, options) {\r\n    return new Promise((resolve) => {\r\n      T.require(['dmap/leaflet/plugins/velocityLayer'], ({\r\n        default: createLayer\r\n      }) => {\r\n        let marker = createLayer(data, options);\r\n        this._add(marker);\r\n        resolve(marker);\r\n      })\r\n    })\r\n  }\r\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addWindy(data, options) {\r\n    return new Promise(resolve => {\r\n      T.require(['dmap/leaflet/plugins/windyLayer'], ({\r\n        default: createWindyLayer\r\n      }) => {\r\n        options = T.assign({\r\n          tempOverlay: true\r\n        }, options);\r\n        //\r\n        let {\r\n          windfarm\r\n        } = this;\r\n        if (windfarm && windfarm.options.tempOverlay === options.tempOverlay) {\r\n          windfarm.loadWindy(data)\r\n        } else {\r\n          windfarm && windfarm.removeFrom(this.layer);\r\n          windfarm = this.windfarm = createWindyLayer(options);\r\n          this._add(windfarm);\r\n          windfarm.loadWindy(data);\r\n        }\r\n        resolve(windfarm);\r\n      })\r\n    })\r\n  }\r\n  /**\r\n   * 添加 shp 图层\r\n   */\r\n  addShp(url, options) {\r\n    let layer = L.shapefile(url, options)\r\n    this._add(layer);\r\n    return layer;\r\n  }\r\n  /**\r\n   * @see https://github.com/Flexberry/Leaflet-WFST\r\n   * @see https://github.com/azgs/azgs-leaflet\r\n   */\r\n  addWFS(url, options) {\r\n    T.require(['dmap/leaflet/plugins/wfst'], ({\r\n      default: wfst\r\n    }) => {\r\n      options.url = url;\r\n      new L.WFST(options, new L.Format.GeoJSON({\r\n          crs: L.CRS.EPSG4326\r\n        }))\r\n        .addTo(this.map)\r\n        .once('load', function () {\r\n          this.map.fitBounds(wfst);\r\n        });\r\n    })\r\n  }\r\n  /**\r\n   * 添加 geojson 图层  \r\n   * @param {*} geojson \r\n   * @see https://leafletjs.com/reference-1.3.0.html#geojson\r\n   */\r\n  addGeoJSON(geojson, options) {\r\n    let geometry = geojson.type === 'Feature' ? geojson.geometry : geojson;\r\n    let coords = geometry ? geometry.coordinates : null;\r\n    let type = geometry.type;\r\n    if (!coords && !geometry) {\r\n      return null;\r\n    }\r\n    options = isFunction(options) ? options : $assign({}, options, geometry.properties);\r\n    switch (type) {\r\n      case 'MultiPoint':\r\n        geojson = coords.map(coordinates => {\r\n          return {\r\n            coordinates,\r\n            properties: geometry.properties\r\n          }\r\n        })\r\n      case 'Point':\r\n        return this.addPoints(geojson, options);\r\n      case 'LineString':\r\n      case 'MultiLineString':\r\n        // { coordinates: lonlats(coords, type === 'LineString' ? 0 : 1) }\r\n        return this.addPolylines(geometry, options)\r\n      case 'Polygon':\r\n      case 'MultiPolygon':\r\n        // { coordinates: lonlats(coords, type === 'Polygon' ? 1 : 2) }\r\n        return this.addPolygons(geometry, options);\r\n      case 'GeometryCollection':\r\n        return geometry.geometries.map(data => this.addGeoJSON(data, options));\r\n        // 拓展 geojson 的类型\r\n      case 'Circle':\r\n        return this.addCircles(geometry, options);\r\n      case 'Ellipse':\r\n        return this.addEllipses(geometry, options);\r\n      case 'Text':\r\n        return this.addTexts(geometry, options);\r\n      case 'MilitaryArrow': //军标箭头\r\n        return this.addMilitaryArrows(geometry, options);\r\n    }\r\n  }\r\n  /**\r\n   * 批量移除台风\r\n   * @param {*} ids\r\n   */\r\n  removeTyphoons(ids) {\r\n    let {\r\n      typhoons\r\n    } = this;\r\n    if (typhoons) {\r\n      ids = ids || Object.keys(typhoons);\r\n      T.each(ids, id => {\r\n        var typhoon = typhoons[id];\r\n        if (typhoon) {\r\n          typhoon.remove();\r\n          delete typhoons[id];\r\n        }\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * 获取台风对象\r\n   * @param {*} id\r\n   */\r\n  getTyphoon(id) {\r\n    let {\r\n      typhoons\r\n    } = this;\r\n    return id === void 0 ? typhoons : typhoons && typhoons[id];\r\n  }\r\n  /**\r\n   * 创建台风对象\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createTyphoon(data, options) {\r\n    return new Typhoon(data, options);\r\n  }\r\n  /**\r\n   * 点图元工厂\r\n   * @param {*} data\r\n   * @param {*} options {feature:{icon,symbol,glowOptions,flowOptions}}\r\n   */\r\n  createPoint(data, options) {\r\n    let {\r\n      feature\r\n    } = options;\r\n    let {\r\n      tag,\r\n      src\r\n    } = feature || {};\r\n    //\r\n    let latlng = lonlats(data.coordinates || data);\r\n    if (latlng) {\r\n      if (tag) {\r\n        switch (tag) {\r\n          case 'img':\r\n            let anchor = feature.offset;\r\n            if (anchor) {\r\n              anchor = [-anchor[0], -anchor[1]];\r\n            }\r\n            feature.icon = toIcon($assign({\r\n              iconUrl: src,\r\n              iconAnchor: anchor,\r\n              // iconSize: [38, 95],\r\n              // popupAnchor: [-3, -76],\r\n              // shadowUrl: 'shadow.png',\r\n              // shadowSize: [68, 95],\r\n              // shadowAnchor: [22, 94]\r\n            }, feature.icon));\r\n            break;\r\n          case 'div':\r\n            feature.icon = toDivIcon($assign({\r\n              iconAnchor: anchor\r\n            }, feature.icon))\r\n            break;\r\n        }\r\n        return toMarker(latlng, feature);\r\n      }\r\n      return new VectorMarker(latlng, feature);\r\n    }\r\n  }\r\n  /**\r\n   * 线图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createPolyLine(data, options) {\r\n    let {\r\n      feature\r\n    } = options;\r\n    let {\r\n      coordinates\r\n    } = data, deep = 1;\r\n    //todo\r\n    if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\r\n      deep = 2;\r\n    }\r\n    return toPolyline(lonlats(coordinates, deep), feature);\r\n  }\r\n\r\n  /**\r\n   * 多边形图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createPolygon(data, options) {\r\n    let {\r\n      feature\r\n    } = options;\r\n    let {\r\n      coordinates\r\n    } = data;\r\n    let deep = (coordinates && coordinates[0] && isArray(coordinates[0][0])) ? 2 : 1;\r\n    // 数据错误，容错下，标绘\r\n    if (!isArray(coordinates[0])) {\r\n      coordinates = [coordinates];\r\n    }\r\n    return toPolygon(lonlats(coordinates, deep), feature);\r\n  }\r\n  /**\r\n   * 创建圆形图元\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createCircle(data, options) {\r\n    return toCircle(lonlats(data.coordinates), options.feature);\r\n  }\r\n  /**\r\n   * 创建椭圆图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  createEllipse(data, options) {\r\n    return new Ellipse(lonlats(data.coordinates), options.feature);\r\n  }\r\n  /**\r\n   * 绑定 tooltip ，浮出层，一般用于显示站名\r\n   * @param marker \r\n   * @param options \r\n   * @param data \r\n   */\r\n  _bindToolTip(marker, options, data) {\r\n    if (options = options.tooltip) {\r\n      let {\r\n        text\r\n      } = options;\r\n      let tooltip = (data && typeof text == 'string') ? fmt(text, data.properties || data) : text;\r\n      //\r\n      if (tooltip) {\r\n        // options.interactive = true;\r\n        marker.bindTooltip(tooltip, options);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 绑定 popup 弹出层，一般用于显示报图\r\n   * @param marker \r\n   * @param options \r\n   */\r\n  _bindPopup(marker, options) {\r\n    options = options.popup;\r\n    if (options) {\r\n      let popup = new Popup(options).setContent(options.text);\r\n      marker.bindPopup(popup, options);\r\n      // marker.bindPopup(options.text, options);\r\n    }\r\n  }\r\n  /**\r\n   * 绑定静态文本，一般用于面和线上的文本显示\r\n   * @param {*} feature\r\n   * @param {*} options\r\n   */\r\n  _bindText(feature, options) {\r\n    options = options.text;\r\n    if (options) {\r\n      feature.bindText(options.text, options);\r\n    }\r\n  }\r\n  /**\r\n   * @deprecated 慎用，这个方法可能会被弃用\r\n   */\r\n  updateTooltips() {\r\n    this.map && this.map.eachLayer(layer => {\r\n      let tooltip = layer.getTooltip();\r\n      tooltip && tooltip.isOpen && tooltip.update()\r\n    });\r\n  }\r\n  /**\r\n   * 隐藏标注，常用于水雨情设置模块\r\n   * @param hide\r\n   */\r\n  hideTooltip(hide) {\r\n    if (hide === void 0) hide = true;\r\n    this.layer.eachLayer(layer => {\r\n      let tooltip = layer.getTooltip();\r\n      if (tooltip) {\r\n        layer.hideTooltip(hide);\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * 清除\r\n   */\r\n  clear() {\r\n    this.layer.clearLayers();\r\n    this.typhoons = null;\r\n    return this;\r\n  }\r\n  /**\r\n   * 挂起\r\n   */\r\n  suspend() {\r\n    let {\r\n      map,\r\n      layer\r\n    } = this;\r\n    map && map.removeLayer(layer);\r\n    this.suspended = true;\r\n  }\r\n  /**\r\n   * 重启\r\n   */\r\n  resume() {\r\n    let {\r\n      map,\r\n      layer\r\n    } = this;\r\n    map && map.addLayer(layer);\r\n  }\r\n  /**\r\n   * 添加\r\n   * @param dmap \r\n   */\r\n  addTo(dmap) {\r\n    //\r\n    this.dmap = dmap;\r\n    this.map = dmap.map;\r\n    //\r\n    dmap.addLayer(this);\r\n    return this;\r\n  }\r\n  /**\r\n   * 移除\r\n   */\r\n  remove() {\r\n    this.dmap.removeLayer(this.layer);\r\n    this.dmap = null;\r\n    this.map = null;\r\n    return this;\r\n  }\r\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\r\n  on(types, fn, ctx) {\r\n    return this.layer.on(types, fn, ctx);\r\n  }\r\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\r\n  once(types, fn, ctx) {\r\n    return this.layer.once(types, fn, ctx);\r\n  }\r\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx  \r\n   */\r\n  off(types, fn, ctx) {\r\n    return this.layer.off(types, fn, ctx);\r\n  }\r\n  /**\r\n   * \r\n   * @param {*} types \r\n   * @param {*} e \r\n   */\r\n  do(types, e) {\r\n    return this.layer.fire(types, e)\r\n  }\r\n  /**\r\n   * 导出 GeoJson\r\n   * @param precision\r\n   */\r\n  toGeoJSON(precision) {\r\n    let {\r\n      layer\r\n    } = this;\r\n    let jsons = [];\r\n    layer.eachLayer(layer => {\r\n      if (layer.toGeoJSON) {\r\n        let json = layer.toGeoJSON(precision);\r\n        let {\r\n          geometry,\r\n          properties\r\n        } = json;\r\n        let {\r\n          __data: data,\r\n          options\r\n        } = layer;\r\n        let tooltip = layer.getTooltip();\r\n        let text = layer.getText();\r\n        //\r\n        geometry.properties = $assign(properties, geometry.properties, data && data.properties, {\r\n          feature: options,\r\n          tooltip: tooltip && tooltip.options,\r\n          text: text && text.options\r\n        });\r\n        geometry.properties.feature.className = ''; //暂时设置为空\r\n        jsons.push(geometry);\r\n      }\r\n    });\r\n    //\r\n    return {\r\n      geometries: jsons,\r\n      type: 'GeometryCollection'\r\n    };\r\n    //\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/FeatureLayer.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\n/**\r\n *  @param {boolean} restart 重新启动\r\n */\r\nexport default class Tool {\r\n  constructor(owner, options) {\r\n    this.owner = owner;\r\n    this.dmap = owner.dmap;\r\n    this.map = owner.map;\r\n    this.layer = owner.layer;\r\n    this.data = options.data; //包含layerid，用于标绘的测站类型id标识\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  initMouseDownHandler() {\r\n    this.onMouseDown = this.onMouseDown || (e => {\r\n      if (e.originalEvent.button == 0) {\r\n        this._onMouseDown(e);\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * \r\n   * @param options \r\n   */\r\n  setOptions(options) {\r\n    this.options = T.assign(this.options || {}, options);\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  reback() {\r\n    let {\r\n      marker,\r\n      layer,\r\n      history\r\n    } = this;\r\n    if (marker) {\r\n      if (marker._defaultShape) { //线/面\r\n        let latlngs = marker._defaultShape();\r\n        let latlng = latlngs.pop();\r\n        if (latlng) {\r\n          history.push(latlng);\r\n          marker.setLatLngs(latlngs);\r\n        } else {\r\n          marker.removeFrom(layer);\r\n          return true;\r\n        }\r\n      } else {\r\n        marker.removeFrom(layer);\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  restore() {\r\n    let {\r\n      marker,\r\n      layer,\r\n      history\r\n    } = this;\r\n    if (marker) {\r\n      marker.addTo(layer);\r\n      //\r\n      if (marker._defaultShape && history.length > 0) { //线/面\r\n        let latlngs = marker._defaultShape();\r\n        let latlng = history.pop();\r\n        latlngs.push(latlng);\r\n        marker.setLatLngs(latlngs);\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 绘制结束\r\n   * @param e \r\n   */\r\n  onEnd(e) {\r\n    //\r\n    this.history = [];\r\n    //\r\n    this.dmap.do('draw-end', {\r\n      target: this,\r\n      marker: this.marker\r\n    });\r\n  }\r\n  /**\r\n   * 清除图元，用于重置工具，重复绘制，或者取消绘制\r\n   */\r\n  clear() {\r\n    let {\r\n      marker\r\n    } = this;\r\n    marker && marker.remove();\r\n  }\r\n  /**\r\n   * 重置\r\n   */\r\n  reset() {\r\n    if (this.restart) {\r\n      this.clear();\r\n      this.restart = false;\r\n      this.marker = null;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  cancel() {\r\n\r\n  }\r\n  /**\r\n   * 复制工具\r\n   */\r\n  clone() {\r\n    let tool = new this.constructor(this.owner, this.options);\r\n    tool.options = this.options;\r\n    return tool;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/Tool.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2016.11.4\r\n * 台风图元\r\n */\r\nimport lonlats from '../utils/LonLats';\r\nimport Quadrant from '../feature/Quadrant';\r\nimport Popup from '../polyfill/Popup';\r\nimport VectorMarker from './VectorMarker'\r\nlet {\r\n  marker: toMarker,\r\n  canvas: toCanvas,\r\n  polyline: toPolyline,\r\n  circle: toCircle,\r\n  circleMarker,\r\n  divIcon: toDivIcon,\r\n  tooltip: toTooltip,\r\n  featureGroup: toFeatureGroup,\r\n  latLng: toLatLng\r\n} = L;\r\nlet {\r\n  assign: $assign\r\n} = T;\r\n\r\n// svg[Attributes]{\r\n//   stroke - linejoin: round;\r\n//   stroke - linecap: round;\r\n//   pointer - events: none;\r\n//   stroke: rgb(0, 150, 255);\r\n//   stroke - opacity: 0.8;\r\n//   stroke - width: 3;\r\n//   fill: none;\r\n// }\r\n\r\n/**\r\n * 台风图元\r\n * @class Typhoon\r\n * todo: 用 FeatureGroup 重构\r\n */\r\nexport default class Typhoon {\r\n  /**\r\n   * 配置信息\r\n   */\r\n  options = {\r\n    // 自动播放\r\n    autoPlay: true,\r\n    // 是否绘制台风路径\r\n    hasLsljLater: true,\r\n    // 确保台风在视野范围内\r\n    inView: true,\r\n    // 当inview=true且keepZoom=true,确保视野范围的时候不缩放地图\r\n    keepZoom: true,\r\n    // 点击是否根据路径点重新绘制台风\r\n    click2drawOnTime: true,\r\n    // 是否对路径点进行碰撞检测、抽稀\r\n    hitForPoint: true,\r\n    // 历史路径\r\n    ls: {\r\n      color: '#0096FF',\r\n      weight: 3,\r\n      opacity: .8,\r\n      interactive: false\r\n    },\r\n    // 历史路径-灰色\r\n    lsyb: {\r\n      color: '#666666',\r\n      weight: 2,\r\n      opacity: .8,\r\n      interactive: false\r\n    },\r\n    // 预报机构,预报路径点\r\n    org: {\r\n      weight: 1,\r\n      dashArray: '10,3',\r\n      interactive: false\r\n    },\r\n    orgs: [{\r\n        label: \"中国\",\r\n        th: \"CN\",\r\n        color: \"#FF4050\"\r\n      },\r\n      {\r\n        label: \"韩国\",\r\n        th: \"KR\",\r\n        color: \"#000000\"\r\n      },\r\n      {\r\n        label: \"美国\",\r\n        th: \"US\",\r\n        color: \"#4099EE\"\r\n      },\r\n      {\r\n        label: \"中国台湾\",\r\n        th: \"TW\",\r\n        color: \"#FFA040\"\r\n      },\r\n      {\r\n        label: \"日本\",\r\n        th: \"JP\",\r\n        color: \"#43FF4B\"\r\n      },\r\n      {\r\n        label: \"中国香港\",\r\n        th: \"HK\",\r\n        color: \"#FF40F5\"\r\n      }\r\n    ],\r\n    // 台风等级\r\n    grade: {\r\n      color: '#000',\r\n      radius: 4,\r\n      fillColor: '#FFF',\r\n      weight: 1,\r\n      fillOpacity: 1,\r\n      src: 'circle'\r\n    },\r\n    grades: [{\r\n        F1: 0,\r\n        F2: 0.2\r\n      },\r\n      {\r\n        F1: 0.3,\r\n        F2: 1.5\r\n      },\r\n      {\r\n        F1: 1.6,\r\n        F2: 3.3\r\n      },\r\n      {\r\n        F1: 3.4,\r\n        F2: 5.4\r\n      },\r\n      {\r\n        F1: 5.5,\r\n        F2: 7.9\r\n      },\r\n      {\r\n        F1: 8,\r\n        F2: 10.7\r\n      },\r\n      {\r\n        F1: 10.8,\r\n        F2: 13.8,\r\n        fillColor: '#00FF03',\r\n        GRADENAME: '热带低压'\r\n      },\r\n      {\r\n        F1: 13.95,\r\n        F2: 17.15,\r\n        fillColor: '#00FF03',\r\n        GRADENAME: '热带低压'\r\n      },\r\n      {\r\n        F1: 17.2,\r\n        F2: 20.7,\r\n        fillColor: '#0062FE',\r\n        GRADENAME: '热带风暴'\r\n      },\r\n      {\r\n        F1: 20.8,\r\n        F2: 24.4,\r\n        fillColor: '#0062FE',\r\n        GRADENAME: '热带风暴'\r\n      },\r\n      {\r\n        F1: 24.5,\r\n        F2: 28.4,\r\n        fillColor: '#FDFA00',\r\n        GRADENAME: '强热带风暴'\r\n      },\r\n      {\r\n        F1: 28.5,\r\n        F2: 32.6,\r\n        fillColor: '#FDFA00',\r\n        GRADENAME: '强热带风暴'\r\n      },\r\n      {\r\n        F1: 32.7,\r\n        F2: 36.9,\r\n        fillColor: '#FDAC03',\r\n        GRADENAME: '台风'\r\n      },\r\n      {\r\n        F1: 37,\r\n        F2: 41.4,\r\n        fillColor: '#FDAC03',\r\n        GRADENAME: '台风'\r\n      },\r\n      {\r\n        F1: 41.5,\r\n        F2: 46.1,\r\n        fillColor: '#F072F6',\r\n        GRADENAME: '强台风'\r\n      },\r\n      {\r\n        F1: 46.2,\r\n        F2: 50.9,\r\n        fillColor: '#F072F6',\r\n        GRADENAME: '强台风'\r\n      },\r\n      {\r\n        F1: 51,\r\n        F2: 56,\r\n        fillColor: '#FD0002',\r\n        GRADENAME: '超强台风'\r\n      },\r\n      {\r\n        F1: 56.1,\r\n        F2: 161.2,\r\n        fillColor: '#FD0002',\r\n        GRADENAME: '超强台风'\r\n      }\r\n    ],\r\n    // 台风风圈\r\n    c7: {\r\n      fillColor: '#79C0AE',\r\n      fillOpacity: 0.5,\r\n      color: '#49BA6E',\r\n      weight: 1\r\n    },\r\n    c10: {\r\n      fillColor: '#FFFF00',\r\n      fillOpacity: 0.2,\r\n      color: '#FFFF00',\r\n      weight: 1\r\n    },\r\n    c12: {\r\n      fillColor: '#FF0000',\r\n      fillOpacity: 0.3,\r\n      color: '#FF0000',\r\n      weight: 1\r\n    },\r\n    // 台风登陆地\r\n    land: {\r\n      src: T + 'assets/common/dmap/markers/flag.png'\r\n    }\r\n    // 台风风眼\r\n    // hurricane: {iconUrl: T + \"assets/common/dmap/markers/typhoonIco.gif\",iconSize: [32, 32]}\r\n    // \r\n  }\r\n  // \r\n  group = toFeatureGroup();\r\n  //\r\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} style \r\n   */\r\n  constructor(data, options) {\r\n    this.data = T.action(data);\r\n    options = $assign(this.options, options);\r\n    options.grades = options.grades.map(val => $assign({}, options.grade, val));\r\n    //\r\n    this._points = [];\r\n  }\r\n  /**\r\n   * 动态改变预报机构集合。\r\n   * @param {*} options \r\n   */\r\n  setOptions(options) {\r\n    $assign(this.options, options);\r\n    this.update();\r\n  }\r\n  /**\r\n   * 更新重绘\r\n   */\r\n  update(data) {\r\n    if (data && data !== this.data) { //最新台风实时数据刷新\r\n      this.data = T.action(data);\r\n      this.ci = data.points.length - 1;\r\n    }\r\n    if (this.complete) {\r\n      this.draw(this.ci);\r\n    }\r\n  }\r\n  /**\r\n   * 创建路径点 \r\n   * @param coor\r\n   * @param options\r\n   * @param data\r\n   */\r\n  createPoint(coor, options, data) {\r\n    let marker = circleMarker(lonlats(coor), options);\r\n    data._source = this.data;\r\n    marker.__data = data;\r\n    // 创建弹出层\r\n    options = this.options.popup;\r\n    options && marker.bindPopup(new Popup(options), options);\r\n    return marker;\r\n  }\r\n  /**\r\n   * 创建登录地\r\n   */\r\n  createLand(coor, options) {\r\n    return new VectorMarker(lonlats(coor), options);\r\n  }\r\n  /**\r\n   * 创建路径线\r\n   * @param coor\r\n   * @param options\r\n   */\r\n  createPolyline(coor, options) {\r\n    return toPolyline(lonlats(coor, 1), options);\r\n  }\r\n  /**\r\n   * 创建风圈\r\n   * @param center\r\n   * @param radius\r\n   * @param options\r\n   */\r\n  createCicle(center, radius, options) {\r\n    return radius && toCircle(lonlats(center), radius * 1000, options);\r\n  }\r\n  /**\r\n   * 绘制四象风圈\r\n   * { ne, nw, sw, se}-> [ne, nw, sw, se]\r\n   * @param center\r\n   * @param radius\r\n   * @param style\r\n   */\r\n  createQuadrant(center, radius, style) {\r\n    if (!radius) return;\r\n    let {\r\n      ne,\r\n      nw,\r\n      sw,\r\n      se\r\n    } = radius;\r\n    if (!ne || !nw || !sw || !se) {\r\n      return;\r\n    }\r\n    this.renderer = this.renderer || toCanvas({\r\n      style: {\r\n        zIndex: 40\r\n      }\r\n    });\r\n    return new Quadrant([center[1], center[0]], $assign({}, style, {\r\n      renderer: this.renderer,\r\n      radius: [ne * 1000, nw * 1000, sw * 1000, se * 1000]\r\n    }))\r\n  }\r\n  /**\r\n   * 绘制飓风动画\r\n   * @param center\r\n   * @param options\r\n   */\r\n  createHurricane(center, options, grade) {\r\n    let colorIndex = parseInt((grade - 6) / 2) + 1;\r\n    return options ? toMarker(lonlats(center), {\r\n      icon: toDivIcon(options)\r\n    }) : new VectorMarker(lonlats(center), {\r\n      src: T + `assets/common/dmap/typhoon/hurricane${colorIndex > 0 ? colorIndex : 0}.png`,\r\n      rotate: true\r\n    })\r\n  }\r\n  /**\r\n   * draw\r\n   * {points}\r\n   * {radius7,radius10,radius12,radius7_quad,radius10_quad,radius12_quad}-> {r7,r10,r12,r7_q,r10_q,r12_q}\r\n   * {lng,lat} -> {lon,lat}\r\n   * {power,strong} 台风等级,台风等级对应名称\r\n   * {sets,points} 预报机构，预报路径\r\n   * @param time\r\n   * @property _points 缓存当前历史路径绘制的点图元\r\n   */\r\n  draw(time) {\r\n    let that = this;\r\n    let {\r\n      options,\r\n      data,\r\n      group,\r\n      lsp,\r\n      createPolyline,\r\n      createCicle,\r\n      _points\r\n    } = that;\r\n    let {\r\n      autoPlay,\r\n      ls,\r\n      lsyb,\r\n      grades,\r\n      c7,\r\n      c10,\r\n      c12,\r\n      org,\r\n      orgs,\r\n      hurricane,\r\n      hasLsljLater,\r\n      hitForPoint\r\n    } = options;\r\n    let createPoint = that.createPoint.bind(that);\r\n    let createLand = that.createLand.bind(that);\r\n    let createQuadrant = that.createQuadrant.bind(that);\r\n    let handleEvent = that.handleEvent.bind(that);\r\n    let {\r\n      points,\r\n      land\r\n    } = data;\r\n    let ci = this.getTimeIndex(points, time); //当前台风时间点，默认为台风消亡时间点\r\n    let len = points.length;\r\n    let addLayer = (value, index, array) => {\r\n      if (!value || (array === lsp && index > ci && autoPlay)) return;\r\n      group.addLayer(value);\r\n    }\r\n    let getDistance = (p1, p2) => Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\r\n    if (!that.tempLayer) {\r\n      that.tempLayer = toFeatureGroup();\r\n      group.addLayer(that.tempLayer);\r\n    }\r\n    let {\r\n      tempLayer\r\n    } = that;\r\n    let addTempLayer = (value, index, array) => {\r\n      if (!value || (array === lsp && index > ci && autoPlay)) return;\r\n      tempLayer.addLayer(value);\r\n    }\r\n    //\r\n    let drawing = (i, prev) => {\r\n      // 清除，点不能清除，因可能在播放过程显示Popup\r\n      tempLayer.clearLayers();\r\n      if (!i || i < prev) {\r\n        group.clearLayers();\r\n        group.addLayer(tempLayer);\r\n      }\r\n      // 声明\r\n      let lslj; // 历史路径\r\n      let lslj_yb; // 历史路径-灰色\r\n      let yblj = []; // 预报路径\r\n      let tffq = []; // 台风风圈\r\n      let landPoints = []; // 台风登陆地\r\n      // \r\n      let item = points[i];\r\n      //\r\n      let lslj_prev = points.slice(0, i + 1);\r\n      let lslj_after = points.slice(i);\r\n      let coor = [item.lng, item.lat];\r\n      // 绘制\"当前\"历史路径\r\n      if (lslj_prev.length > 1) {\r\n        lslj = createPolyline(lslj_prev, ls);\r\n      }\r\n      // 绘制\"未来\"历史路径-灰色\r\n      if (!autoPlay && hasLsljLater && lslj_after.length > 1) {\r\n        lslj_yb = createPolyline(lslj_after, lsyb);\r\n        lslj_prev = lslj_prev.concat(lslj_after.slice(1));\r\n      }\r\n      //\r\n      lsp.length = lslj_prev.length;\r\n      // 遍历历史路径点\r\n      lslj_prev.forEach((item, i) => {\r\n        // 抽稀\r\n        if (hitForPoint) {\r\n          // 获取当前路径点的像素坐标\r\n          let point = item._point = this.map.latLngToLayerPoint(toLatLng(item));\r\n          // 获取上个路径点的像素坐标\r\n          let point_prev = (i => {\r\n            while (i--) {\r\n              if (lsp[i]) return lslj_prev[i]._point;\r\n            }\r\n          })(i);\r\n          if (i > 0 && getDistance(point, point_prev) < 8) {\r\n            lsp[i] = null;\r\n            return;\r\n          }\r\n        }\r\n        // \r\n        let marker = lsp[i] = _points[i] = _points[i] || createPoint([item.lng, item.lat], grades[item.power || 0], item).on('click mouseover mouseout', handleEvent)\r\n        if (i === 0 && !marker.getTooltip()) {\r\n          let tooltip = toTooltip(T.merge({\r\n            zoom: 1,\r\n            direction: 'right',\r\n            offset: [5, 0],\r\n          }, this.options.tooltip), marker).setContent(data.tfbh + data.name);\r\n          marker.bindTooltip(tooltip);\r\n        }\r\n      })\r\n      // 登录地\r\n      landPoints = options.land && (land || []).map(data => {\r\n        let tm = T.clock(data.land_time);\r\n        let ctm = T.clock(item.time);\r\n        if (tm.date < ctm.date) {\r\n          let marker = createLand(data, options.land)\r\n          return marker;\r\n        }\r\n      })\r\n\r\n      // 绘制风圈和预报路径\r\n      if (autoPlay || i === ci) { //\r\n        let {\r\n          radius7_quad,\r\n          radius10_quad,\r\n          radius12_quad,\r\n          forecast\r\n        } = item;\r\n        // 绘制飓风动画和风圈\r\n        let h = that.createHurricane(coor, hurricane, item.power);\r\n        let r7 = createQuadrant(coor, radius7_quad, c7) || createCicle(coor, item.radius7, c7);\r\n        let r10 = createQuadrant(coor, radius10_quad, c10) || createCicle(coor, item.radius10, c10);\r\n        let r12 = createQuadrant(coor, radius12_quad, c12) || createCicle(coor, item.radius12, c12);\r\n        tffq.push(r7, r10, r12, h);\r\n        // 绘制预报路径：回溯 \r\n        if (!autoPlay || i === len - 1) {\r\n          let _points = [];\r\n          orgs.forEach(data => {\r\n            let sets = data.label; //预报机构名称\r\n            let index = i;\r\n            let item;\r\n            let point;\r\n            let search = {\r\n              sets: sets\r\n            };\r\n            while (!item && index >= 0) {\r\n              point = points[index--];\r\n              forecast = point.forecast;\r\n              item = forecast && T.find(forecast, search);\r\n            }\r\n            if (item) {\r\n              let {\r\n                sets,\r\n                points\r\n              } = item;\r\n              let style = $assign({}, org, T.find(orgs, {\r\n                label: sets\r\n              }));\r\n              yblj.push(createPolyline([point].concat(points), style));\r\n              //\r\n              points.forEach((item) => {\r\n                item.sets = sets; // 用于显示信息窗\r\n                // 抽稀\r\n                let point = item._point = this.map.latLngToLayerPoint(toLatLng(item));\r\n                if (hitForPoint) {\r\n                  for (let j = 0, len = _points.length; j < len; j++) {\r\n                    if (getDistance(point, _points[j]) < 8) {\r\n                      return;\r\n                    }\r\n                  }\r\n                }\r\n                _points.push(point);\r\n                //\r\n                yblj.push(createPoint(item, grades[item.power || 0], item).on('click mouseover mouseout', handleEvent))\r\n                //\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n      //\r\n      tffq.forEach(addTempLayer);\r\n      yblj.forEach(addTempLayer);\r\n      addTempLayer(lslj);\r\n      addTempLayer(lslj_yb);\r\n      lsp.forEach(addLayer);\r\n      landPoints.forEach(addTempLayer);\r\n      tempLayer.bringToBack();\r\n    }\r\n\r\n    if (autoPlay) {\r\n      let i = 0;\r\n      let playing = () => {\r\n        //init 防止播放过程中就被移除\r\n        if (this.init) {\r\n          if (i < len && that.layer) {\r\n            drawing(i, i - 1);\r\n            setTimeout(playing, 30);\r\n            i++;\r\n          } else if (that.layer) {\r\n            T.do('typhoon-playend', {\r\n              tf: data,\r\n              attr: points[i - 1]\r\n            })\r\n            options.autoPlay = false;\r\n            that.complete = true;\r\n          }\r\n          // \r\n          if ((i === len) && options.inView && !this.layer.suspended) {\r\n            (this.map && options.keepZoom) ? this.map.setView(points[i - 1]): this.map.fitBounds(toPolyline([\r\n              [30, 105],\r\n              [10, 125]\r\n            ].concat(points)).getBounds());\r\n          }\r\n        }\r\n      }\r\n      playing();\r\n    } else {\r\n      drawing(ci, that.ci);\r\n      T.do('typhoon-playend', {\r\n        tf: data,\r\n        attr: points[ci]\r\n      })\r\n      that.complete = true;\r\n    }\r\n    that.ci = ci;\r\n  }\r\n\r\n  /**\r\n   * 获取台风播放时间点\r\n   * @param data \r\n   * @param time \r\n   */\r\n  getTimeIndex(data, time) {\r\n    if (time !== void 0) {\r\n      return +time;\r\n    }\r\n    return data.length - 1;\r\n  }\r\n  /**\r\n   * 设置台风播放时间点\r\n   * @param time\r\n   */\r\n  setTimeIndex(time) {\r\n    if (this.ci !== time) {\r\n      if (this.complete) {\r\n        // 用于二三维一体化，同步台风历史路径\r\n        this.data.do('setTimeIndex', time)\r\n        this.draw(time);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param layer \r\n   */\r\n  addTo(layer) {\r\n    let that = this;\r\n    if (layer.map) {\r\n      that.map = layer.map.on('zoomend', () => {\r\n        that.init && that.update()\r\n      });\r\n      that.layer = layer;\r\n      layer._add(this.group);\r\n      if (!that.init) {\r\n        that.init = true;\r\n        that.lsp = [];\r\n        that.draw();\r\n      }\r\n    } else {\r\n      // 未加载到地图上 \r\n      layer.layer.on('add', () => {\r\n        this.addTo(layer);\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * 移除\r\n   */\r\n  remove() {\r\n    this.init = false;\r\n    // 不能直接用 remove，当上层layer被挂起移除的时候无法删除。\r\n    // 所以这里用 removeFrom\r\n    this.layer && this.group.removeFrom(this.layer.layer);\r\n  }\r\n  /**\r\n   * 台风路径点点击/移入事件\r\n   * @param e\r\n   */\r\n  handleEvent(e) {\r\n    let {\r\n      data,\r\n      lsp,\r\n      complete,\r\n      _overTarget,\r\n      options\r\n    } = this;\r\n    let {\r\n      target,\r\n      type\r\n    } = e;\r\n    let i = lsp.indexOf(target);\r\n    if (!complete) {\r\n      return;\r\n    }\r\n    let event;\r\n    switch (type) {\r\n      case 'click':\r\n        event = {\r\n          data: data,\r\n          dataProvider: data.points,\r\n          selItem: data.points[i],\r\n          event: e\r\n        };\r\n        if (lsp[i]) {\r\n          options.click2drawOnTime && this.setTimeIndex(i);\r\n          target.openPopup();\r\n          target.setRadius(7);\r\n          T.do('typhoon-lslj-click', event);\r\n          //台风播放控件\r\n        } else {\r\n          target.openPopup();\r\n          T.do('typhoon-yblj-click', event);\r\n        }\r\n        break;\r\n      case 'mouseover':\r\n        event = {\r\n          tf: data,\r\n          attr: target.__data || data.points[i],\r\n          event: e\r\n        };\r\n        if (lsp[i]) {\r\n          if (_overTarget != target) {\r\n            target.setRadius(7);\r\n            this._overTarget = target;\r\n          }\r\n          T.do('typhoon-lslj-over', event);\r\n        } else {\r\n          T.do('typhoon-yblj-over', event);\r\n        }\r\n        break;\r\n      case 'mouseout':\r\n        if (_overTarget) {\r\n          _overTarget.setRadius(4);\r\n          this._overTarget = null;\r\n        }\r\n        T.do('typhoon-lslj-out', event);\r\n        break;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Typhoon.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.10.22\r\n */\r\nlet { Circle, CircleMarker } = L;\r\n/**\r\n * 台风四象限风圈\r\n */\r\nexport default Circle.extend({\r\n  /**\r\n   * 初始化\r\n   */\r\n  initialize(latlng, options) {\r\n    CircleMarker.prototype.initialize.call(this, latlng, options)\r\n    this._mRadius = this.options.radius;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _project() {\r\n    let { _latlng, _map: map, options, _mRadius } = this;\r\n    // let crs = L.CRS.EPSG3857;//map.options.crs;\r\n    let [ne, nw, se, sw] = _mRadius;//东北，西北，东南，西南 四象限的半径，单位米\r\n    let crs = map.options.crs;\r\n    let { Earth } = L.CRS;\r\n    let { lat, lng } = _latlng;\r\n    if (crs.distance === Earth.distance) {\r\n      let point;\r\n      function getR(r) {\r\n        let d = Math.PI / 180;\r\n        let latR = (r / Earth.R) / d;\r\n        let top = map.project([lat + latR, lng]);\r\n        let bottom = map.project([lat - latR, lng]);\r\n        let p = top.add(bottom).divideBy(2);\r\n        // let lat2 = map.unproject(p).lat;\r\n        // let lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /\r\n        //   (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;\r\n\r\n        // if (isNaN(lngR) || lngR === 0) {\r\n        //   lngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425\r\n        // }\r\n        point = point || p.subtract(map.getPixelOrigin());\r\n        // this._radius = isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\r\n        // this._radiusY = p.y - top.y;\r\n        // return isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\r\n        return p.y - top.y;\r\n      }\r\n      ne = getR(ne);\r\n      nw = getR(nw);\r\n      se = getR(se);\r\n      sw = getR(sw);\r\n      this._point = point;\r\n      //\r\n      this._radius = [\r\n        sw,//西南\r\n        se,//东南\r\n        nw,//西北\r\n        ne //东北\r\n      ];\r\n    } else {\r\n      let xy = crs.project(_latlng);\r\n      ne = [crs.unproject(xy.add([ne, 0])), crs.unproject(xy.add([0, -ne]))]\r\n      nw = [crs.unproject(xy.add([-nw, 0])), crs.unproject(xy.add([0, -nw]))]\r\n      se = [crs.unproject(xy.add([se, 0])), crs.unproject(xy.add([0, se]))]\r\n      sw = [crs.unproject(xy.add([-sw, 0])), crs.unproject(xy.add([0, sw]))]\r\n      //中心点\r\n      let point = this._point = map.latLngToLayerPoint(_latlng);\r\n      let { x } = point;\r\n      //各象限半径 - 顺时针\r\n      this._radius = [\r\n        x - map.latLngToLayerPoint(sw[0]).x,//西南\r\n        map.latLngToLayerPoint(se[0]).x - x,//东南\r\n        x - map.latLngToLayerPoint(nw[0]).x,//西北\r\n        map.latLngToLayerPoint(ne[0]).x - x //东北\r\n      ]\r\n    }\r\n    this._updateBounds();\r\n  },\r\n  /**\r\n   * 绘制风圈\r\n   */\r\n  _updatePath() {\r\n    this._renderer._updateCircular(this);\r\n  },\r\n  /**\r\n   * 修改边界\r\n   */\r\n  _updateBounds() {\r\n    let { _point, _radius } = this;\r\n    let w = this._clickTolerance();\r\n    let [ne, nw, se, sw] = _radius;\r\n    let maxR = Math.max(ne, nw, se, sw);\r\n    let p = [maxR + w, maxR + w];\r\n    this._pxBounds = new L.Bounds(_point.subtract(p), _point.add(p));\r\n  }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Quadrant.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2018-3-23\r\n * @see https://github.com/yakitoritabetai/Leaflet.LabelTextCollision\r\n * @see https://github.com/XC-Zhang/leaflet-text\r\n */\r\nlet {\r\n  Layer\r\n} = L;\r\n/** \r\n * \r\n */\r\nLayer.include({\r\n  /**\r\n   * \r\n   */\r\n  getText() {\r\n    return this._text;\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\r\n  bindText(content, options) {\r\n    //\r\n    if (this._text instanceof L.Text) {\r\n      this._text.setContent(content);\r\n    } else {\r\n      let {\r\n        _latlng\r\n      } = this;\r\n      // 绑定文本和图标，比如说危险区内部的警告图标，或者河流上的文本标注\r\n      this._text = content ? L.text(_latlng, content, options) : new L.VectorMarker(_latlng, options);\r\n    }\r\n    //\r\n    this._initTextInteractions();\r\n    //\r\n    if (this._map && this._map.hasLayer(this)) {\r\n      this.openText();\r\n    }\r\n    return this;\r\n  },\r\n  /**\r\n   * \r\n   * @param \r\n   */\r\n  _initTextInteractions: function () {\r\n    this.on({\r\n      remove: this._closeText,\r\n      move: this._moveText\r\n    });\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} layer \r\n   * @param {*} latlng \r\n   */\r\n  openText(layer, latlng) {\r\n    if (!(layer instanceof Layer)) {\r\n      latlng = layer;\r\n      layer = this;\r\n    }\r\n    if (!latlng) {\r\n      latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();\r\n    }\r\n    let {\r\n      _map,\r\n      _text\r\n    } = this;\r\n    if (_map) {\r\n      _text._source = layer;\r\n      _text.setLatLng(latlng);\r\n      if (!_map.hasLayer(_text)) {\r\n        _map.addLayer(_text);\r\n      }\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\r\n  unbindText(map) {\r\n    let {\r\n      _text\r\n    } = this;\r\n    if (_text) {\r\n      map.removeLayer(_text);\r\n      this._text = null;\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _closeText() {\r\n    let {\r\n      _map,\r\n      _text\r\n    } = this;\r\n    if (_map && _text && _map.hasLayer(_text)) {\r\n      _map.removeLayer(_text);\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _moveText(e) {\r\n    this._text.setLatLng(e.latlng);\r\n  }\r\n})\r\n/**\r\n * \r\n */\r\nL.Canvas.include({\r\n  /**\r\n   * 获取文本宽度\r\n   */\r\n  _getTextWidth(layer) {\r\n    this._ctx.font = layer.options.font;\r\n    return this._ctx.measureText(layer._text).width;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _updateText(layer) {\r\n    if (!this._drawing || layer._empty()) {\r\n      return;\r\n    }\r\n\r\n    var p = layer._point;\r\n    var ctx = this._ctx;\r\n    var options = layer.options;\r\n\r\n    if (!options.fill) {\r\n      return;\r\n    }\r\n\r\n    if (options.offset) {\r\n      p = p.add(options.offset);\r\n    }\r\n    // \r\n    ctx.font = options.font;\r\n    ctx.translate(p.x, p.y);\r\n    ctx.rotate(options.rotation);\r\n    ctx.fillStyle = options.color;\r\n    ctx.textAlign = options.textAlign;\r\n    ctx.fillText(layer._text, 0, 0);\r\n    ctx.rotate(-options.rotation);\r\n    ctx.translate(-p.x, -p.y);\r\n  }\r\n});\r\n\r\n/**\r\n * \r\n */\r\nL.Text = L.Path.extend({\r\n  options: {\r\n    color: 'blue',\r\n    fill: true,\r\n    fillOpacity: 1.0,\r\n    rotation: 0.0,\r\n    stroke: false,\r\n    textAlign: 'center',\r\n    font: \"14px arial\"\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  initialize: function (latlng, text, options) {\r\n    L.setOptions(this, options);\r\n    this._latlng = L.latLng(latlng);\r\n    this._text = String(text || options.text);\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} text \r\n   */\r\n  setContent(text) {\r\n    this._text = String(text);\r\n    this._update();\r\n  },\r\n\r\n  setLatLng(latlng) {\r\n    this._latlng = L.latLng(latlng);\r\n    this._update();\r\n  },\r\n\r\n  getLatLng() {\r\n    return this._latlng;\r\n  },\r\n\r\n  _project() {\r\n    this._point = this._map.latLngToLayerPoint(this._latlng);\r\n    this._updateBounds();\r\n  },\r\n\r\n  _updateBounds() {\r\n    var w = this._renderer._getTextWidth(this);\r\n    var p = [w / 2, w / 2];\r\n    this._pxBounds = L.bounds(this._point.subtract(p), this._point.add(p));\r\n  },\r\n\r\n  _update() {\r\n    if (this._map) {\r\n      this._updatePath();\r\n    }\r\n  },\r\n\r\n  _updatePath() {\r\n    this._renderer._updateText(this);\r\n  },\r\n\r\n  _empty() {\r\n    return !this._renderer._bounds.intersects(this._pxBounds);\r\n  },\r\n\r\n  _containsPoint: function (p) {\r\n    return false;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let {\r\n      lat,\r\n      lng\r\n    } = this.getLatLng();\r\n    this.options.text = this._text;\r\n\r\n    return {\r\n      type: 'Feature',\r\n      properties: {},\r\n      geometry: {\r\n        coordinates: [lng, lat],\r\n        type: 'Text'\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nL.text = function (latlng, text, options) {\r\n  return new L.Text(latlng, text, options);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Text.js","/**\r\n * @see https://github.com/mourner/simpleheat\r\n * @see https://github.com/Leaflet/Leaflet.heat\r\n */\r\nL.Heat = L.Layer.extend({\r\n  // options: {\r\n  //     minOpacity: 0.05,\r\n  //     maxZoom: 18,\r\n  //     radius: 25,\r\n  //     blur: 15,\r\n  //     max: 1.0\r\n  //     gradient: {\r\n  //        0.4: 'blue',\r\n  //        0.6: 'cyan',\r\n  //        0.7: 'lime',\r\n  //        0.8: 'yellow',\r\n  //        1.0: 'red'\r\n  //     }\r\n  // },\r\n  /**\r\n   * \r\n   * @param {*} latlngs \r\n   * @param {*} options \r\n   */\r\n  initialize(latlngs, options) {\r\n    this._latlngs = latlngs;\r\n    L.setOptions(this, options);\r\n  },\r\n\r\n  setLatLngs(latlngs) {\r\n    this._latlngs = latlngs;\r\n    return this.redraw();\r\n  },\r\n\r\n  addLatLng(latlng) {\r\n    this._latlngs.push(latlng);\r\n    return this.redraw();\r\n  },\r\n\r\n  setOptions(options) {\r\n    L.setOptions(this, options);\r\n    if (this._heat) {\r\n      this._updateOptions();\r\n    }\r\n    return this.redraw();\r\n  },\r\n\r\n  redraw() {\r\n    if (this._heat && !this._frame && this._map && !this._map._animating) {\r\n      this._frame = L.Util.requestAnimFrame(this._redraw, this);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  onAdd(map) {\r\n    this._map = map;\r\n\r\n    if (!this._canvas) {\r\n      this._initCanvas();\r\n    }\r\n\r\n    if (this.options.pane) {\r\n      this.getPane().appendChild(this._canvas);\r\n    } else {\r\n      map._panes.overlayPane.appendChild(this._canvas);\r\n    }\r\n\r\n    map.on('moveend', this._reset, this);\r\n\r\n    if (map.options.zoomAnimation && L.Browser.any3d) {\r\n      map.on('zoomanim', this._animateZoom, this);\r\n    }\r\n\r\n    this._reset();\r\n  },\r\n\r\n  onRemove(map) {\r\n    if (this.options.pane) {\r\n      this.getPane().removeChild(this._canvas);\r\n    } else {\r\n      map.getPanes().overlayPane.removeChild(this._canvas);\r\n    }\r\n\r\n    map.off('moveend', this._reset, this);\r\n\r\n    if (map.options.zoomAnimation) {\r\n      map.off('zoomanim', this._animateZoom, this);\r\n    }\r\n  },\r\n\r\n  addTo(map) {\r\n    map.addLayer(this);\r\n    return this;\r\n  },\r\n\r\n  _initCanvas() {\r\n    var canvas = this._canvas = T.canvas('leaflet-heatmap-layer leaflet-layer')\r\n\r\n    var originProp = L.DomUtil.testProp(['transformOrigin', 'WebkitTransformOrigin', 'msTransformOrigin']);\r\n    canvas.style[originProp] = '50% 50%';\r\n\r\n    var size = this._map.getSize();\r\n    canvas.width = size.x;\r\n    canvas.height = size.y;\r\n\r\n    var animated = this._map.options.zoomAnimation && L.Browser.any3d;\r\n    L.DomUtil.addClass(canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\r\n\r\n    this._heat = simpleheat(canvas);\r\n    this._updateOptions();\r\n  },\r\n\r\n  _updateOptions() {\r\n    this._heat.radius(this.options.radius || this._heat.defaultRadius, this.options.blur);\r\n\r\n    if (this.options.gradient) {\r\n      this._heat.gradient(this.options.gradient);\r\n    }\r\n    if (this.options.max) {\r\n      this._heat.max(this.options.max);\r\n    }\r\n  },\r\n\r\n  _reset() {\r\n    var topLeft = this._map.containerPointToLayerPoint([0, 0]);\r\n    L.DomUtil.setPosition(this._canvas, topLeft);\r\n\r\n    var size = this._map.getSize();\r\n\r\n    if (this._heat._width !== size.x) {\r\n      this._canvas.width = this._heat._width = size.x;\r\n    }\r\n    if (this._heat._height !== size.y) {\r\n      this._canvas.height = this._heat._height = size.y;\r\n    }\r\n\r\n    this._redraw();\r\n  },\r\n\r\n  _redraw() {\r\n    if (!this._map) {\r\n      return;\r\n    }\r\n    var data = [],\r\n      r = this._heat._r,\r\n      size = this._map.getSize(),\r\n      bounds = new L.Bounds(\r\n        L.point([-r, -r]),\r\n        size.add([r, r])),\r\n\r\n      max = this.options.max === undefined ? 1 : this.options.max,\r\n      maxZoom = this.options.maxZoom === undefined ? this._map.getMaxZoom() : this.options.maxZoom,\r\n      v = 1 / Math.pow(2, Math.max(0, Math.min(maxZoom - this._map.getZoom(), 12))),\r\n      cellSize = r / 2,\r\n      grid = [],\r\n      panePos = this._map._getMapPanePos(),\r\n      offsetX = panePos.x % cellSize,\r\n      offsetY = panePos.y % cellSize,\r\n      i, len, p, cell, x, y, j, len2, k;\r\n\r\n    // console.time('process');\r\n    for (i = 0, len = this._latlngs.length; i < len; i++) {\r\n      p = this._map.latLngToContainerPoint(this._latlngs[i]);\r\n      if (bounds.contains(p)) {\r\n        x = Math.floor((p.x - offsetX) / cellSize) + 2;\r\n        y = Math.floor((p.y - offsetY) / cellSize) + 2;\r\n\r\n        var alt = this._latlngs[i].alt || 1;\r\n        k = alt * v;\r\n\r\n        grid[y] = grid[y] || [];\r\n        cell = grid[y][x];\r\n\r\n        if (!cell) {\r\n          grid[y][x] = [p.x, p.y, k];\r\n\r\n        } else {\r\n          cell[0] = (cell[0] * cell[2] + p.x * k) / (cell[2] + k); // x\r\n          cell[1] = (cell[1] * cell[2] + p.y * k) / (cell[2] + k); // y\r\n          cell[2] += k; // cumulated intensity value\r\n        }\r\n      }\r\n    }\r\n\r\n    for (i = 0, len = grid.length; i < len; i++) {\r\n      if (grid[i]) {\r\n        for (j = 0, len2 = grid[i].length; j < len2; j++) {\r\n          cell = grid[i][j];\r\n          if (cell) {\r\n            data.push([\r\n              Math.round(cell[0]),\r\n              Math.round(cell[1]),\r\n              Math.min(cell[2], max)\r\n            ]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // console.timeEnd('process');\r\n\r\n    // console.time('draw ' + data.length);\r\n    this._heat.data(data).draw(this.options.minOpacity);\r\n    // console.timeEnd('draw ' + data.length);\r\n\r\n    this._frame = null;\r\n  },\r\n\r\n  _animateZoom(e) {\r\n    var scale = this._map.getZoomScale(e.zoom),\r\n      offset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\r\n\r\n    if (L.DomUtil.setTransform) {\r\n      L.DomUtil.setTransform(this._canvas, offset, scale);\r\n    } else {\r\n      this._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\r\n    }\r\n  }\r\n});\r\n\r\nL.heat = function (latlngs, options) {\r\n  return new L.Heat(latlngs, options);\r\n};\r\n\r\n\r\nfunction simpleheat(canvas) {\r\n  if (!(this instanceof simpleheat)) return new simpleheat(canvas);\r\n\r\n  this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\r\n\r\n  this._ctx = canvas.getContext('2d');\r\n  this._width = canvas.width;\r\n  this._height = canvas.height;\r\n\r\n  this._max = 1;\r\n  this._data = [];\r\n}\r\n\r\nsimpleheat.prototype = {\r\n\r\n  defaultRadius: 25,\r\n  /**\r\n   * \r\n   */\r\n  defaultGradient: {\r\n    0.4: 'blue',\r\n    0.6: 'cyan',\r\n    0.7: 'lime',\r\n    0.8: 'yellow',\r\n    1.0: 'red'\r\n  },\r\n\r\n  data(data) {\r\n    this._data = data;\r\n    return this;\r\n  },\r\n\r\n  max(max) {\r\n    this._max = max;\r\n    return this;\r\n  },\r\n\r\n  add(point) {\r\n    this._data.push(point);\r\n    return this;\r\n  },\r\n\r\n  clear() {\r\n    this._data = [];\r\n    return this;\r\n  },\r\n\r\n  radius(r, blur) {\r\n    blur = blur === undefined ? 15 : blur;\r\n\r\n    // create a grayscale blurred circle image that we'll use for drawing points\r\n    var circle = this._circle = T.canvas(),\r\n      ctx = circle.getContext('2d'),\r\n      r2 = this._r = r + blur;\r\n\r\n    circle.width = circle.height = r2 * 2;\r\n\r\n    ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\r\n    ctx.shadowBlur = blur;\r\n    ctx.shadowColor = 'black';\r\n\r\n    ctx.beginPath();\r\n    ctx.arc(-r2, -r2, r, 0, Math.PI * 2, true);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n\r\n    return this;\r\n  },\r\n\r\n  resize() {\r\n    this._width = this._canvas.width;\r\n    this._height = this._canvas.height;\r\n  },\r\n\r\n  gradient(grad) {\r\n    // create a 256x1 gradient that we'll use to turn a grayscale heatmap into a colored one\r\n    var canvas = T.canvas(),\r\n      ctx = canvas.getContext('2d'),\r\n      gradient = ctx.createLinearGradient(0, 0, 0, 256);\r\n\r\n    canvas.width = 1;\r\n    canvas.height = 256;\r\n\r\n    for (var i in grad) {\r\n      gradient.addColorStop(+i, grad[i]);\r\n    }\r\n\r\n    ctx.fillStyle = gradient;\r\n    ctx.fillRect(0, 0, 1, 256);\r\n\r\n    this._grad = ctx.getImageData(0, 0, 1, 256).data;\r\n\r\n    return this;\r\n  },\r\n\r\n  draw(minOpacity) {\r\n    if (!this._circle) this.radius(this.defaultRadius);\r\n    if (!this._grad) this.gradient(this.defaultGradient);\r\n\r\n    var ctx = this._ctx;\r\n\r\n    ctx.clearRect(0, 0, this._width, this._height);\r\n\r\n    // draw a grayscale heatmap by putting a blurred circle at each data point\r\n    for (var i = 0, len = this._data.length, p; i < len; i++) {\r\n      p = this._data[i];\r\n      ctx.globalAlpha = Math.min(Math.max(p[2] / this._max, minOpacity === undefined ? 0.05 : minOpacity), 1);\r\n      ctx.drawImage(this._circle, p[0] - this._r, p[1] - this._r);\r\n    }\r\n\r\n    // colorize the heatmap, using opacity value of each pixel to get the right color from our gradient\r\n    var colored = ctx.getImageData(0, 0, this._width, this._height);\r\n    this._colorize(colored.data, this._grad);\r\n    ctx.putImageData(colored, 0, 0);\r\n\r\n    return this;\r\n  },\r\n\r\n  _colorize(pixels, gradient) {\r\n    for (var i = 0, len = pixels.length, j; i < len; i += 4) {\r\n      j = pixels[i + 3] * 4; // get gradient color from opacity value\r\n\r\n      if (j) {\r\n        pixels[i] = gradient[j];\r\n        pixels[i + 1] = gradient[j + 1];\r\n        pixels[i + 2] = gradient[j + 2];\r\n      }\r\n    }\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Heat.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2019-1-17\r\n */\r\nlet KAPPA = (4 * (Math.sqrt(2) - 1)) / 3;\r\nlet WIDTH_FACTOR = 0.0333;\r\nlet HEIGHT_FACTOR = 0.4;\r\n/**\r\n * \r\n */\r\nL.Canvas.include({\r\n  /**\r\n   * \r\n   */\r\n  _updateBalloon(layer) {\r\n    if (!this._drawing || layer._empty()) {\r\n      return;\r\n    }\r\n    //\r\n    var p = layer._point;\r\n    let ctx = this._ctx;\r\n    var options = layer.options;\r\n    //\r\n    let {\r\n      x,\r\n      y\r\n    } = p;\r\n\r\n    let {\r\n      radius,\r\n      color,\r\n      offset,\r\n      label\r\n    } = options;\r\n    radius -= 3;\r\n    //\r\n    if (!offset) {\r\n      offset = [0, -32]\r\n    }\r\n    x += offset[0];\r\n    y += offset[1];\r\n\r\n    var handleLength = KAPPA * radius * .6;\r\n\r\n    var widthDiff = (radius * WIDTH_FACTOR);\r\n    var heightDiff = (radius * HEIGHT_FACTOR);\r\n\r\n    var balloonBottomY = y + radius + heightDiff;\r\n\r\n    // 开始绘制\r\n    ctx.beginPath();\r\n\r\n    // Top Left Curve\r\n    var topLeftCurveStartX = x - radius;\r\n    var topLeftCurveStartY = y;\r\n\r\n    var topLeftCurveEndX = x;\r\n    var topLeftCurveEndY = y - radius;\r\n\r\n    ctx.moveTo(topLeftCurveStartX, topLeftCurveStartY);\r\n    ctx.bezierCurveTo(topLeftCurveStartX, topLeftCurveStartY - handleLength - widthDiff,\r\n      topLeftCurveEndX - handleLength, topLeftCurveEndY,\r\n      topLeftCurveEndX, topLeftCurveEndY);\r\n\r\n    // Top Right Curve\r\n    var topRightCurveStartX = x;\r\n    var topRightCurveStartY = y - radius;\r\n\r\n    var topRightCurveEndX = x + radius;\r\n    var topRightCurveEndY = y;\r\n\r\n    ctx.bezierCurveTo(topRightCurveStartX + handleLength + widthDiff, topRightCurveStartY,\r\n      topRightCurveEndX, topRightCurveEndY - handleLength,\r\n      topRightCurveEndX, topRightCurveEndY);\r\n\r\n    // Bottom Right Curve\r\n    var bottomRightCurveStartX = x + radius;\r\n    var bottomRightCurveStartY = y;\r\n\r\n    var bottomRightCurveEndX = x;\r\n    var bottomRightCurveEndY = balloonBottomY;\r\n\r\n    ctx.bezierCurveTo(bottomRightCurveStartX, bottomRightCurveStartY + handleLength,\r\n      bottomRightCurveEndX + handleLength, bottomRightCurveEndY,\r\n      bottomRightCurveEndX, bottomRightCurveEndY);\r\n\r\n    // Bottom Left Curve\r\n    var bottomLeftCurveStartX = x;\r\n    var bottomLeftCurveStartY = balloonBottomY;\r\n\r\n    var bottomLeftCurveEndX = x - radius;\r\n    var bottomLeftCurveEndY = y;\r\n\r\n    ctx.bezierCurveTo(bottomLeftCurveStartX - handleLength, bottomLeftCurveStartY,\r\n      bottomLeftCurveEndX, bottomLeftCurveEndY + handleLength,\r\n      bottomLeftCurveEndX, bottomLeftCurveEndY);\r\n\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n\r\n    //\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = color;\r\n    ctx.moveTo(x, balloonBottomY);\r\n    ctx.lineTo(x, balloonBottomY + 3);\r\n    ctx.stroke();\r\n    //\r\n    if (label) {\r\n      ctx.beginPath();\r\n      ctx.font = '14px arial';\r\n      ctx.fillStyle = 'white';\r\n      ctx.textAlign = 'center';\r\n      ctx.fillText(label, x, y + 5);\r\n    }\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Balloon.js","/**\r\n * @see https://github.com/ggolikov/Leaflet.River\r\n */\r\nlet {\r\n  FeatureGroup,\r\n  setOptions,\r\n  polyline: toPolyline\r\n} = L;\r\nlet FeatureGroupPrototype = FeatureGroup.prototype;\r\n/**\r\n * 性能太差，有待优化\r\n */\r\nexport default FeatureGroup.extend({\r\n  options: {\r\n    color: 'blue',\r\n    minWidth: 1,\r\n    maxWidth: 10,\r\n    ratio: null\r\n  },\r\n\r\n  initialize(latLngs, options) {\r\n    FeatureGroupPrototype.initialize.call(this, [], options);\r\n    this._latLngs = latLngs;\r\n\r\n    setOptions(this, options);\r\n    this._buildLines(latLngs);\r\n  },\r\n\r\n  onAdd(map) {\r\n    FeatureGroupPrototype.onAdd.call(this, map);\r\n    this._getLength(map);\r\n    this.setStyle();\r\n  },\r\n\r\n  _buildLines(latLngs) {\r\n    for (var i = 0; i < latLngs.length - 1; i++) {\r\n      var line = toPolyline([latLngs[i], latLngs[i + 1]]);\r\n      this.addLayer(line);\r\n    }\r\n  },\r\n\r\n  _getLength(map) {\r\n    var latLngs = this._latLngs,\r\n      totalLength = 0;\r\n\r\n    for (var i = 0; i < latLngs.length - 1; i++) {\r\n      totalLength += map.latLngToLayerPoint(latLngs[i]).distanceTo(map.latLngToLayerPoint(latLngs[i + 1]));\r\n    }\r\n\r\n    return this._length = totalLength;\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  setStyle(style) {\r\n    var opt = this.options = L.extend(this.options, style),\r\n      totalLength = this._length,\r\n      map = this._map,\r\n      layers = this._layers,\r\n      length = 0,\r\n      layer, latLngs;\r\n\r\n    for (var key in layers) {\r\n      layer = layers[key];\r\n      latLngs = layer.getLatLngs();\r\n      length += map.latLngToLayerPoint(latLngs[0]).distanceTo(map.latLngToLayerPoint(latLngs[1]));\r\n      layer.setStyle(L.extend({}, opt, {\r\n        weight: opt.ratio ? length / opt.ratio : opt.minWidth + (opt.maxWidth - opt.minWidth) * (length / totalLength)\r\n      }));\r\n    }\r\n  },\r\n\r\n  setMinWidth(width) {\r\n    this.setStyle({\r\n      minWidth: width\r\n    })\r\n  },\r\n\r\n  setMaxWidth(width) {\r\n    this.setStyle({\r\n      maxWidth: width\r\n    })\r\n  },\r\n\r\n  getMinWidth() {\r\n    return this.options.minWidth;\r\n  },\r\n\r\n  getMaxWidth() {\r\n    return this.options.maxWidth;\r\n  },\r\n\r\n  useLength(ratio) {\r\n    setOptions(this, {\r\n      ratio: ratio\r\n    });\r\n    return this;\r\n  },\r\n\r\n  convertToPolyline(options) {\r\n    return toPolyline(this._latLngs, options);\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/River.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.11\r\n */\r\n// import {distance} from './Util'\r\n/**\r\n * n次贝塞尔曲线\r\n * @param arr [[x,y],[x,y]]\r\n */\r\nexport var bezier = (arr, step) => {\r\n  let points = [arr[0]];//第一个点\r\n  let l = arr.length;\r\n  for (let i = step; i < 1; i += step) {\r\n    points.push(PBezier(arr, l, i));\r\n  }\r\n  points.push(arr[l - 1]);\r\n  return points;\r\n}\r\n/** \r\n * 燕尾、军标箭头\r\n * @param arr\r\n * @param step\r\n * @param options\r\n */\r\nexport var coattail = (arr, step, options) => {\r\n  let { r, ra, ma } = T.assign({\r\n    r: 36,     //箭头两边长度\r\n    ra: 0.2,   //张开弧度系数\r\n    ma: 16     //最大宽度\r\n  }, options);\r\n  let { PI } = Math;\r\n  //\r\n  let points = [arr[0]];// 第一个点\r\n  let l = arr.length; //\r\n  let p0 = arr[0]; // 上个点\r\n  let num = Math.ceil((1 / step) + 1) * 2;// 贝塞尔曲线上的点数\r\n  let ci = 1, p;\r\n  if (l < 2) return arr;\r\n  // 贝塞尔\r\n  for (let i = step; i < 1; i += step, ci++) {\r\n    p = PBezier(arr, l, i);//当前点\r\n    let r = ma - i * 9;    //半径\r\n    let radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]) - Math.PI / 2;\r\n    let offsetX = r * Math.cos(radians);\r\n    let offsetY = r * Math.sin(radians);\r\n    points[ci] = [p[0] + offsetX, p[1] + offsetY];\r\n    points[num - ci] = [p[0] - offsetX, p[1] - offsetY];\r\n    p0 = p;\r\n  }\r\n  // 箭头\r\n  p = arr[l - 1];\r\n  let radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]);\r\n  p = [p0[0] + (ma + 2) * Math.cos(radians), p0[1] + (ma + 2) * Math.sin(radians)];\r\n  points[ci++] = [p[0] + r * Math.cos(PI * (1 + ra) + radians), p[1] + r * Math.sin(PI * (1 + ra) + radians)]\r\n  points[ci++] = p;\r\n  points[ci] = [p[0] + r * Math.cos(PI * (1 - ra) + radians), p[1] + r * Math.sin(PI * (1 - ra) + radians)]\r\n  // 最后一个点 \r\n  points.push(arr[0]);\r\n  return points;\r\n}\r\n//\r\nlet PBezier = (arr, l, t) => {\r\n  let px = 0,\r\n    py = 0,\r\n    n = l - 1;//n次\r\n  for (let i = 0, b; i < l; i++) {\r\n    b = BEZ(n, i, t);\r\n    px += arr[i][0] * b;\r\n    py += arr[i][1] * b;\r\n  }\r\n  return [px, py]\r\n}\r\n//基函数\r\nlet BEZ = (n, k, t) => {\r\n  return C(n, k) * Math.pow(t, k) * Math.pow(1 - t, n - k);\r\n}\r\n//组合排序\r\nlet C = (n, k) => {\r\n  return Factorial(n) / (Factorial(k) * Factorial(n - k));\r\n}\r\n//阶乘\r\nlet Factorial = i => {\r\n  let n = 1;\r\n  for (let j = 1; j <= i; j++) {\r\n    n *= j;\r\n  }\r\n  return n;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Bezier.js","(function () {\n  'use strict';\n\n  /** @preserve OverlappingMarkerSpiderfier\n  https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet\n  Copyright (c) 2011 - 2012 George MacKerron\n  Released under the MIT licence: http://opensource.org/licenses/mit-license\n  Note: The Leaflet maps API must be included *before* this code\n   */\n  var hasProp = {}.hasOwnProperty,\n    slice = [].slice;\n\n  (function () {\n\n    if (this['L'] == null) {\n      return;\n    }\n    return this['OverlappingMarkerSpiderfier'] = L.OverlappingMarkerSpiderfier = (function () {\n      var p, twoPi;\n\n      p = _Class.prototype;\n\n      p['VERSION'] = '0.2.6';\n\n      twoPi = Math.PI * 2;\n\n      p['keepSpiderfied'] = false;\n\n      p['nearbyDistance'] = 20;\n\n      p['circleSpiralSwitchover'] = 9;\n\n      p['circleFootSeparation'] = 25;\n\n      p['circleStartAngle'] = twoPi / 12;\n\n      p['spiralFootSeparation'] = 28;\n\n      p['spiralLengthStart'] = 11;\n\n      p['spiralLengthFactor'] = 5;\n\n      p['legWeight'] = 1.5;\n\n      p['legColors'] = {\n        'usual': '#222',\n        'highlighted': '#f00'\n      };\n\n      function _Class(map, opts) {\n        var e, j, k, len, ref, v;\n        this.map = map;\n        if (opts == null) {\n          opts = {};\n        }\n        for (k in opts) {\n          if (!hasProp.call(opts, k)) continue;\n          v = opts[k];\n          this[k] = v;\n        }\n        this.initMarkerArrays();\n        this.listeners = {};\n        ref = ['click', 'zoomend'];\n        for (j = 0, len = ref.length; j < len; j++) {\n          e = ref[j];\n          this.map.addEventListener(e, (function (_this) {\n            return function () {\n              return _this['unspiderfy']();\n            };\n          })(this));\n        }\n      }\n\n      p.initMarkerArrays = function () {\n        this.markers = [];\n        return this.markerListeners = [];\n      };\n\n      p['addMarker'] = function (marker) {\n        var markerListener;\n        if (marker['_oms'] != null) {\n          return this;\n        }\n        marker['_oms'] = true;\n        markerListener = (function (_this) {\n          return function () {\n            return _this.spiderListener(marker);\n          };\n        })(this);\n        marker.addEventListener('click', markerListener);\n        this.markerListeners.push(markerListener);\n        this.markers.push(marker);\n        return this;\n      };\n\n      p['getMarkers'] = function () {\n        return this.markers.slice(0);\n      };\n\n      p['removeMarker'] = function (marker) {\n        var i, markerListener;\n        if (marker['_omsData'] != null) {\n          this['unspiderfy']();\n        }\n        i = this.arrIndexOf(this.markers, marker);\n        if (i < 0) {\n          return this;\n        }\n        markerListener = this.markerListeners.splice(i, 1)[0];\n        marker.removeEventListener('click', markerListener);\n        delete marker['_oms'];\n        this.markers.splice(i, 1);\n        return this;\n      };\n\n      p['clearMarkers'] = function () {\n        var i, j, len, marker, markerListener, ref;\n        this['unspiderfy']();\n        ref = this.markers;\n        for (i = j = 0, len = ref.length; j < len; i = ++j) {\n          marker = ref[i];\n          markerListener = this.markerListeners[i];\n          marker.removeEventListener('click', markerListener);\n          delete marker['_oms'];\n        }\n        this.initMarkerArrays();\n        return this;\n      };\n\n      p['addListener'] = function (event, func) {\n        var base;\n        ((base = this.listeners)[event] != null ? base[event] : base[event] = []).push(func);\n        return this;\n      };\n\n      p['removeListener'] = function (event, func) {\n        var i;\n        i = this.arrIndexOf(this.listeners[event], func);\n        if (!(i < 0)) {\n          this.listeners[event].splice(i, 1);\n        }\n        return this;\n      };\n\n      p['clearListeners'] = function (event) {\n        this.listeners[event] = [];\n        return this;\n      };\n\n      p.trigger = function () {\n        var args, event, func, j, len, ref, ref1, results;\n        event = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n        ref1 = (ref = this.listeners[event]) != null ? ref : [];\n        results = [];\n        for (j = 0, len = ref1.length; j < len; j++) {\n          func = ref1[j];\n          results.push(func.apply(null, args));\n        }\n        return results;\n      };\n\n      p.generatePtsCircle = function (count, centerPt) {\n        var angle, angleStep, circumference, i, j, legLength, ref, results;\n        circumference = this['circleFootSeparation'] * (2 + count);\n        legLength = circumference / twoPi;\n        angleStep = twoPi / count;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle = this['circleStartAngle'] + i * angleStep;\n          results.push(new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle)));\n        }\n        return results;\n      };\n\n      p.generatePtsSpiral = function (count, centerPt) {\n        var angle, i, j, legLength, pt, ref, results;\n        legLength = this['spiralLengthStart'];\n        angle = 0;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle += this['spiralFootSeparation'] / legLength + i * 0.0005;\n          pt = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle));\n          legLength += twoPi * this['spiralLengthFactor'] / angle;\n          results.push(pt);\n        }\n        return results;\n      };\n\n      p.spiderListener = function (marker) {\n        var j, len, m, mPt, markerPt, markerSpiderfied, nearbyMarkerData, nonNearbyMarkers, pxSq, ref;\n        markerSpiderfied = marker['_omsData'] != null;\n        if (!(markerSpiderfied && this['keepSpiderfied'])) {\n          this['unspiderfy']();\n        }\n        if (markerSpiderfied) {\n          return this.trigger('click', marker);\n        } else {\n          nearbyMarkerData = [];\n          nonNearbyMarkers = [];\n          pxSq = this['nearbyDistance'] * this['nearbyDistance'];\n          markerPt = this.map.latLngToLayerPoint(marker.getLatLng());\n          ref = this.markers;\n          for (j = 0, len = ref.length; j < len; j++) {\n            m = ref[j];\n            if (!this.map.hasLayer(m)) {\n              continue;\n            }\n            mPt = this.map.latLngToLayerPoint(m.getLatLng());\n            if (this.ptDistanceSq(mPt, markerPt) < pxSq) {\n              nearbyMarkerData.push({\n                marker: m,\n                markerPt: mPt\n              });\n            } else {\n              nonNearbyMarkers.push(m);\n            }\n          }\n          if (nearbyMarkerData.length === 1) {\n            return this.trigger('click', marker);\n          } else {\n            return this.spiderfy(nearbyMarkerData, nonNearbyMarkers);\n          }\n        }\n      };\n\n      p.makeHighlightListeners = function (marker) {\n        return {\n          highlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['highlighted']\n              });\n            };\n          })(this),\n          unhighlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['usual']\n              });\n            };\n          })(this)\n        };\n      };\n\n      p.spiderfy = function (markerData, nonNearbyMarkers) {\n        var bodyPt, footLl, footPt, footPts, leg, marker, md, mhl, nearestMarkerDatum, numFeet, spiderfiedMarkers;\n        this.spiderfying = true;\n        numFeet = markerData.length;\n        bodyPt = this.ptAverage((function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = markerData.length; j < len; j++) {\n            md = markerData[j];\n            results.push(md.markerPt);\n          }\n          return results;\n        })());\n        footPts = numFeet >= this['circleSpiralSwitchover'] ? this.generatePtsSpiral(numFeet, bodyPt).reverse() : this.generatePtsCircle(numFeet, bodyPt);\n        spiderfiedMarkers = (function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = footPts.length; j < len; j++) {\n            footPt = footPts[j];\n            footLl = this.map.layerPointToLatLng(footPt);\n            nearestMarkerDatum = this.minExtract(markerData, (function (_this) {\n              return function (md) {\n                return _this.ptDistanceSq(md.markerPt, footPt);\n              };\n            })(this));\n            marker = nearestMarkerDatum.marker;\n            leg = new L.Polyline([marker.getLatLng(), footLl], {\n              color: this['legColors']['usual'],\n              weight: this['legWeight'],\n              clickable: false\n            });\n            this.map.addLayer(leg);\n            marker['_omsData'] = {\n              usualPosition: marker.getLatLng(),\n              leg: leg\n            };\n            if (this['legColors']['highlighted'] !== this['legColors']['usual']) {\n              mhl = this.makeHighlightListeners(marker);\n              marker['_omsData'].highlightListeners = mhl;\n              marker.addEventListener('mouseover', mhl.highlight);\n              marker.addEventListener('mouseout', mhl.unhighlight);\n            }\n            marker.setLatLng(footLl);\n            marker.setZIndexOffset(1000000);\n            results.push(marker);\n          }\n          return results;\n        }).call(this);\n        delete this.spiderfying;\n        this.spiderfied = true;\n        return this.trigger('spiderfy', spiderfiedMarkers, nonNearbyMarkers);\n      };\n\n      p['unspiderfy'] = function (markerNotToMove) {\n        var j, len, marker, mhl, nonNearbyMarkers, ref, unspiderfiedMarkers;\n        if (markerNotToMove == null) {\n          markerNotToMove = null;\n        }\n        if (this.spiderfied == null) {\n          return this;\n        }\n        this.unspiderfying = true;\n        unspiderfiedMarkers = [];\n        nonNearbyMarkers = [];\n        ref = this.markers;\n        for (j = 0, len = ref.length; j < len; j++) {\n          marker = ref[j];\n          if (marker['_omsData'] != null) {\n            this.map.removeLayer(marker['_omsData'].leg);\n            if (marker !== markerNotToMove) {\n              marker.setLatLng(marker['_omsData'].usualPosition);\n            }\n            marker.setZIndexOffset(0);\n            mhl = marker['_omsData'].highlightListeners;\n            if (mhl != null) {\n              marker.removeEventListener('mouseover', mhl.highlight);\n              marker.removeEventListener('mouseout', mhl.unhighlight);\n            }\n            delete marker['_omsData'];\n            unspiderfiedMarkers.push(marker);\n          } else {\n            nonNearbyMarkers.push(marker);\n          }\n        }\n        delete this.unspiderfying;\n        delete this.spiderfied;\n        this.trigger('unspiderfy', unspiderfiedMarkers, nonNearbyMarkers);\n        return this;\n      };\n\n      p.ptDistanceSq = function (pt1, pt2) {\n        var dx, dy;\n        dx = pt1.x - pt2.x;\n        dy = pt1.y - pt2.y;\n        return dx * dx + dy * dy;\n      };\n\n      p.ptAverage = function (pts) {\n        var j, len, numPts, pt, sumX, sumY;\n        sumX = sumY = 0;\n        for (j = 0, len = pts.length; j < len; j++) {\n          pt = pts[j];\n          sumX += pt.x;\n          sumY += pt.y;\n        }\n        numPts = pts.length;\n        return new L.Point(sumX / numPts, sumY / numPts);\n      };\n\n      p.minExtract = function (set, func) {\n        var bestIndex, bestVal, index, item, j, len, val;\n        for (index = j = 0, len = set.length; j < len; index = ++j) {\n          item = set[index];\n          val = func(item);\n          if ((typeof bestIndex === \"undefined\" || bestIndex === null) || val < bestVal) {\n            bestVal = val;\n            bestIndex = index;\n          }\n        }\n        return set.splice(bestIndex, 1)[0];\n      };\n\n      p.arrIndexOf = function (arr, obj) {\n        var i, j, len, o;\n        if (arr.indexOf != null) {\n          return arr.indexOf(obj);\n        }\n        for (i = j = 0, len = arr.length; j < len; i = ++j) {\n          o = arr[i];\n          if (o === obj) {\n            return i;\n          }\n        }\n        return -1;\n      };\n\n      return _Class;\n\n    })();\n  }).call(window);\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/overlapping-marker-spiderfier-leaflet/build/oms.js\n// module id = 37\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 4\n// module chunks = 0 1","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/addStylesClient.js\n// module id = 5\n// module chunks = 0 1","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\r\nimport Tool from './Tool'\r\nimport VectorMarker from '@/feature/VectorMarker'\r\n//\r\n/**\r\n * 点图元绘制工具\r\n */\r\nexport default class PointTool extends Tool {\r\n  options = { feature: { src: 'circle', color: '#000', radius: 5, fillColor: '#FFF', weight: 1, fillOpacity: 1 } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    //\r\n    // this.map.once('mousedown', this.onMouseDown);\r\n    // this.map.once('mouseup', this.onEnd);\r\n    //\r\n    this.map.on('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    this.map.off('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { latlng } = e;\r\n    let { options, layer, marker } = this;\r\n\r\n    if (marker) {\r\n      marker.setLatLng(latlng);\r\n    } else {\r\n      this.marker = new VectorMarker(latlng, options.feature).addTo(layer);\r\n    }\r\n    this.onEnd();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PointTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet { Polyline } = L;\r\n/**\r\n * 线绘制工具\r\n */\r\nexport default class PolylineTool extends Tool {\r\n  options = { feature: { color: 'red', weight: 2 } }\r\n\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.mp = null\r\n  }\r\n  /**\r\n   * 绘制\r\n   */\r\n  onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, map, layer, options } = this;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('dblclick', this.onEnd, this)\r\n    } else {\r\n      this.mp = null\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker, mp } = this;\r\n    let { latlng } = e;\r\n    if (!mp) {\r\n      //\r\n      marker.addLatLng(latlng);\r\n      this.mp = latlng;\r\n    } else {\r\n      mp.lat = latlng.lat;\r\n      mp.lng = latlng.lng;\r\n      marker.getBounds().extend(mp)\r\n      marker.redraw();\r\n    }\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PolylineTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet { Polygon } = L;\r\n/**\r\n * 多边形绘制工具\r\n */\r\nexport default class PolygonTool extends Tool {\r\n  marker\r\n  mp // move point\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1 } }\r\n  /**\r\n   * \r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    //\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.mp = null\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  _onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, map, layer, options } = this;\r\n    let { latlng } = e;\r\n    if (!marker) {\r\n      marker = this.marker = new Polygon([latlng], options.feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('dblclick', this.onEnd, this)\r\n    }\r\n    this.mp = null;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker, mp } = this;\r\n    let { latlng } = e;\r\n    if (!mp) {\r\n      marker.addLatLng(latlng);\r\n      this.mp = latlng;\r\n    } else {\r\n      mp.lat = latlng.lat;\r\n      mp.lng = latlng.lng;\r\n      marker.getBounds().extend(mp)\r\n      marker.redraw();\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PolygonTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\nimport Circle from '@/feature/Circle'\r\n// let { Circle } = L;\r\n/**\r\n * 圆形绘制工具\r\n */\r\nexport default class CircleTool extends Tool {\r\n  marker\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1 } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let { map } = this;\r\n    map.once('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n  }\r\n  /**\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { options } = this;\r\n    let { map, layer } = this;\r\n    let { latlng } = e;\r\n    this.clear();//重复绘制，先移除旧图元\r\n    //\r\n    this.marker = new Circle(latlng, options.feature).addTo(layer)\r\n    map.on('mousemove', this.onMouseMove, this);\r\n    map.once('mouseup', this.onEnd, this);\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker } = this;\r\n    let latlng = e.latlng;\r\n    let center = marker.getLatLng();\r\n    let r = latlng.distanceTo(center);\r\n    marker.setRadius(r);\r\n    marker.redraw();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/CircleTool.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2017.5.20\r\n */\r\nlet { isArray } = T;\r\nlet { latLng } = L;\r\n/**\r\n * @param coords 支持的格式:\r\n * 一维：\r\n * {lat,lng}\r\n * {lon,lat}\r\n * [lon,lat]\r\n * 二维：\r\n * [[lon,lat],[lon,lat]...]\r\n * [{lon,lat},{lon,lat}...]\r\n * [{lat,lng},{lon,lng}...]\r\n * 多维：\r\n * ...\r\n */\r\nexport default function lonlats(coords, deep) {\r\n  return (deep-- && coords.map(item => lonlats(item, deep)))\r\n    || (isArray(coords) && latLng(coords[1], coords[0]))\r\n    || latLng(coords);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/LonLats.js"],"sourceRoot":""}